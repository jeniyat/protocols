{"uri":"Modeling-ecological-drivers-in-marine-viral-commun-efgbbjw","version_id":"0","protocol_name":"Modeling ecological drivers in marine viral communities using comparative metagenomics and network analyses","protocol_name_html":"Modeling ecological drivers in marine viral communities using comparative metagenomics and network analyses","is_prepublished":"0","can_edit":"0","parent_id":null,"api_version":"1","is_new_mode":"1","last_modified":"1522130401","type_id":"1","link":"http:\/\/www.pnas.org\/content\/111\/29\/10714.full","fork_id":"","public_fork_note":"","number_of_steps":"6","has_versions":"0","first_published_date":"1452726899","publish_date":"2016-02-03 16:46:04","documents":"null","have_protocol_in_step":"0","is_protocol_in_step":"0","vendor_name":"Contributed by users","vendor_link":"https:\/\/www.protocols.io","vendor_logo":"\/img\/vendors\/1.png","mod_mins":"-45","mod_secs":"1","description":"Long-standing questions in marine viral ecology are centered on understanding how viral assemblages change along gradients in space and time. However, investigating these fundamental ecological questions has been challenging due to incomplete representation of naturally occurring viral diversity in single gene- or morphology-based studies and an inability to identify up to 90% of reads in viral metagenomes (viromes). \u00a0In this protocol, I describe how to use\u00a0an annotation- and assembly-free strategy for comparative metagenomics that combines shared k-mer and social network analyses (regression modeling). This robust statistical framework enables visualization of complex sample networks and determination of ecological factors driving community structure. \u00a0This tutorial describes a protocol to reproduce work from the\u00a0Pacific Ocean virome comprised of 32 viromes from diverse sites in the Pacific Ocean.<br \/><br \/><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/b6ci6d.jpg\" alt=\"\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/b6bi6d.jpg\" data-ofn=\"F1.large.jpg\" \/><br \/> \"Modeling ecological drivers in marine viral communities using comparative metagenomics and network analyses\" (July 7, 2014, doi: 10.1073\/pnas.1319778111,\u00a0PNAS July 22, 2014 vol. 111 no. 29 10714-10719)<br \/><br \/>Code is freely available at\u00a0<a href=\"https:\/\/github.com\/hurwitzlab\/docker-fizkin\" target=\"_blank\">Github<\/a>.<br \/><br \/><br \/><br \/><br \/><br \/><br \/><br \/><br \/><br \/><br \/><br \/>","is_bookmarked":"0","can_reassign":"1","before_start":"","has_guidelines":"0","materials":[],"warning":"","version_class":"2248","public":"1","is_owner":"1","is_original_owner":"1","created_on":"1452712318","protocol_affiliation":"University of Arizona","affiliation":"University of Arizona","doi":"dx.doi.org\/10.17504\/protocols.io.efgbbjw","doi_status":"2","changed_fork_steps":null,"profile_url":"Ken-w2u26413","protocol_img":"https:\/\/www.protocols.io\/img\/default_protocol.png","profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/caii6d.png","full_name":"Ken Youens-Clark","created_by":"Ken Youens-Clark","private_link":"1384B67B410C58B1974D636F350EFA2D","original_img":"1","username":"ken-youensclark","is_retracted":"0","retraction_reason":null,"plos_id":null,"manuscript_citation":null,"journal_name":null,"is_donations_disabled":"0","is_donations_disabled_by_user":"9","item_record_id":207367,"fork_info":[],"compare_forks":[],"protocols":[],"groups":[{"group_id":"45","group_uri":"verve-net","group_name":"VERVE Net","group_logo":"https:\/\/s3.amazonaws.com\/pr-journal\/cdqcwwe.png","requested_uid":null,"request_flag":null,"my_request":"1"},{"group_id":"52","group_uri":"hurwitz-lab","group_name":"Hurwitz Lab","group_logo":"https:\/\/s3.amazonaws.com\/pr-journal\/iscwwe.png","requested_uid":null,"request_flag":null,"my_request":"1"}],"number_of_shared_runs":[],"ownership_history":[],"keywords":"","transfer_to_user":[],"sub_transfer":false,"is_transfer_pending":false,"number_of_bookmarks":"3","collections":[],"tags":[{"tag_id":"105","tag_name":"virus"},{"tag_id":"131","tag_name":" metagenomics"},{"tag_id":"132","tag_name":" Bayesian"}],"archived":0,"sub_authors":[],"sub_protocols_number":0,"can_edit_shared":0,"shared_runs":[],"is_shared_run":0,"is_shared":1,"banner":null,"contact_badges":[{"badge_id":"4","badge_image":"\/img\/badges\/gold.svg","badge_description":"Gold power author!"},{"badge_id":"5","badge_image":"\/img\/badges\/earlyadopter.svg","badge_description":"Early adopter"},{"badge_id":"6","badge_image":"\/img\/badges\/socialbutterfly.svg","badge_description":"Social butterfly"}],"number_of_comments":2,"is_locked":0,"is_locked_by":false,"authors":"Bonnie Hurwitz, Ken Youens-Clark","authors_list":[{"name":"Bonnie Hurwitz","affiliation":"University of Arizona","username":null,"profile_image":null},{"name":" Ken Youens-Clark","affiliation":"University of Arizona","username":null,"profile_image":null}],"user":{"profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/caii6d.png","username":"ken-youensclark","full_name":"Ken Youens-Clark","created_by":"Ken Youens-Clark"},"access":{"can_view":"1","can_remove":"0","can_add":"0","can_edit":0,"can_publish":0,"can_get_doi":0,"can_share":"0","can_move":"1","can_transfer":"1","can_download":"1","is_locked":"0"},"is_contact_suspended":0,"guidelines":"","status_id":"1","is_research":"1","status_info":null,"steps":[{"id":"140227","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"48B820E04B184594BF2233F3A33D3B40","previous_guid":null,"previous_id":"0","last_modified":"1502718700","components":[{"component_id":"977234","previous_id":0,"original_id":"0","guid":"95F6241C98A947A4B061C804DBEFBBBC","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"145632","previous_id":"977234","original_id":"0","guid":"286F9F90C28E45BCBCC8DAC0D4CD141D","previous_guid":"95F6241C98A947A4B061C804DBEFBBBC","component_type_id":"1","data_id":"0","data":"Log into to iPlant\/CyVerse (http:\/\/www.cyverse.org\/, http:\/\/de.iplantcollaborative.org) Discovery Environment.","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Log into to iPlant\/CyVerse (http:\/\/www.cyverse.org\/, http:\/\/de.iplantcollaborative.org) Discovery Environment."},"is_project":0}]},{"id":"140228","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"45458FD1CB8D4A6786D285240E8FD4C6","previous_guid":"48B820E04B184594BF2233F3A33D3B40","previous_id":"140227","last_modified":"1502718700","components":[{"component_id":"977235","previous_id":0,"original_id":"0","guid":"D6D7FB339C4A4C00ADE70BE0144B10CE","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"145633","previous_id":"977235","original_id":"0","guid":"266502EDBBA74A12BD364613F8CEC4DE","previous_guid":"D6D7FB339C4A4C00ADE70BE0144B10CE","component_type_id":"1","data_id":"0","data":"Upload FASTA-formatted sequence files and a tab-delimited file of metadata. \u00a0Example data can be found in the Data Store at \"\/iplant\/home\/shared\/imicrobe\/fizkin\/pov.\" \u00a0To view in the Discovery Environment:<br \/>\n<ul>\n<li>Click on the \"Data\" button in the DE<\/li>\n<li>Go\u00a0to the \"Community Data -&gt; imicrobe -&gt; fizkin\u00a0-&gt; pov -&gt; fasta\" directory<\/li>\n<\/ul>\n<img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/b78i6d.png\" alt=\"\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/b77i6d.png\" data-ofn=\"Screen Shot 2016-01-25 at 10.03.10 AM.png\" \/><br \/><br \/>A sample metadata file is also included (\"meta.tab\"). \u00a0The headers of the metadata file should include the 'name' of the file and fields ending in '.d' for 'discrete' value (e.g., 'Male' or 'Female'), '.c' for 'continuuous' data (e.g., numbers in a range), or '.ll' for 'latitude\/longitude' data. \u00a0Field names should not include underscores with the exception of 'lat_long.ll.' \u00a0<br \/><br \/>Here is an example table:<br \/><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/b6ei6d.png\" alt=\"\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/b6di6d.png\" data-ofn=\"Screen Shot 2016-01-14 at 10.54.46 AM.png\" \/>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Upload FASTA-formatted sequence files and a tab-delimited file of metadata. \u00a0Example data can be found in the Data Store at \"\/iplant\/home\/shared\/imicrobe\/fizkin\/pov.\" \u00a0To view in the Discovery Environment:<br \/>\n<ul>\n<li>Click on the \"Data\" button in the DE<\/li>\n<li>Go\u00a0to the \"Community Data -&gt; imicrobe -&gt; fizkin\u00a0-&gt; pov -&gt; fasta\" directory<\/li>\n<\/ul>\n<img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/b78i6d.png\" alt=\"\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/b77i6d.png\" data-ofn=\"Screen Shot 2016-01-25 at 10.03.10 AM.png\" \/><br \/><br \/>A sample metadata file is also included (\"meta.tab\"). \u00a0The headers of the metadata file should include the 'name' of the file and fields ending in '.d' for 'discrete' value (e.g., 'Male' or 'Female'), '.c' for 'continuuous' data (e.g., numbers in a range), or '.ll' for 'latitude\/longitude' data. \u00a0Field names should not include underscores with the exception of 'lat_long.ll.' \u00a0<br \/><br \/>Here is an example table:<br \/><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/b6ei6d.png\" alt=\"\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/b6di6d.png\" data-ofn=\"Screen Shot 2016-01-14 at 10.54.46 AM.png\" \/>"},"is_project":0}]},{"id":"140229","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"DF419840DFB64370B0921D1592F81A4F","previous_guid":"45458FD1CB8D4A6786D285240E8FD4C6","previous_id":"140228","last_modified":"1502718700","components":[{"component_id":"977236","previous_id":0,"original_id":"0","guid":"6FF29BA52EE8498C91EF96A74135F4C5","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"145634","previous_id":"977236","original_id":"0","guid":"62433A40E0274E83B38B076114E37DC0","previous_guid":"6FF29BA52EE8498C91EF96A74135F4C5","component_type_id":"1","data_id":"0","data":"Select the \"Apps\" button on the left, then look under \"Public Apps -&gt; Experimental -&gt; iMicrobe -&gt; Fizkin.\" \u00a0Open the \"Required Args\" section and select your FASTA directory as the \"Input directory.\" \u00a0You can leave \"Output directory\" alone or change it if you wish. \u00a0Use the file selector to find your \"Metadata file\" described in step 2.<br \/><br \/><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/b58i6d.png\" alt=\"\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/b57i6d.png\" data-ofn=\"Screen Shot 2016-01-14 at 10.39.48 AM.png\" \/><br \/><br \/>Optional args:<br \/>\n<ul>\n<li>K-mer size: Default is 20. \u00a0Values between 16 and 31 are best.<\/li>\n<li>Mode minimum: Default is 1. \u00a0Increase to require more stringent matching.<\/li>\n<li>Max. num. sequences: Default is 300K. \u00a0Use a lower value to reduce runtime. \u00a0Use a higher value to get deeper coverage. \u00a0Samples containing more than this parameter will be randomly sampled.<\/li>\n<li>Max. num. samples: Default is 15. \u00a0Keep in mind that Fizkin runs a pair-wise analysis, so runtime is O(n^2). \u00a0If your number of samples is greater than this argument, the samples will be randomly selected.<\/li>\n<li>Files list: The subset of files you wish to run, one file on each line<\/li>\n<\/ul>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Select the \"Apps\" button on the left, then look under \"Public Apps -&gt; Experimental -&gt; iMicrobe -&gt; Fizkin.\" \u00a0Open the \"Required Args\" section and select your FASTA directory as the \"Input directory.\" \u00a0You can leave \"Output directory\" alone or change it if you wish. \u00a0Use the file selector to find your \"Metadata file\" described in step 2.<br \/><br \/><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/b58i6d.png\" alt=\"\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/b57i6d.png\" data-ofn=\"Screen Shot 2016-01-14 at 10.39.48 AM.png\" \/><br \/><br \/>Optional args:<br \/>\n<ul>\n<li>K-mer size: Default is 20. \u00a0Values between 16 and 31 are best.<\/li>\n<li>Mode minimum: Default is 1. \u00a0Increase to require more stringent matching.<\/li>\n<li>Max. num. sequences: Default is 300K. \u00a0Use a lower value to reduce runtime. \u00a0Use a higher value to get deeper coverage. \u00a0Samples containing more than this parameter will be randomly sampled.<\/li>\n<li>Max. num. samples: Default is 15. \u00a0Keep in mind that Fizkin runs a pair-wise analysis, so runtime is O(n^2). \u00a0If your number of samples is greater than this argument, the samples will be randomly selected.<\/li>\n<li>Files list: The subset of files you wish to run, one file on each line<\/li>\n<\/ul>"},"is_project":0}]},{"id":"140395","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"798BEE7D39064ED69E8DF7B825247653","previous_guid":"DF419840DFB64370B0921D1592F81A4F","previous_id":"140229","last_modified":"1502718700","components":[{"component_id":"977238","previous_id":0,"original_id":"0","guid":"34475A0BEECA4730A3AFFB3F3D64DB31","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"145954","previous_id":"977238","original_id":"0","guid":"FA13F3A6F80546D887B540A4082FD522","previous_guid":"34475A0BEECA4730A3AFFB3F3D64DB31","component_type_id":"1","data_id":"0","data":"Press \"Launch analysis\" and wait for notification of the completion of your job.","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Press \"Launch analysis\" and wait for notification of the completion of your job."},"is_project":0}]},{"id":"140396","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"730EC3542CFF4A05A9D4D06CEEF5B7FC","previous_guid":"798BEE7D39064ED69E8DF7B825247653","previous_id":"140395","last_modified":"1502718700","components":[{"component_id":"977239","previous_id":0,"original_id":"0","guid":"9E69388B3477481498C5EC2FA142A94C","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"145955","previous_id":"977239","original_id":"0","guid":"B97DA261A219426C8EB267CF816C06B8","previous_guid":"9E69388B3477481498C5EC2FA142A94C","component_type_id":"1","data_id":"0","data":"Common failures include something like this from R (GBME):<br \/><br \/>Error in summary(fit1)$cov.unscaled[(2 * n):length(fit1$coef), (2 * n):length(fit1$coef)] : <br \/> subscript out of bounds<br \/>Calls: gbme -&gt; gbme.glmstart -&gt; as.matrix<br \/>Execution halted<br \/><br \/>This is usually due to the metadata being too homogenous or entirely heterogenous. \u00a0Remove any offending\u00a0metadata and try again.","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Common failures include something like this from R (GBME):<br \/><br \/>Error in summary(fit1)$cov.unscaled[(2 * n):length(fit1$coef), (2 * n):length(fit1$coef)] : <br \/> subscript out of bounds<br \/>Calls: gbme -&gt; gbme.glmstart -&gt; as.matrix<br \/>Execution halted<br \/><br \/>This is usually due to the metadata being too homogenous or entirely heterogenous. \u00a0Remove any offending\u00a0metadata and try again."},"is_project":0}]},{"id":"140397","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"AA8D014C2F9841D7AF4CD4155661B883","previous_guid":"730EC3542CFF4A05A9D4D06CEEF5B7FC","previous_id":"140396","last_modified":"1502718700","components":[{"component_id":"977240","previous_id":0,"original_id":"0","guid":"7A865A1C5F504B3CBC3835F56B17B656","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"145956","previous_id":"977240","original_id":"0","guid":"70100088A8734BEF83384AF999586060","previous_guid":"7A865A1C5F504B3CBC3835F56B17B656","component_type_id":"1","data_id":"0","data":"The ultimate result should be a social network graph showing the grouping of samples similar to\u00a0this:<br \/><br \/><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/b8ai6d.png\" alt=\"\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/b79i6d.png\" data-ofn=\"plot3 (2).png\" \/>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"The ultimate result should be a social network graph showing the grouping of samples similar to\u00a0this:<br \/><br \/><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/b8ai6d.png\" alt=\"\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/b79i6d.png\" data-ofn=\"plot3 (2).png\" \/>"},"is_project":0}]}]}