{"uri":"mg-hw7-taxonomic-classification-using-centrifuge-f7vbrn6","version_id":"2","protocol_name":"MG_HW7: Taxonomic Classification Using Centrifuge","protocol_name_html":"MG_HW7: Taxonomic Classification Using Centrifuge","is_prepublished":"0","can_edit":"0","parent_id":"4045","api_version":"2","is_new_mode":"1","last_modified":"1522217461","type_id":"1","link":"","fork_id":"","public_fork_note":"","number_of_steps":"18","has_versions":"1","first_published_date":"1477509301","publish_date":"2016-10-26 19:15:01","documents":null,"have_protocol_in_step":"0","is_protocol_in_step":"0","vendor_name":"Contributed by users","vendor_link":"https:\/\/www.protocols.io","vendor_logo":"\/img\/vendors\/1.png","mod_mins":"-45","mod_secs":"1","description":"<p>This protocol provides a procedure to generate taxonomic data from assembled contigs using centrifuge.\u00a0<\/p>","is_bookmarked":"0","can_reassign":"1","before_start":"","has_guidelines":"1","materials":[],"warning":"","version_class":"4045","public":"1","is_owner":"1","is_original_owner":"1","created_on":"1477508916","protocol_affiliation":"Hurwitz Lab","affiliation":"Hurwitz Lab ","doi":"dx.doi.org\/10.17504\/protocols.io.f7vbrn6","doi_status":"2","changed_fork_steps":null,"profile_url":"James-w2u264z2w2","protocol_img":"https:\/\/s3.amazonaws.com\/pr-journal\/fpsc2w6.jpeg","profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/67c2w6.jpg","full_name":"James Thornton Jr","created_by":"James Thornton Jr","private_link":null,"original_img":"1","username":"james-thornton-jr","is_retracted":"0","retraction_reason":null,"plos_id":null,"manuscript_citation":null,"journal_name":null,"is_donations_disabled":"0","is_donations_disabled_by_user":"9","item_record_id":219760,"fork_info":[],"compare_forks":[],"protocols":[],"groups":[{"group_id":"52","group_uri":"hurwitz-lab","group_name":"Hurwitz Lab","group_logo":"https:\/\/s3.amazonaws.com\/pr-journal\/iscwwe.png","requested_uid":null,"request_flag":null,"my_request":"1"},{"group_id":"224","group_uri":"metafunc-course","group_name":"MetaFunc Course","group_logo":"https:\/\/s3.amazonaws.com\/pr-journal\/emybvtw.jpg","requested_uid":null,"request_flag":null,"my_request":"1"}],"number_of_shared_runs":[],"ownership_history":[],"keywords":"","transfer_to_user":[],"sub_transfer":false,"is_transfer_pending":false,"number_of_bookmarks":"0","collections":[],"tags":[],"archived":0,"sub_authors":[],"sub_protocols_number":0,"can_edit_shared":0,"shared_runs":[],"is_shared_run":0,"is_shared":1,"banner":null,"contact_badges":[{"badge_id":"1","badge_image":"\/img\/ambassador.svg","badge_description":"Ambassador"},{"badge_id":"4","badge_image":"\/img\/badges\/gold.svg","badge_description":"Gold power author!"},{"badge_id":"5","badge_image":"\/img\/badges\/earlyadopter.svg","badge_description":"Early adopter"},{"badge_id":"6","badge_image":"\/img\/badges\/socialbutterfly.svg","badge_description":"Social butterfly"}],"number_of_comments":0,"big_protocol_img":"https:\/\/s3.amazonaws.com\/pr-journal\/fprc2w6.jpeg","big_protocol_img_ofn":"centrifuge_protocol_img.jpeg","is_locked":0,"is_locked_by":false,"authors":"James Thornton","authors_list":[{"name":"James Thornton","affiliation":"Hurwitz Lab","username":null,"profile_image":null}],"user":{"profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/67c2w6.jpg","username":"james-thornton-jr","full_name":"James Thornton Jr","created_by":"James Thornton Jr"},"access":{"can_view":"1","can_remove":"0","can_add":"0","can_edit":0,"can_publish":0,"can_get_doi":0,"can_share":"0","can_move":"1","can_transfer":"1","can_download":"1","is_locked":"0"},"is_contact_suspended":0,"guidelines":"<p><a href=\"http:\/\/www.ccb.jhu.edu\/software\/centrifuge\/manual.shtml\" target=\"_blank\">Centrifuge documentation<\/a><\/p>","status_id":"1","is_research":"1","status_info":null,"steps":[{"id":"187750","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"2C8FB1BB2ED34482BCF986CBD97D2467","previous_guid":null,"previous_id":"0","last_modified":"1502718954","components":[{"component_id":"987371","previous_id":0,"original_id":"0","guid":"4B36F6E96E574B2E8B7A97C6C5BBA0F7","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227666","previous_id":"987371","original_id":"0","guid":"31C1967553544C7B9CB4237D95A3048E","previous_guid":"4B36F6E96E574B2E8B7A97C6C5BBA0F7","component_type_id":"1","data_id":"0","data":"<p>Log in to the HPC cluster (ICE)<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Log in to the HPC cluster (ICE)<\/p>"},"is_project":0},{"component_id":"227668","previous_id":"227666","original_id":"0","guid":"BA6B1D4D34F844AA9CFA519E5A95B876","previous_guid":"31C1967553544C7B9CB4237D95A3048E","component_type_id":"26","data_id":"13220","data":"","order_id":"2","name":"Note","data_by_id":"1","type_id":"26","source_data":{"annotation_id":"13220","thread_id":"13220","id":"13220","thread_title":"Annotation on step 1 of MG_HW7: Taxonomic Classification Using Centrifuge","uri":"annotation-on-step-1-of-mghw7-taxonomic-classification2","thread_uri":"annotation-on-step-1-of-mghw7-taxonomic-classification2","step_id":"187750","protocol_uri":"mg-hw7-taxonomic-classification-using-centrifuge-f7vbrn6","protocol_name":"MG_HW7: Taxonomic Classification Using Centrifuge","protocol_name_html":"MG_HW7: Taxonomic Classification Using Centrifuge","annotation":"<p>Option 3 for those with menu enabled.\u00a0<\/p>","thread_text":"<p>Option 3 for those with menu enabled.\u00a0<\/p>","body":"<p>Option 3 for those with menu enabled.\u00a0<\/p>","is_private":"0","public_protocol":"1","can_edit":0,"can_delete":"0","show_name":"0","created_date":"1477508916","created_on":"1477508916","modified_on":null,"last_updated":null,"profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/67c2w6.jpg","full_name":"James Thornton Jr","affiliation":"Hurwitz Lab ","username":"james-thornton-jr","email":"jamesthornton@email.arizona.edu","pa_useranme":"james-thornton-jr","comments":[]},"is_project":0},{"component_id":"227667","previous_id":"227668","original_id":"0","guid":"07A496A416184C80941931F3D78295F9","previous_guid":"BA6B1D4D34F844AA9CFA519E5A95B876","component_type_id":"15","data_id":"1351","data":null,"order_id":"3","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ ssh hpc\n$ ice","description":"","os_name":"","os_version":"","can_edit":"1"},"is_project":0}]},{"id":"187751","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"039B3F93DF47457E9B88A7A8EAFA8236","previous_guid":"2C8FB1BB2ED34482BCF986CBD97D2467","previous_id":"187750","last_modified":"1502718954","components":[{"component_id":"987372","previous_id":0,"original_id":"0","guid":"7900515518B348138F5615038B697B65","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227669","previous_id":"987372","original_id":"0","guid":"2F96D70206AA4E478B643A8CECC4D715","previous_guid":"7900515518B348138F5615038B697B65","component_type_id":"1","data_id":"0","data":"<p>Move into your class directory.\u00a0<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Move into your class directory.\u00a0<\/p>"},"is_project":0},{"component_id":"227670","previous_id":"227669","original_id":"0","guid":"53F8079420E649B3B422BA3BF8A1BB8E","previous_guid":"2F96D70206AA4E478B643A8CECC4D715","component_type_id":"15","data_id":"1352","data":"","order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ cd \/rsgrps\/bh_class\/username","description":"Use YOUR username","os_name":"","os_version":"","can_edit":"1"},"is_project":0}]},{"id":"187752","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"D8C7670FA5634F34A20815BE47130DC0","previous_guid":"039B3F93DF47457E9B88A7A8EAFA8236","previous_id":"187751","last_modified":"1502718954","components":[{"component_id":"987373","previous_id":0,"original_id":"0","guid":"9C084F7DE46D4AE4B75E6DE3A250EB51","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227671","previous_id":"987373","original_id":"0","guid":"6DBC05CD6AF54179AE0B5E1D638BAF7D","previous_guid":"9C084F7DE46D4AE4B75E6DE3A250EB51","component_type_id":"1","data_id":"0","data":"<p>Make a new directory called \"taxonomy\"<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Make a new directory called \"taxonomy\"<\/p>"},"is_project":0},{"component_id":"227672","previous_id":"227671","original_id":"0","guid":"136728B867EB4BE981840C5A1D227DF6","previous_guid":"6DBC05CD6AF54179AE0B5E1D638BAF7D","component_type_id":"15","data_id":"1362","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ mkdir taxonomy\n$ mkdir unmapped","description":"","os_name":"","os_version":"","can_edit":"1"},"is_project":0}]},{"id":"187753","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"AA1CA80A560F467398CE3DD22821EF06","previous_guid":"D8C7670FA5634F34A20815BE47130DC0","previous_id":"187752","last_modified":"1502718954","components":[{"component_id":"987374","previous_id":0,"original_id":"0","guid":"F08C73C778314920B8CC319C901B4F97","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227673","previous_id":"987374","original_id":"0","guid":"66148BCE20F7406A8553AD0D953D35E5","previous_guid":"F08C73C778314920B8CC319C901B4F97","component_type_id":"1","data_id":"0","data":"<p>Copy the following into a new script named centrifuge_tax.sh:<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Copy the following into a new script named centrifuge_tax.sh:<\/p>"},"is_project":0},{"component_id":"227675","previous_id":"227673","original_id":"0","guid":"490323EBCC95498CAC96D6EB67C589EC","previous_guid":"66148BCE20F7406A8553AD0D953D35E5","component_type_id":"26","data_id":"13221","data":"","order_id":"2","name":"Note","data_by_id":"1","type_id":"26","source_data":{"annotation_id":"13221","thread_id":"13221","id":"13221","thread_title":"Annotation on step 4 of MG_HW7: Taxonomic Classification Using Centrifuge","uri":"annotation-on-step-4-of-mghw7-taxonomic-classification","thread_uri":"annotation-on-step-4-of-mghw7-taxonomic-classification","step_id":"187753","protocol_uri":"mg-hw7-taxonomic-classification-using-centrifuge-f7vbrn6","protocol_name":"MG_HW7: Taxonomic Classification Using Centrifuge","protocol_name_html":"MG_HW7: Taxonomic Classification Using Centrifuge","annotation":"<p>Important: For this to work you Fasta files must end with the extension .fasta<\/p>","thread_text":"<p>Important: For this to work you Fasta files must end with the extension .fasta<\/p>","body":"<p>Important: For this to work you Fasta files must end with the extension .fasta<\/p>","is_private":"0","public_protocol":"1","can_edit":0,"can_delete":"0","show_name":"0","created_date":"1477508917","created_on":"1477508917","modified_on":null,"last_updated":null,"profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/67c2w6.jpg","full_name":"James Thornton Jr","affiliation":"Hurwitz Lab ","username":"james-thornton-jr","email":"jamesthornton@email.arizona.edu","pa_useranme":"james-thornton-jr","comments":[]},"is_project":0},{"component_id":"227674","previous_id":"227675","original_id":"0","guid":"42C1CAE1D0C341F1AAC8536A7267E105","previous_guid":"490323EBCC95498CAC96D6EB67C589EC","component_type_id":"15","data_id":"1354","data":null,"order_id":"3","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"#!\/bin\/bash\n\n#PBS -W group_list=bh_class\n#PBS -q windfall\n#PBS -l jobtype=cluster_only\n#PBS -l select=1:ncpus=12:mem=23gb\n#PBS -l pvmem=22gb\n#PBS -l walltime=24:00:00\n#PBS -l cput=24:00:00\n#PBS -M netid@email.arizona.edu\n#PBS -m bea\n\n#--------------EDIT THESE---------------\nFASTA_DIR=\"\/rsgrps\/bh_class\/username\/fasta\"\nOUT_DIR=\"\/rsgrps\/bh_class\/username\/taxonomy\"\nBT2_OUT_DIR=\"\/rsgrps\/bh_class\/username\/unmapped\"\n#---------------------------------------\n\nCENT_DB=\"\/rsgrps\/bh_class\/b_compressed+h+v\/b_compressed+h+v\"\nBT2_INDEX=\"\/rsgrps\/bh_class\/bowtie2_index\/human_index\"\n\ncd \"$FASTA_DIR\"\nexport FASTA_LIST=\"$FASTA_DIR\/fasta-list\"\nls *.fasta > $FASTA_LIST\necho \"FASTA files to be processed:\" $(cat $FASTA_LIST)\n\nmodule load bowtie2\/2.2.5\nwhile read FASTA; do\n  export FASTA=\"$FASTA\"\n  export FILE_NAME=`basename $FASTA | cut -d '.' -f 1`\n  bowtie2 -x $BT2_INDEX -U $FASTA -f --very-sensitive-local -p 4 --un $BT2_OUT_DIR\/$FILE_NAME.unmapped\n\ndone < $FASTA_LIST\n\ncd \"$BT2_OUT_DIR\"\nexport UNMAPPED_LIST=\"$BT2_OUT_DIR\/unmapped-list\"\nls *.unmapped > $UNMAPPED_LIST\necho \"Running Centrifuge on the following files:\" $(cat $UNMAPPED_LIST)\n\nwhile read UNMAPPED; do\n  export UNMAPPED=\"$UNMAPPED\"\n  export UNMAPPED_NAME=$(basename $UNMAPPED | cut -d '.' -f 1)\n  centrifuge -x $CENT_DB -U $UNMAPPED -S $OUT_DIR\/$UNMAPPED_NAME-classout --report-file $OUT_DIR\/$UNMAPPED_NAME-centrifuge_report.tsv -f\ndone < $UNMAPPED_LIST","description":"As indicated in the script, edit the FASTA_DIR and OUT_DIR to include the path to YOUR Fasta files and the taxonomy directory created in the previous step. \n\nRemember to replace netid with YOUR netid to receive email notifications","os_name":"","os_version":"","can_edit":"1"},"is_project":0}]},{"id":"187754","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"F5045CA63B364C4788550861769DA210","previous_guid":"AA1CA80A560F467398CE3DD22821EF06","previous_id":"187753","last_modified":"1502718954","components":[{"component_id":"987375","previous_id":0,"original_id":"0","guid":"334C06E1AAA048A0AB7608BD65A720E7","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227676","previous_id":"987375","original_id":"0","guid":"43738478F0844BFFB2555A18D9DF0193","previous_guid":"334C06E1AAA048A0AB7608BD65A720E7","component_type_id":"1","data_id":"0","data":"<p>Submit centrifuge_tax.sh\u00a0using qsub:<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Submit centrifuge_tax.sh\u00a0using qsub:<\/p>"},"is_project":0},{"component_id":"227677","previous_id":"227676","original_id":"0","guid":"5A007346B4834B219F69416CE7783D3D","previous_guid":"43738478F0844BFFB2555A18D9DF0193","component_type_id":"15","data_id":"1355","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ qsub -e std-err\/ -o std-out\/ centrifuge_tax.sh","description":"","os_name":"","os_version":"","can_edit":"1"},"is_project":0}]},{"id":"187755","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"202AD7C7712D415E8C5E4CC78164286C","previous_guid":"F5045CA63B364C4788550861769DA210","previous_id":"187754","last_modified":"1502718954","components":[{"component_id":"987376","previous_id":0,"original_id":"0","guid":"E1DC8CE111544433BE3A60B7529723FC","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227678","previous_id":"987376","original_id":"0","guid":"E6EC97E00A484887B5476D7C6C1BD4E9","previous_guid":"E1DC8CE111544433BE3A60B7529723FC","component_type_id":"1","data_id":"0","data":"<p>Once the job is running it will loop through all of your Fasta files and run centrifuge to generate taxonomic data. This will take about 1 hour to generate reports for all 6 of your fasta files. You can use qstat to check the status of your job.\u00a0<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Once the job is running it will loop through all of your Fasta files and run centrifuge to generate taxonomic data. This will take about 1 hour to generate reports for all 6 of your fasta files. You can use qstat to check the status of your job.\u00a0<\/p>"},"is_project":0},{"component_id":"227679","previous_id":"227678","original_id":"0","guid":"212FC8C7532D4F87BB9EB522DFB68A38","previous_guid":"E6EC97E00A484887B5476D7C6C1BD4E9","component_type_id":"15","data_id":"1356","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ qstat -u username","description":"Use YOUR username\nUnder S (Status) 'Q' means queued, 'R' means running","os_name":"","os_version":"","can_edit":"1"},"is_project":0}]},{"id":"187756","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"2343604C091842A1B4061E5930DE6CB0","previous_guid":"202AD7C7712D415E8C5E4CC78164286C","previous_id":"187755","last_modified":"1502718954","components":[{"component_id":"987377","previous_id":0,"original_id":"0","guid":"BFAF3975A03843AA83D4B444E9B71983","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227680","previous_id":"987377","original_id":"0","guid":"2EF30BDD31B74F59BC5D02B910A70EDD","previous_guid":"BFAF3975A03843AA83D4B444E9B71983","component_type_id":"1","data_id":"0","data":"<p>Once the job is complete move into your taxonomy directory and ensure all output files are there. If the job was successful there should be a total of 6 \"classout\" files and 6 \"centrifuge_report.tsv\" files.\u00a0<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Once the job is complete move into your taxonomy directory and ensure all output files are there. If the job was successful there should be a total of 6 \"classout\" files and 6 \"centrifuge_report.tsv\" files.\u00a0<\/p>"},"is_project":0},{"component_id":"227681","previous_id":"227680","original_id":"0","guid":"B847DF0DEA894FCFA84F6482245C2ECE","previous_guid":"2EF30BDD31B74F59BC5D02B910A70EDD","component_type_id":"15","data_id":"1353","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ cd taxonomy\n$ ls","description":"","os_name":"","os_version":"","can_edit":"1"},"is_project":0},{"component_id":"227682","previous_id":"227681","original_id":"0","guid":"87CBD0C675D6421EB35E93251E088404","previous_guid":"B847DF0DEA894FCFA84F6482245C2ECE","component_type_id":"17","data_id":"391","data":"<p><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/fqbc2w6.png\" width=\"400\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/fqac2w6.png\" data-ofn=\"Screen Shot 2016-10-26 at 9.05.02 AM.png\" \/><\/p>","order_id":"3","name":"Expected result","data_by_id":"1","type_id":"17","source_data":{"result":"<p><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/fqbc2w6.png\" width=\"400\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/fqac2w6.png\" data-ofn=\"Screen Shot 2016-10-26 at 9.05.02 AM.png\" \/><\/p>"},"is_project":0}]},{"id":"187757","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"3298E69BD54448B4B10D12B4D093CE1B","previous_guid":"2343604C091842A1B4061E5930DE6CB0","previous_id":"187756","last_modified":"1502718954","components":[{"component_id":"987378","previous_id":0,"original_id":"0","guid":"54673B0F2B1E4B5898D02EF2C4499583","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227683","previous_id":"987378","original_id":"0","guid":"A2C63AAEC412485894A7EA27C81A578E","previous_guid":"54673B0F2B1E4B5898D02EF2C4499583","component_type_id":"1","data_id":"0","data":"<p>In your taxonomy directory make a new directory called barplots<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>In your taxonomy directory make a new directory called barplots<\/p>"},"is_project":0},{"component_id":"227684","previous_id":"227683","original_id":"0","guid":"F2EA0A4D9D864A3AA828907954FC8936","previous_guid":"A2C63AAEC412485894A7EA27C81A578E","component_type_id":"15","data_id":"1363","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ mkdir barplots","description":"Make sure you are in \/rsgrps\/bh_class\/username\/taxonomy for this to work correctly","os_name":"","os_version":"","can_edit":"1"},"is_project":0},{"component_id":"227685","previous_id":"227684","original_id":"0","guid":"3E62ADB5A271472A81D389F096664D76","previous_guid":"F2EA0A4D9D864A3AA828907954FC8936","component_type_id":"17","data_id":"392","data":"<p><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/fqdc2w6.png\" width=\"400\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/fqcc2w6.png\" data-ofn=\"Screen Shot 2016-10-26 at 9.22.03 AM.png\" \/><\/p>","order_id":"3","name":"Expected result","data_by_id":"1","type_id":"17","source_data":{"result":"<p><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/fqdc2w6.png\" width=\"400\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/fqcc2w6.png\" data-ofn=\"Screen Shot 2016-10-26 at 9.22.03 AM.png\" \/><\/p>"},"is_project":0}]},{"id":"187758","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"48024217F21E4C8392260F99AB09CCC1","previous_guid":"3298E69BD54448B4B10D12B4D093CE1B","previous_id":"187757","last_modified":"1502718954","components":[{"component_id":"987379","previous_id":0,"original_id":"0","guid":"834AAB2A25A74F7783B41A8D6252D4EE","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227686","previous_id":"987379","original_id":"0","guid":"00919506374D46608296AE0D3C3549E6","previous_guid":"834AAB2A25A74F7783B41A8D6252D4EE","component_type_id":"1","data_id":"0","data":"<p>Copy + Paste the following into\u00a0a script called cent_barplots.R<\/p>\n<p>\u00a0<\/p>\n<p><strong>Important: <\/strong>Edit cent.dir and out.dir to include the correct paths<\/p>\n<ul>\n<li>Edit cent.dir to include the path to your taxonomy directory (\/rsgrps\/bh_class\/username\/taxonomy\/)<\/li>\n<li>Edit out.dir to include the path to your barplots diretory (\/rsgrps\/bh_class\/username\/taxonomy\/barplots\/)<\/li>\n<\/ul>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Copy + Paste the following into\u00a0a script called cent_barplots.R<\/p>\n<p>\u00a0<\/p>\n<p><strong>Important: <\/strong>Edit cent.dir and out.dir to include the correct paths<\/p>\n<ul>\n<li>Edit cent.dir to include the path to your taxonomy directory (\/rsgrps\/bh_class\/username\/taxonomy\/)<\/li>\n<li>Edit out.dir to include the path to your barplots diretory (\/rsgrps\/bh_class\/username\/taxonomy\/barplots\/)<\/li>\n<\/ul>"},"is_project":0},{"component_id":"227688","previous_id":"227686","original_id":"0","guid":"742A02469AD44720AE7F15CE72DC5BA4","previous_guid":"00919506374D46608296AE0D3C3549E6","component_type_id":"26","data_id":"13222","data":"","order_id":"2","name":"Note","data_by_id":"1","type_id":"26","source_data":{"annotation_id":"13222","thread_id":"13222","id":"13222","thread_title":"Annotation on step 9 of MG_HW7: Taxonomic Classification Using Centrifuge","uri":"annotation-on-step-9-of-mghw7-taxonomic-classification1","thread_uri":"annotation-on-step-9-of-mghw7-taxonomic-classification1","step_id":"187758","protocol_uri":"mg-hw7-taxonomic-classification-using-centrifuge-f7vbrn6","protocol_name":"MG_HW7: Taxonomic Classification Using Centrifuge","protocol_name_html":"MG_HW7: Taxonomic Classification Using Centrifuge","annotation":"<p>This R script will calculate the total number of reads and then divide the classified reads by the total for each hit generating a proportion classified statistic. Only hits with a proportion of 0.5% of reads classified will be plotted.\u00a0<\/p>","thread_text":"<p>This R script will calculate the total number of reads and then divide the classified reads by the total for each hit generating a proportion classified statistic. Only hits with a proportion of 0.5% of reads classified will be plotted.\u00a0<\/p>","body":"<p>This R script will calculate the total number of reads and then divide the classified reads by the total for each hit generating a proportion classified statistic. Only hits with a proportion of 0.5% of reads classified will be plotted.\u00a0<\/p>","is_private":"0","public_protocol":"1","can_edit":0,"can_delete":"0","show_name":"0","created_date":"1477508917","created_on":"1477508917","modified_on":null,"last_updated":null,"profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/67c2w6.jpg","full_name":"James Thornton Jr","affiliation":"Hurwitz Lab ","username":"james-thornton-jr","email":"jamesthornton@email.arizona.edu","pa_useranme":"james-thornton-jr","comments":[]},"is_project":0},{"component_id":"227687","previous_id":"227688","original_id":"0","guid":"59757465827149B1A2128CED15078E0D","previous_guid":"742A02469AD44720AE7F15CE72DC5BA4","component_type_id":"15","data_id":"1359","data":null,"order_id":"3","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"#!\/usr\/bin\/env Rscript\n\n#----------EDIT HERE----------\ncent.dir <- \"\/rsgrps\/bh_class\/username\/taxonomy\/\"\nout.dir <- \"\/rsgrps\/bh_class\/username\/taxonomy\/barplots\/\"\n#--------------------------------\n\nfile.names <- dir(cent.dir, pattern=\"-centrifuge_report.tsv\")\n\ngen_barplot <- function (data) {\n  data_title <- gsub(\"-centrifuge_report.tsv\", \"\", data)\n  data <- read.delim(paste0(i, data))\n  total_reads <- sum(data$numReads)\n  proportion_classified <- data$numReads \/ total_reads\n  data[\"proportion_classified\"] <- proportion_classified\n  read_subset <- subset(data, proportion_classified > 0.005, select = c(\"name\", \"numReads\", \"proportion_classified\"))\n  read_subset$numReads <- as.numeric(read_subset$numReads)\n  png(filename=paste0(out.dir,data_title,\"_taxonomy.png\"), width = 600, height = 600)\n  op <- par(mar=c(15, 8, 4, 2) + 0.1, mgp = c(10, 1, 0))\n  p1 <- barplot(read_subset$proportion_classified, main=paste0(\"Read Proportional Classification: \",data_title), names.arg = read_subset$name, las=2, cex.names = 1, cex.axis = 1, ylab=\"Proportion Classified\", ylim = c(0, 0.90))\n  grid(nx=NA, ny=NULL)\n  print(p1)\n  dev.off()\n}\n\nfor (i in cent.dir) {\n  lapply(file.names, gen_barplot)\n}","description":"Make sure to edit username in cent.dir and out.dir to include YOUR path. \nAlso ensure that both cent.dir and out.dir end with the slash","os_name":"","os_version":"","can_edit":"1"},"is_project":0}]},{"id":"187759","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"001C6CE8D74742948F8FAFC9ECF4D04B","previous_guid":"48024217F21E4C8392260F99AB09CCC1","previous_id":"187758","last_modified":"1502718954","components":[{"component_id":"987380","previous_id":0,"original_id":"0","guid":"4D05186E81014EA891507003E92F1B23","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227690","previous_id":"987380","original_id":"0","guid":"5C9B6A4EB8804AAF91AE168640961EE4","previous_guid":"4D05186E81014EA891507003E92F1B23","component_type_id":"1","data_id":"0","data":"<p>Once you have edited cent.dir and out.dir save and close the file. Make cent_barplots.R executable.\u00a0<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Once you have edited cent.dir and out.dir save and close the file. Make cent_barplots.R executable.\u00a0<\/p>"},"is_project":0},{"component_id":"227691","previous_id":"227690","original_id":"0","guid":"8AE51F60542D4B4B9588F205DA33854D","previous_guid":"5C9B6A4EB8804AAF91AE168640961EE4","component_type_id":"15","data_id":"1364","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ chmod +x cent_barplots.R","description":"","os_name":"","os_version":"","can_edit":"1"},"is_project":0}]},{"id":"187760","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"00DC6DD322BC4F84871B942F85148E90","previous_guid":"001C6CE8D74742948F8FAFC9ECF4D04B","previous_id":"187759","last_modified":"1502718954","components":[{"component_id":"987381","previous_id":0,"original_id":"0","guid":"87BC4965032747E5A179A465C6891599","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227693","previous_id":"987381","original_id":"0","guid":"3FF00F9B0C8B4EC5B6A1FD52637AA17E","previous_guid":"87BC4965032747E5A179A465C6891599","component_type_id":"1","data_id":"0","data":"<p>Load the module R:\u00a0<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Load the module R:\u00a0<\/p>"},"is_project":0},{"component_id":"227694","previous_id":"227693","original_id":"0","guid":"E33771DAA3254A9E8AF8D465D4EE168A","previous_guid":"3FF00F9B0C8B4EC5B6A1FD52637AA17E","component_type_id":"15","data_id":"1357","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ module load R","description":"","os_name":"","os_version":"","can_edit":"1"},"is_project":0}]},{"id":"187761","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"3753E7ECC34D4371BF187496D95198C3","previous_guid":"00DC6DD322BC4F84871B942F85148E90","previous_id":"187760","last_modified":"1502718954","components":[{"component_id":"987382","previous_id":0,"original_id":"0","guid":"66282BB75522466CB7DFA70289D2F9CC","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227695","previous_id":"987382","original_id":"0","guid":"2FB30684DB4F4F9C89C7CB9DFB077EC4","previous_guid":"66282BB75522466CB7DFA70289D2F9CC","component_type_id":"1","data_id":"0","data":"<p>Execute cent_barplots.R<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Execute cent_barplots.R<\/p>"},"is_project":0},{"component_id":"227696","previous_id":"227695","original_id":"0","guid":"68AEE99FE6444583916A47B1C0D29028","previous_guid":"2FB30684DB4F4F9C89C7CB9DFB077EC4","component_type_id":"15","data_id":"1358","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ .\/cent_barplots.R","description":"","os_name":"","os_version":"","can_edit":"1"},"is_project":0}]},{"id":"187763","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"3E048CA74CBA4788A3D7E362BA96AB1E","previous_guid":"3753E7ECC34D4371BF187496D95198C3","previous_id":"187761","last_modified":"1502718954","components":[{"component_id":"987383","previous_id":0,"original_id":"0","guid":"8EFB7E898D294533A88F71DEE7CFA218","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227700","previous_id":"987383","original_id":"0","guid":"B02F1888368C4FCE93CA53E6843F36D5","previous_guid":"8EFB7E898D294533A88F71DEE7CFA218","component_type_id":"1","data_id":"0","data":"<p>You should see something similar to what is shown below.\u00a0<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>You should see something similar to what is shown below.\u00a0<\/p>"},"is_project":0},{"component_id":"227701","previous_id":"227700","original_id":"0","guid":"DDFA16F4F1844A55A6064BD7FD645046","previous_guid":"B02F1888368C4FCE93CA53E6843F36D5","component_type_id":"17","data_id":"395","data":"<p><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/fqjc2w6.png\" width=\"400\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/fqic2w6.png\" data-ofn=\"Screen Shot 2016-10-26 at 9.43.53 AM.png\" \/><\/p>","order_id":"2","name":"Expected result","data_by_id":"1","type_id":"17","source_data":{"result":"<p><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/fqjc2w6.png\" width=\"400\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/fqic2w6.png\" data-ofn=\"Screen Shot 2016-10-26 at 9.43.53 AM.png\" \/><\/p>"},"is_project":0}]},{"id":"187765","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"0ED8FB685E9D402592012FC9800DE5D2","previous_guid":"3E048CA74CBA4788A3D7E362BA96AB1E","previous_id":"187763","last_modified":"1502718954","components":[{"component_id":"987384","previous_id":0,"original_id":"0","guid":"11E55C308BEB4238A413386408C4C4A2","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227704","previous_id":"987384","original_id":"0","guid":"E639858CCE3C4FC3B65E3CDCED8F4D5F","previous_guid":"11E55C308BEB4238A413386408C4C4A2","component_type_id":"1","data_id":"0","data":"<p>Move into your barplots directory and make sure you have 6 .png images.\u00a0<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Move into your barplots directory and make sure you have 6 .png images.\u00a0<\/p>"},"is_project":0},{"component_id":"227705","previous_id":"227704","original_id":"0","guid":"C256E66700B341FABB0D965696383D24","previous_guid":"E639858CCE3C4FC3B65E3CDCED8F4D5F","component_type_id":"15","data_id":"1365","data":"","order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ cd \/rsgrps\/bh_class\/username\/taxonomy\/barplots\n$ ls","description":"","os_name":"","os_version":"","can_edit":"1"},"is_project":0},{"component_id":"227706","previous_id":"227705","original_id":"0","guid":"A35B28E2F8714673830BD5C92E67329B","previous_guid":"C256E66700B341FABB0D965696383D24","component_type_id":"17","data_id":"396","data":"<p><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/fqmc2w6.png\" width=\"400\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/fqkc2w6.png\" data-ofn=\"Screen Shot 2016-10-26 at 9.46.25 AM.png\" \/><\/p>","order_id":"3","name":"Expected result","data_by_id":"1","type_id":"17","source_data":{"result":"<p><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/fqmc2w6.png\" width=\"400\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/fqkc2w6.png\" data-ofn=\"Screen Shot 2016-10-26 at 9.46.25 AM.png\" \/><\/p>"},"is_project":0}]},{"id":"187766","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"47A76BD139B841AAAC2649C23F8DDA2F","previous_guid":"0ED8FB685E9D402592012FC9800DE5D2","previous_id":"187765","last_modified":"1502718954","components":[{"component_id":"987385","previous_id":0,"original_id":"0","guid":"BAEF29F11663475394A4895A233C0BFA","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227707","previous_id":"987385","original_id":"0","guid":"AE83F99C09194A51938E4AD6668D4C13","previous_guid":"BAEF29F11663475394A4895A233C0BFA","component_type_id":"1","data_id":"0","data":"<p>To view the images you must scp to your local machine. Open a new terminal (don't log into hpc). Determine where you want to store the files on your local machine and move into that directory.\u00a0<\/p>\n<div class=\"step-content-block editable-content\">\n<p>\u00a0<\/p>\n<\/div>\n<div>\u00a0<\/div>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>To view the images you must scp to your local machine. Open a new terminal (don't log into hpc). Determine where you want to store the files on your local machine and move into that directory.\u00a0<\/p>\n<div class=\"step-content-block editable-content\">\n<p>\u00a0<\/p>\n<\/div>\n<div>\u00a0<\/div>"},"is_project":0},{"component_id":"227708","previous_id":"227707","original_id":"0","guid":"43A7BE3F89244511BF7326198F17430E","previous_guid":"AE83F99C09194A51938E4AD6668D4C13","component_type_id":"26","data_id":"13225","data":"","order_id":"2","name":"Note","data_by_id":"1","type_id":"26","source_data":{"annotation_id":"13225","thread_id":"13225","id":"13225","thread_title":"Annotation on step 17 of MG_HW7: Taxonomic Classification Using Centrifuge","uri":"annotation-on-step-17-of-mghw7-taxonomic-classification1","thread_uri":"annotation-on-step-17-of-mghw7-taxonomic-classification1","step_id":"187766","protocol_uri":"mg-hw7-taxonomic-classification-using-centrifuge-f7vbrn6","protocol_name":"MG_HW7: Taxonomic Classification Using Centrifuge","protocol_name_html":"MG_HW7: Taxonomic Classification Using Centrifuge","annotation":"<p>Windows users using Cygwin, your file will be stored in C:\/cygwin64\/home\/USER. Just open a new terminal window and proceed to next step (you can't move to a specific local directory).<\/p>","thread_text":"<p>Windows users using Cygwin, your file will be stored in C:\/cygwin64\/home\/USER. Just open a new terminal window and proceed to next step (you can't move to a specific local directory).<\/p>","body":"<p>Windows users using Cygwin, your file will be stored in C:\/cygwin64\/home\/USER. Just open a new terminal window and proceed to next step (you can't move to a specific local directory).<\/p>","is_private":"0","public_protocol":"1","can_edit":0,"can_delete":"0","show_name":"0","created_date":"1477508917","created_on":"1477508917","modified_on":null,"last_updated":null,"profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/67c2w6.jpg","full_name":"James Thornton Jr","affiliation":"Hurwitz Lab ","username":"james-thornton-jr","email":"jamesthornton@email.arizona.edu","pa_useranme":"james-thornton-jr","comments":[]},"is_project":0}]},{"id":"187767","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"FC771E8C5B7442FEA87EE92A3A759E29","previous_guid":"47A76BD139B841AAAC2649C23F8DDA2F","previous_id":"187766","last_modified":"1502718954","components":[{"component_id":"987386","previous_id":0,"original_id":"0","guid":"4B7890487DD44A48B3301015EF74A377","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227709","previous_id":"987386","original_id":"0","guid":"FB178A08562748A19C84173EB8600E61","previous_guid":"4B7890487DD44A48B3301015EF74A377","component_type_id":"1","data_id":"0","data":"<p>Execute the following command to scp the .png\u00a0files to your local machine:<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Execute the following command to scp the .png\u00a0files to your local machine:<\/p>"},"is_project":0},{"component_id":"227710","previous_id":"227709","original_id":"0","guid":"C6E30C245A704603AE900186FF5B41B4","previous_guid":"FB178A08562748A19C84173EB8600E61","component_type_id":"15","data_id":"1366","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ scp netid@hpc.arizona.edu:\/rsgrps\/bh_class\/username\/taxonomy\/barplots\/*.png .","description":"Replace netid and username. (They may be different).","os_name":"","os_version":"","can_edit":"1"},"is_project":0}]},{"id":"187768","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"D267B62F2E9348218CCD527D37CB92C5","previous_guid":"FC771E8C5B7442FEA87EE92A3A759E29","previous_id":"187767","last_modified":"1502718954","components":[{"component_id":"987387","previous_id":0,"original_id":"0","guid":"160E7C5F3B3546B1A2D5A5426A75CD5A","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227711","previous_id":"987387","original_id":"0","guid":"C52AE535B0D1499483A0BF2974577285","previous_guid":"160E7C5F3B3546B1A2D5A5426A75CD5A","component_type_id":"1","data_id":"0","data":"<p>You can now open the images on your local machine. Reminder that windows users will have their images in\u00a0C:\/cygwin64\/home\/USER.<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>You can now open the images on your local machine. Reminder that windows users will have their images in\u00a0C:\/cygwin64\/home\/USER.<\/p>"},"is_project":0}]},{"id":"187769","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"35F8FE97B24743A0AB32814D4F137274","previous_guid":"D267B62F2E9348218CCD527D37CB92C5","previous_id":"187768","last_modified":"1502718954","components":[{"component_id":"987388","previous_id":0,"original_id":"0","guid":"3AEF0BD9702B4CF28E4C24F37334BFB7","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227712","previous_id":"987388","original_id":"0","guid":"61E2667C823B4DBD8EED92C1F23DF5AE","previous_guid":"3AEF0BD9702B4CF28E4C24F37334BFB7","component_type_id":"1","data_id":"0","data":"<p>Report on what you've found for each sample. Make sure to state the method used to obtain these results.\u00a0<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Report on what you've found for each sample. Make sure to state the method used to obtain these results.\u00a0<\/p>"},"is_project":0}]}]}