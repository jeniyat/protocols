{"uri":"mg-hw7-taxonomic-classification-using-centrifuge-f7mbrk6","version_id":"0","protocol_name":"MG_HW7: Taxonomic Classification Using Centrifuge","protocol_name_html":"MG_HW7: Taxonomic Classification Using Centrifuge","is_prepublished":"0","can_edit":"0","parent_id":null,"api_version":"2","is_new_mode":"1","last_modified":"1522217461","type_id":"1","link":"","fork_id":"","public_fork_note":"","number_of_steps":"12","has_versions":"1","first_published_date":"1477422571","publish_date":"2016-10-25 19:09:31","documents":"null","have_protocol_in_step":"0","is_protocol_in_step":"0","vendor_name":"Contributed by users","vendor_link":"https:\/\/www.protocols.io","vendor_logo":"\/img\/vendors\/1.png","mod_mins":"-45","mod_secs":"1","description":"<p>This protocol provides a procedure to generate taxonomic data from assembled contigs using centrifuge.\u00a0<\/p>","is_bookmarked":"0","can_reassign":"1","before_start":"","has_guidelines":"1","materials":[],"warning":"","version_class":"4045","public":"1","is_owner":"1","is_original_owner":"1","created_on":"1477415467","protocol_affiliation":"Hurwitz Lab","affiliation":"Hurwitz Lab ","doi":"dx.doi.org\/10.17504\/protocols.io.f7mbrk6","doi_status":"2","changed_fork_steps":null,"profile_url":"James-w2u264z2w2","protocol_img":"https:\/\/s3.amazonaws.com\/pr-journal\/fpsc2w6.jpeg","profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/67c2w6.jpg","full_name":"James Thornton Jr","created_by":"James Thornton Jr","private_link":"025C66A30E64D6F36AA4B80ACE0AF860","original_img":"1","username":"james-thornton-jr","is_retracted":"0","retraction_reason":null,"plos_id":null,"manuscript_citation":null,"journal_name":null,"is_donations_disabled":"0","is_donations_disabled_by_user":"9","item_record_id":219758,"fork_info":[],"compare_forks":[],"protocols":[],"groups":[{"group_id":"52","group_uri":"hurwitz-lab","group_name":"Hurwitz Lab","group_logo":"https:\/\/s3.amazonaws.com\/pr-journal\/iscwwe.png","requested_uid":null,"request_flag":null,"my_request":"1"},{"group_id":"224","group_uri":"metafunc-course","group_name":"MetaFunc Course","group_logo":"https:\/\/s3.amazonaws.com\/pr-journal\/emybvtw.jpg","requested_uid":null,"request_flag":null,"my_request":"1"}],"number_of_shared_runs":[],"ownership_history":[],"keywords":"","transfer_to_user":[],"sub_transfer":false,"is_transfer_pending":false,"number_of_bookmarks":"0","collections":[],"tags":[],"archived":0,"sub_authors":[],"sub_protocols_number":0,"can_edit_shared":0,"shared_runs":[],"is_shared_run":0,"is_shared":1,"banner":null,"contact_badges":[{"badge_id":"1","badge_image":"\/img\/ambassador.svg","badge_description":"Ambassador"},{"badge_id":"4","badge_image":"\/img\/badges\/gold.svg","badge_description":"Gold power author!"},{"badge_id":"5","badge_image":"\/img\/badges\/earlyadopter.svg","badge_description":"Early adopter"},{"badge_id":"6","badge_image":"\/img\/badges\/socialbutterfly.svg","badge_description":"Social butterfly"}],"number_of_comments":0,"big_protocol_img":"https:\/\/s3.amazonaws.com\/pr-journal\/fprc2w6.jpeg","big_protocol_img_ofn":"centrifuge_protocol_img.jpeg","is_locked":0,"is_locked_by":false,"authors":"James Thornton","authors_list":[{"name":"James Thornton","affiliation":"Hurwitz Lab","username":null,"profile_image":null}],"user":{"profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/67c2w6.jpg","username":"james-thornton-jr","full_name":"James Thornton Jr","created_by":"James Thornton Jr"},"access":{"can_view":"1","can_remove":"0","can_add":"0","can_edit":0,"can_publish":0,"can_get_doi":0,"can_share":"0","can_move":"1","can_transfer":"1","can_download":"1","is_locked":"0"},"is_contact_suspended":0,"guidelines":"<p><a href=\"http:\/\/www.ccb.jhu.edu\/software\/centrifuge\/manual.shtml\" target=\"_blank\">Centrifuge documentation<\/a><\/p>","status_id":"1","is_research":"1","status_info":null,"steps":[{"id":"187401","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"2DDC340A5F974049A5E1C6FBF7DECFDD","previous_guid":null,"previous_id":"0","last_modified":"1502718953","components":[{"component_id":"987308","previous_id":0,"original_id":"0","guid":"9BA8E32E183D4C13BD46206328A54C49","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227160","previous_id":"987308","original_id":"0","guid":"2EED16D1BB654166AB0173AD34B657E0","previous_guid":"9BA8E32E183D4C13BD46206328A54C49","component_type_id":"1","data_id":"0","data":"<p>Log in to the HPC cluster (ICE)<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Log in to the HPC cluster (ICE)<\/p>"},"is_project":0},{"component_id":"227164","previous_id":"227160","original_id":"0","guid":"04C5654F3C2B4BDE8A5FA84B3FCD7162","previous_guid":"2EED16D1BB654166AB0173AD34B657E0","component_type_id":"26","data_id":"13210","data":"","order_id":"2","name":"Note","data_by_id":"1","type_id":"26","source_data":{"annotation_id":"13210","thread_id":"13210","id":"13210","thread_title":"Annotation on step 1 of MG_HW7: Taxonomic Classification Using Centrifuge","uri":"annotation-on-step-1-of-mghw7-taxonomic-classification","thread_uri":"annotation-on-step-1-of-mghw7-taxonomic-classification","step_id":"187401","protocol_uri":"mg-hw7-taxonomic-classification-using-centrifuge-f7mbrk6","protocol_name":"MG_HW7: Taxonomic Classification Using Centrifuge","protocol_name_html":"MG_HW7: Taxonomic Classification Using Centrifuge","annotation":"<p>Option 3 for those with menu enabled.\u00a0<\/p>","thread_text":"<p>Option 3 for those with menu enabled.\u00a0<\/p>","body":"<p>Option 3 for those with menu enabled.\u00a0<\/p>","is_private":"0","public_protocol":"1","can_edit":0,"can_delete":"0","show_name":"0","created_date":"1477416032","created_on":"1477416032","modified_on":null,"last_updated":null,"profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/67c2w6.jpg","full_name":"James Thornton Jr","affiliation":"Hurwitz Lab ","username":"james-thornton-jr","email":"jamesthornton@email.arizona.edu","pa_useranme":"james-thornton-jr","comments":[]},"is_project":0},{"component_id":"227162","previous_id":"227164","original_id":"0","guid":"3E53E974CF1A42F2BA43A01129732539","previous_guid":"04C5654F3C2B4BDE8A5FA84B3FCD7162","component_type_id":"15","data_id":"1351","data":null,"order_id":"3","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ ssh hpc\n$ ice","description":"","os_name":"","os_version":"","can_edit":"1"},"is_project":0}]},{"id":"187405","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"203B942FAFAC44D9AF1F48D30D04081A","previous_guid":"2DDC340A5F974049A5E1C6FBF7DECFDD","previous_id":"187401","last_modified":"1502718953","components":[{"component_id":"987309","previous_id":0,"original_id":"0","guid":"CB980FEC7FF94DC491CB8A6226DDC600","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227168","previous_id":"987309","original_id":"0","guid":"965EB640AE1F484DA73023503A05FC69","previous_guid":"CB980FEC7FF94DC491CB8A6226DDC600","component_type_id":"1","data_id":"0","data":"<p>Move into your class directory.\u00a0<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Move into your class directory.\u00a0<\/p>"},"is_project":0},{"component_id":"227170","previous_id":"227168","original_id":"0","guid":"BC6203410DB34C9DA06B948845CC8F53","previous_guid":"965EB640AE1F484DA73023503A05FC69","component_type_id":"15","data_id":"1352","data":"","order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ cd \/rsgrps\/bh_class\/username","description":"Use YOUR username","os_name":"","os_version":"","can_edit":"1"},"is_project":0}]},{"id":"187408","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"BB2ACC315E9945CC8581FB515BFC9A83","previous_guid":"EDFD986E79904CA3B7F2AC6E958F2829","previous_id":"187425","last_modified":"1502718953","components":[{"component_id":"987310","previous_id":0,"original_id":"0","guid":"FBBED8F53957484089E9B747E84A4769","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227172","previous_id":"987310","original_id":"0","guid":"D5F07FF55FAE4D5DBCC091B1C3543742","previous_guid":"FBBED8F53957484089E9B747E84A4769","component_type_id":"1","data_id":"0","data":"<p>Make a directory named 'taxonomy'.\u00a0<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Make a directory named 'taxonomy'.\u00a0<\/p>"},"is_project":0},{"component_id":"227174","previous_id":"227172","original_id":"0","guid":"B9B914755E354A65A70FB78F04F71F17","previous_guid":"D5F07FF55FAE4D5DBCC091B1C3543742","component_type_id":"15","data_id":"1353","data":"","order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ cd taxonomy\n$ ls","description":"","os_name":"","os_version":"","can_edit":"1"},"is_project":0}]},{"id":"187414","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"304BD80A07374E60A13B004DFBEBAECF","previous_guid":"203B942FAFAC44D9AF1F48D30D04081A","previous_id":"187405","last_modified":"1502718953","components":[{"component_id":"987311","previous_id":0,"original_id":"0","guid":"A446994BF04A4025953EF4754E2616B2","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227181","previous_id":"987311","original_id":"0","guid":"6FBB6A57D3234821A78FAE6E4954D744","previous_guid":"A446994BF04A4025953EF4754E2616B2","component_type_id":"1","data_id":"0","data":"<p>Update your 'run-interactive.sh' script to include new memory allocations:<\/p>\n<p>\u00a0<\/p>\n<p>\u00a0<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Update your 'run-interactive.sh' script to include new memory allocations:<\/p>\n<p>\u00a0<\/p>\n<p>\u00a0<\/p>"},"is_project":0},{"component_id":"227187","previous_id":"227181","original_id":"0","guid":"16950F6606124BF4A0F6BE357C0AB09D","previous_guid":"6FBB6A57D3234821A78FAE6E4954D744","component_type_id":"26","data_id":"13211","data":"","order_id":"2","name":"Note","data_by_id":"1","type_id":"26","source_data":{"annotation_id":"13211","thread_id":"13211","id":"13211","thread_title":"Annotation on step 3 of MG_HW7: Taxonomic Classification Using Centrifuge","uri":"annotation-on-step-3-of-mghw7-taxonomic-classification","thread_uri":"annotation-on-step-3-of-mghw7-taxonomic-classification","step_id":"187414","protocol_uri":"mg-hw7-taxonomic-classification-using-centrifuge-f7mbrk6","protocol_name":"MG_HW7: Taxonomic Classification Using Centrifuge","protocol_name_html":"MG_HW7: Taxonomic Classification Using Centrifuge","annotation":"<p>Note: run-interactive.sh should already exist from the last protocol but it can be created new if needed.\u00a0<\/p>","thread_text":"<p>Note: run-interactive.sh should already exist from the last protocol but it can be created new if needed.\u00a0<\/p>","body":"<p>Note: run-interactive.sh should already exist from the last protocol but it can be created new if needed.\u00a0<\/p>","is_private":"0","public_protocol":"1","can_edit":0,"can_delete":"0","show_name":"0","created_date":"1477416657","created_on":"1477416657","modified_on":null,"last_updated":null,"profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/67c2w6.jpg","full_name":"James Thornton Jr","affiliation":"Hurwitz Lab ","username":"james-thornton-jr","email":"jamesthornton@email.arizona.edu","pa_useranme":"james-thornton-jr","comments":[]},"is_project":0},{"component_id":"227185","previous_id":"227187","original_id":"0","guid":"775DC76B1E4240D580DA49A37E79FEB2","previous_guid":"16950F6606124BF4A0F6BE357C0AB09D","component_type_id":"15","data_id":"1354","data":null,"order_id":"3","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"#!\/bin\/bash\n\n#PBS -W group_list=bh_class\n#PBS -q windfall\n#PBS -l jobtype=cluster_only\n#PBS -l select=1:ncpus=12:mem=23gb\n#PBS -l pvmem=22gb\n#PBS -l walltime=24:00:00\n#PBS -l cput=24:00:00\n#PBS -M netid@email.arizona.edu\n#PBS -m bea\n\n#--------------EDIT THESE---------------\nFASTA_DIR=\"\/rsgrps\/bh_class\/username\/fasta\"\nOUT_DIR=\"\/rsgrps\/bh_class\/username\/taxonomy\"\nBT2_OUT_DIR=\"\/rsgrps\/bh_class\/username\/unmapped\"\n#---------------------------------------\n\nCENT_DB=\"\/rsgrps\/bh_class\/b_compressed+h+v\/b_compressed+h+v\"\nBT2_INDEX=\"\/rsgrps\/bh_class\/bowtie2_index\/human_index\"\n\ncd \"$FASTA_DIR\"\nexport FASTA_LIST=\"$FASTA_DIR\/fasta-list\"\nls *.fasta > $FASTA_LIST\necho \"FASTA files to be processed:\" $(cat $FASTA_LIST)\n\nmodule load bowtie2\/2.2.5\nwhile read FASTA; do\n  export FASTA=\"$FASTA\"\n  export FILE_NAME=`basename $FASTA | cut -d '.' -f 1`\n  bowtie2 -x $BT2_INDEX -U $FASTA -f --very-sensitive-local -p 4 --un $BT2_OUT_DIR\/$FILE_NAME.unmapped\n\ndone < $FASTA_LIST\n\ncd \"$BT2_OUT_DIR\"\nexport UNMAPPED_LIST=\"$BT2_OUT_DIR\/unmapped-list\"\nls *.unmapped > $UNMAPPED_LIST\necho \"Running Centrifuge on the following files:\" $(cat $UNMAPPED_LIST)\n\nwhile read UNMAPPED; do\n  export UNMAPPED=\"$UNMAPPED\"\n  export UNMAPPED_NAME=$(basename $UNMAPPED | cut -d '.' -f 1)\n  centrifuge -x $CENT_DB -U $UNMAPPED -S $OUT_DIR\/$UNMAPPED_NAME-classout --report-file $OUT_DIR\/$UNMAPPED_NAME-centrifuge_report.tsv -f\ndone < $UNMAPPED_LIST","description":"As indicated in the script, edit the FASTA_DIR and OUT_DIR to include the path to YOUR Fasta files and the taxonomy directory created in the previous step. \n\nRemember to replace netid with YOUR netid to receive email notifications","os_name":"","os_version":"","can_edit":"1"},"is_project":0}]},{"id":"187420","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"F1A4AA4A4E684CBF9A619DCE33B8C76D","previous_guid":"304BD80A07374E60A13B004DFBEBAECF","previous_id":"187414","last_modified":"1502718953","components":[{"component_id":"987312","previous_id":0,"original_id":"0","guid":"7B64D3BFC42043779D7CF6B491B24E23","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227194","previous_id":"987312","original_id":"0","guid":"D74A591092D14B0E9E6C5DC20AC1BF62","previous_guid":"7B64D3BFC42043779D7CF6B491B24E23","component_type_id":"1","data_id":"0","data":"<p>Submit run-interactive using qsub:<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Submit run-interactive using qsub:<\/p>"},"is_project":0},{"component_id":"227198","previous_id":"227194","original_id":"0","guid":"98379E83CEE042E5A53A95A1D62EEC34","previous_guid":"D74A591092D14B0E9E6C5DC20AC1BF62","component_type_id":"15","data_id":"1355","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ qsub -e std-err\/ -o std-out\/ centrifuge_tax.sh","description":"","os_name":"","os_version":"","can_edit":"1"},"is_project":0},{"component_id":"227200","previous_id":"227198","original_id":"0","guid":"1A8AC1D2B2E740CA9F3458C6A9DCB37B","previous_guid":"98379E83CEE042E5A53A95A1D62EEC34","component_type_id":"17","data_id":"386","data":"<p><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/fppc2w6.png\" width=\"450\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/fpnc2w6.png\" data-ofn=\"Screen Shot 2016-10-10 at 6.25.15 AM.png\" \/><\/p>","order_id":"3","name":"Expected result","data_by_id":"1","type_id":"17","source_data":{"result":"<p><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/fppc2w6.png\" width=\"450\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/fpnc2w6.png\" data-ofn=\"Screen Shot 2016-10-10 at 6.25.15 AM.png\" \/><\/p>"},"is_project":0}]},{"id":"187425","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"EDFD986E79904CA3B7F2AC6E958F2829","previous_guid":"F1A4AA4A4E684CBF9A619DCE33B8C76D","previous_id":"187420","last_modified":"1502718953","components":[{"component_id":"987313","previous_id":0,"original_id":"0","guid":"DF02B2D938F84605A63065A767BC3F72","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227203","previous_id":"987313","original_id":"0","guid":"DAF9A8CB49C14CED8E0A7034AA35EB6C","previous_guid":"DF02B2D938F84605A63065A767BC3F72","component_type_id":"1","data_id":"0","data":"<p>Once the job is ready move back into your class directory.\u00a0<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Once the job is ready move back into your class directory.\u00a0<\/p>"},"is_project":0},{"component_id":"227208","previous_id":"227203","original_id":"0","guid":"C03C716298E8442E9FD203AADEF770AB","previous_guid":"DAF9A8CB49C14CED8E0A7034AA35EB6C","component_type_id":"15","data_id":"1356","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ qstat -u username","description":"Use YOUR username\nUnder S (Status) 'Q' means queued, 'R' means running","os_name":"","os_version":"","can_edit":"1"},"is_project":0}]},{"id":"187430","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"2F0F3E06D8C74BA4AE90A7E58C41933A","previous_guid":"BB2ACC315E9945CC8581FB515BFC9A83","previous_id":"187408","last_modified":"1502718953","components":[{"component_id":"987314","previous_id":0,"original_id":"0","guid":"8A3A83EBFC614302A2AE6C4A0607974D","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227210","previous_id":"987314","original_id":"0","guid":"0E2DBFE2E2BA48098A03D4512A1FAF8C","previous_guid":"8A3A83EBFC614302A2AE6C4A0607974D","component_type_id":"1","data_id":"0","data":"<p>Run Centrifuge on your fixed-contigs.fa:<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Run Centrifuge on your fixed-contigs.fa:<\/p>"},"is_project":0},{"component_id":"227249","previous_id":"227210","original_id":"0","guid":"8F7CC910B90E4342A58E64FB2A6CA7D7","previous_guid":"0E2DBFE2E2BA48098A03D4512A1FAF8C","component_type_id":"26","data_id":"13212","data":"","order_id":"2","name":"Note","data_by_id":"1","type_id":"26","source_data":{"annotation_id":"13212","thread_id":"13212","id":"13212","thread_title":"Annotation on step 7 of MG_HW7: Taxonomic Classification Using Centrifuge","uri":"annotation-on-step-7-of-mghw7-taxonomic-classification","thread_uri":"annotation-on-step-7-of-mghw7-taxonomic-classification","step_id":"187430","protocol_uri":"mg-hw7-taxonomic-classification-using-centrifuge-f7mbrk6","protocol_name":"MG_HW7: Taxonomic Classification Using Centrifuge","protocol_name_html":"MG_HW7: Taxonomic Classification Using Centrifuge","annotation":"<p>Important: This step is written under the assumption you are executing it while in \/rsgrps\/bh_class\/username<\/p>\n<p>\u00a0<\/p>\n<p>If you are somewhere else while trying to execute this command it will NOT work.\u00a0<\/p>","thread_text":"<p>Important: This step is written under the assumption you are executing it while in \/rsgrps\/bh_class\/username<\/p>\n<p>\u00a0<\/p>\n<p>If you are somewhere else while trying to execute this command it will NOT work.\u00a0<\/p>","body":"<p>Important: This step is written under the assumption you are executing it while in \/rsgrps\/bh_class\/username<\/p>\n<p>\u00a0<\/p>\n<p>If you are somewhere else while trying to execute this command it will NOT work.\u00a0<\/p>","is_private":"0","public_protocol":"1","can_edit":0,"can_delete":"0","show_name":"0","created_date":"1477420813","created_on":"1477420813","modified_on":null,"last_updated":null,"profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/67c2w6.jpg","full_name":"James Thornton Jr","affiliation":"Hurwitz Lab ","username":"james-thornton-jr","email":"jamesthornton@email.arizona.edu","pa_useranme":"james-thornton-jr","comments":[]},"is_project":0},{"component_id":"227213","previous_id":"227249","original_id":"0","guid":"68B87B874F7D4CB6865AA6D2D624CA17","previous_guid":"8F7CC910B90E4342A58E64FB2A6CA7D7","component_type_id":"15","data_id":"1357","data":null,"order_id":"3","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ module load R","description":"","os_name":"","os_version":"","can_edit":"1"},"is_project":0},{"component_id":"227215","previous_id":"227213","original_id":"0","guid":"424C9AED7D4449DA99D9FB0BDB829608","previous_guid":"68B87B874F7D4CB6865AA6D2D624CA17","component_type_id":"17","data_id":"387","data":"<p>For my 3000+ contigs it took ~2 minutes to run. The time it takes will vary depending on the amount of contigs you have.\u00a0<\/p>","order_id":"4","name":"Expected result","data_by_id":"1","type_id":"17","source_data":{"result":"<p>For my 3000+ contigs it took ~2 minutes to run. The time it takes will vary depending on the amount of contigs you have.\u00a0<\/p>"},"is_project":0}]},{"id":"187435","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"402EDEEFCE5E4A6BB9250C849CD2042F","previous_guid":"2F0F3E06D8C74BA4AE90A7E58C41933A","previous_id":"187430","last_modified":"1502718953","components":[{"component_id":"987315","previous_id":0,"original_id":"0","guid":"6E969856ED414EE581E82B3EBA00E3FE","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227218","previous_id":"987315","original_id":"0","guid":"64787E3132DD4C6CAF835FA7AAA3A40F","previous_guid":"6E969856ED414EE581E82B3EBA00E3FE","component_type_id":"1","data_id":"0","data":"<p>Once the job is complete, move into the taxonomy directory and ensure the correct output is there.\u00a0<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Once the job is complete, move into the taxonomy directory and ensure the correct output is there.\u00a0<\/p>"},"is_project":0},{"component_id":"227220","previous_id":"227218","original_id":"0","guid":"AAFC8A8144924873B44B52EE6F96DAC6","previous_guid":"64787E3132DD4C6CAF835FA7AAA3A40F","component_type_id":"15","data_id":"1358","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ .\/cent_barplots.R","description":"","os_name":"","os_version":"","can_edit":"1"},"is_project":0},{"component_id":"227222","previous_id":"227220","original_id":"0","guid":"607708268A2B4BC9AEA12181F65439B1","previous_guid":"AAFC8A8144924873B44B52EE6F96DAC6","component_type_id":"17","data_id":"388","data":"<p><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/fpqc2w6.png\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/fpqc2w6.png\" data-ofn=\"Screen Shot 2016-10-25 at 10.47.19 AM.png\" \/><\/p>","order_id":"3","name":"Expected result","data_by_id":"1","type_id":"17","source_data":{"result":"<p><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/fpqc2w6.png\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/fpqc2w6.png\" data-ofn=\"Screen Shot 2016-10-25 at 10.47.19 AM.png\" \/><\/p>"},"is_project":0}]},{"id":"187439","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"1B0ACE9F56D3458595D644C279516572","previous_guid":"402EDEEFCE5E4A6BB9250C849CD2042F","previous_id":"187435","last_modified":"1502718953","components":[{"component_id":"987316","previous_id":0,"original_id":"0","guid":"1B1077B63CF6438B8F7CB0A34457EF28","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227225","previous_id":"987316","original_id":"0","guid":"4D0A8B1F7B034AC2B0CBCB26A9F95DAF","previous_guid":"1B1077B63CF6438B8F7CB0A34457EF28","component_type_id":"1","data_id":"0","data":"<p>Sort centrifuge_report.tsv by the 5th column descending and put the output into a temp_sorted.tsv file:<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Sort centrifuge_report.tsv by the 5th column descending and put the output into a temp_sorted.tsv file:<\/p>"},"is_project":0},{"component_id":"227227","previous_id":"227225","original_id":"0","guid":"61B15278A148421C93D7037020CF726D","previous_guid":"4D0A8B1F7B034AC2B0CBCB26A9F95DAF","component_type_id":"15","data_id":"1359","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"#!\/usr\/bin\/env Rscript\n\n#----------EDIT HERE----------\ncent.dir <- \"\/rsgrps\/bh_class\/username\/taxonomy\/\"\nout.dir <- \"\/rsgrps\/bh_class\/username\/taxonomy\/barplots\/\"\n#--------------------------------\n\nfile.names <- dir(cent.dir, pattern=\"-centrifuge_report.tsv\")\n\ngen_barplot <- function (data) {\n  data_title <- gsub(\"-centrifuge_report.tsv\", \"\", data)\n  data <- read.delim(paste0(i, data))\n  total_reads <- sum(data$numReads)\n  proportion_classified <- data$numReads \/ total_reads\n  data[\"proportion_classified\"] <- proportion_classified\n  read_subset <- subset(data, proportion_classified > 0.005, select = c(\"name\", \"numReads\", \"proportion_classified\"))\n  read_subset$numReads <- as.numeric(read_subset$numReads)\n  png(filename=paste0(out.dir,data_title,\"_taxonomy.png\"), width = 600, height = 600)\n  op <- par(mar=c(15, 8, 4, 2) + 0.1, mgp = c(10, 1, 0))\n  p1 <- barplot(read_subset$proportion_classified, main=paste0(\"Read Proportional Classification: \",data_title), names.arg = read_subset$name, las=2, cex.names = 1, cex.axis = 1, ylab=\"Proportion Classified\", ylim = c(0, 0.90))\n  grid(nx=NA, ny=NULL)\n  print(p1)\n  dev.off()\n}\n\nfor (i in cent.dir) {\n  lapply(file.names, gen_barplot)\n}","description":"Make sure to edit username in cent.dir and out.dir to include YOUR path. \nAlso ensure that both cent.dir and out.dir end with the slash","os_name":"","os_version":"","can_edit":"1"},"is_project":0}]},{"id":"187442","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"2958D8184BDF4AD4B9DF3EE2236D6946","previous_guid":"1B0ACE9F56D3458595D644C279516572","previous_id":"187439","last_modified":"1502718953","components":[{"component_id":"987317","previous_id":0,"original_id":"0","guid":"D25530CE8E0C4CD6A20A0437F81A6653","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227229","previous_id":"987317","original_id":"0","guid":"3A99531830DC44E9B5AE02BA3DC83EB1","previous_guid":"D25530CE8E0C4CD6A20A0437F81A6653","component_type_id":"1","data_id":"0","data":"<p>During the sort the column headers are\u00a0placed at the bottom of the file. Fix this with the following command:<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>During the sort the column headers are\u00a0placed at the bottom of the file. Fix this with the following command:<\/p>"},"is_project":0},{"component_id":"227232","previous_id":"227229","original_id":"0","guid":"9B3FB8B6131042D3931AEBABC0D991AE","previous_guid":"3A99531830DC44E9B5AE02BA3DC83EB1","component_type_id":"15","data_id":"1360","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ echo $(tail -1 temp_sorted.tsv) | cat - temp_sorted.tsv | sed '$d' > centrifuge_sorted.tsv","description":"The last line of temp_sorted is piped into cat of temp_sorted.tsv, placing it at the top of the file.\nsed '$d' deletes the last line which is the column headers which is now at the top","os_name":"","os_version":"","can_edit":"1"},"is_project":0}]},{"id":"187447","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"BB7C27AFDDE74F7EA4FDBDAAE40D7B6A","previous_guid":"2958D8184BDF4AD4B9DF3EE2236D6946","previous_id":"187442","last_modified":"1502718953","components":[{"component_id":"987318","previous_id":0,"original_id":"0","guid":"AA41229EB3AA4923B996C8FCD040A53A","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227236","previous_id":"987318","original_id":"0","guid":"3EA4F1BDE244443FB129F81E23C03C4B","previous_guid":"AA41229EB3AA4923B996C8FCD040A53A","component_type_id":"1","data_id":"0","data":"<p>Once you have centrifuge_sorted.tsv, remove the temp_sorted.tsv file.\u00a0<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Once you have centrifuge_sorted.tsv, remove the temp_sorted.tsv file.\u00a0<\/p>"},"is_project":0},{"component_id":"227241","previous_id":"227236","original_id":"0","guid":"397E5FBD3ABE410DB194CDB0B5B53E1F","previous_guid":"3EA4F1BDE244443FB129F81E23C03C4B","component_type_id":"15","data_id":"1361","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"> q()\nSave workspace image? [y\/n\/c]: n","description":"","os_name":"","os_version":"","can_edit":"1"},"is_project":0}]},{"id":"187453","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"9CF05299D6384B59A15B004AF3242102","previous_guid":"BB7C27AFDDE74F7EA4FDBDAAE40D7B6A","previous_id":"187447","last_modified":"1502718953","components":[{"component_id":"987319","previous_id":0,"original_id":"0","guid":"4F61616FC12E491185BE09C5564E757C","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"227243","previous_id":"987319","original_id":"0","guid":"26EDD437B0AC4FCFAE533FFE87BB3107","previous_guid":"4F61616FC12E491185BE09C5564E757C","component_type_id":"1","data_id":"0","data":"<p>Take a look at your now sorted centrifuge_sorted.tsv file. Report on some of the most abundant organisms with their read counts. Make sure to state the methods used to obtain these results.\u00a0<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Take a look at your now sorted centrifuge_sorted.tsv file. Report on some of the most abundant organisms with their read counts. Make sure to state the methods used to obtain these results.\u00a0<\/p>"},"is_project":0}]}]}