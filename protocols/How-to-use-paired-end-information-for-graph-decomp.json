{"uri":"How-to-use-paired-end-information-for-graph-decomp-d7p9mm","version_id":"0","protocol_name":"How to use paired-end information for graph decomposition","protocol_name_html":"How to use paired-end information for graph decomposition","is_prepublished":"0","can_edit":"0","parent_id":null,"api_version":"1","is_new_mode":"0","last_modified":"1510247633","type_id":"1","link":"http:\/\/metavelvet.dna.bio.keio.ac.jp\/MV.html","fork_id":"","public_fork_note":"","number_of_steps":"0","has_versions":"0","first_published_date":"1452788510","publish_date":"2016-01-14 16:28:14","documents":"null","have_protocol_in_step":"0","is_protocol_in_step":"0","vendor_name":"Contributed by users","vendor_link":"https:\/\/www.protocols.io","vendor_logo":"\/img\/vendors\/1.png","mod_mins":"-45","mod_secs":"1","description":"","is_bookmarked":"0","can_reassign":"1","before_start":"","has_guidelines":"1","materials":[],"warning":"","version_class":"1999","public":"1","is_owner":"1","is_original_owner":"1","created_on":"1447703435","protocol_affiliation":"Sakakibara Lab","affiliation":"University of Arizona","doi":"dx.doi.org\/10.17504\/protocols.io.d7p9mm","doi_status":"2","changed_fork_steps":null,"profile_url":"Bonnie-13y2c433","protocol_img":"https:\/\/www.protocols.io\/img\/default_protocol.png","profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/ee4bvtw.jpg","full_name":"Bonnie Hurwitz","created_by":"Bonnie Hurwitz","private_link":"2006E21E779332B6167DA0E211F0A44A","original_img":"1","username":"bonnie-hurwitz","is_retracted":"0","retraction_reason":null,"plos_id":null,"manuscript_citation":null,"journal_name":null,"is_donations_disabled":"0","is_donations_disabled_by_user":"9","item_record_id":213632,"fork_info":[],"compare_forks":[],"protocols":[],"groups":[{"group_id":"45","group_uri":"verve-net","group_name":"VERVE Net","group_logo":"https:\/\/s3.amazonaws.com\/pr-journal\/cdqcwwe.png","requested_uid":null,"request_flag":null,"my_request":"1"},{"group_id":"52","group_uri":"hurwitz-lab","group_name":"Hurwitz Lab","group_logo":"https:\/\/s3.amazonaws.com\/pr-journal\/iscwwe.png","requested_uid":null,"request_flag":null,"my_request":"1"}],"number_of_shared_runs":[],"ownership_history":[],"keywords":"","transfer_to_user":[],"sub_transfer":false,"is_transfer_pending":false,"number_of_bookmarks":"1","collections":[{"protocol_name":"MetaVelvet : An extension of Velvet assembler to de novo metagenome assembly from short sequence reads","protocol_name_html":"MetaVelvet : An extension of Velvet assembler to de novo metagenome assembly from short sequence reads","uri":"MetaVelvet-An-extension-of-Velvet-assembler-to-de-d7q9mv","username":"bonnie-hurwitz","profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/ee4bvtw.jpg","protocol_img":"https:\/\/www.protocols.io\/img\/default_protocol.png","full_name":"Bonnie Hurwitz"}],"tags":[{"tag_id":"57","tag_name":"VERVE"}],"archived":0,"sub_authors":[],"sub_protocols_number":0,"can_edit_shared":0,"shared_runs":[],"is_shared_run":0,"is_shared":1,"banner":null,"contact_badges":[{"badge_id":"4","badge_image":"\/img\/badges\/gold.svg","badge_description":"Gold power author!"},{"badge_id":"5","badge_image":"\/img\/badges\/earlyadopter.svg","badge_description":"Early adopter"},{"badge_id":"6","badge_image":"\/img\/badges\/socialbutterfly.svg","badge_description":"Social butterfly"}],"number_of_comments":0,"is_locked":0,"is_locked_by":false,"authors":"Afiahayati, Sato K, Namiki T, Hachiya T, Tanaka H, Sakakibara Y.","authors_list":[{"name":"Afiahayati","affiliation":"Sakakibara Lab","username":null,"profile_image":null},{"name":" Sato K","affiliation":"Sakakibara Lab","username":null,"profile_image":null},{"name":" Namiki T","affiliation":"Sakakibara Lab","username":null,"profile_image":null},{"name":" Hachiya T","affiliation":"Sakakibara Lab","username":null,"profile_image":null},{"name":" Tanaka H","affiliation":"Sakakibara Lab","username":null,"profile_image":null},{"name":" Sakakibara Y.","affiliation":"Sakakibara Lab","username":null,"profile_image":null}],"user":{"profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/ee4bvtw.jpg","username":"bonnie-hurwitz","full_name":"Bonnie Hurwitz","created_by":"Bonnie Hurwitz"},"access":{"can_view":"1","can_remove":"0","can_add":"0","can_edit":0,"can_publish":0,"can_get_doi":0,"can_share":"0","can_move":"1","can_transfer":"1","can_download":"1","is_locked":"0"},"is_contact_suspended":0,"guidelines":"<span style=\"color: #333333; font-family: helvetica, sans-serif; font-size: 14px; line-height: 21px;\">In order to decompose a complecated metagenomic de Bruijn graph into simpler subgraphs, MetaVelvet searches the following X-structure, i.e., chimeric nodes have two incoming edges and two outgoing edges.<br \/><br \/><img id=\"s-mce-img\" class=\"s-mce-img\" style=\"display: block; margin-left: auto; margin-right: auto;\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/bngc2w6.png\" alt=\"\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/bnfc2w6.png\" data-ofn=\"fig7.png\" \/><br \/><\/span>\n<p style=\"color: #333333; font-family: helvetica, sans-serif; font-size: 14px; line-height: 21px;\">Then, MetaVelvet split the X-structures when the following conditions are satisfied:\u00a0<\/p>\n<ul style=\"padding-left: 60px; color: #333333; font-family: helvetica, sans-serif; font-size: 14px; line-height: 21px;\">\n<li>Primary-IN and Primary-OUT nodes are classified into the same peak.<\/li>\n<li>Secondary-IN and Secondary-OUT nodes are classified into the same peak.<\/li>\n<li>Chimeric node has a coverage value mostly equal (within 50% difference by default) to the average between the sum of coverage values of the two origin nodes of incoming edges (Primary-IN and Secondary-IN), and the sum of the two destination nodes of outgoing edges (Primary-OUT and Secondary-OUT).<\/li>\n<\/ul>\n<br style=\"color: #333333; font-family: helvetica, sans-serif; font-size: 14px; line-height: 21px;\" \/><span style=\"color: #333333; font-family: helvetica, sans-serif; font-size: 14px; line-height: 21px;\">In order to accurately avoid chimeric contigs\/scaffolds caused by subgraph decomposition, we added the following two conditions (&gt;= 1.2.01):<\/span>\n<ul style=\"padding-left: 60px; color: #333333; font-family: helvetica, sans-serif; font-size: 14px; line-height: 21px;\">\n<li>The number of\u00a0<em>consistent paired-end connections<\/em>\u00a0is equal to or larger than a certain value. This cutoff value can be specified by the\u00a0<strong>-valid_connections<\/strong>\u00a0option (default: 1).<\/li>\n<li>The number of\u00a0<em>inconsistent paired-end connections<\/em>\u00a0is equal to or smaller than a certain value. This cutoff value can be specified by the\u00a0<strong>-noise_connections<\/strong>\u00a0option (default: 0).<\/li>\n<li>For lower compatibility, users can turn off the paired-end conditions by the\u00a0<strong>-use_connections<\/strong>\u00a0option.<\/li>\n<li><\/li>\n<\/ul>\n<span style=\"color: #333333; font-family: helvetica, sans-serif; font-size: 14px; line-height: 21px;\">Here, we denote paired-end connections between Primary-IN and Primary-OUT or between Secondary-IN and Secondary-OUT as\u00a0<\/span><em style=\"color: #333333; font-family: helvetica, sans-serif; font-size: 14px; line-height: 21px;\">consistent paired-end connections<\/em><span style=\"color: #333333; font-family: helvetica, sans-serif; font-size: 14px; line-height: 21px;\">. We also denote paired-end connections between Primary-IN and Secondary-OUT or between Secondary-IN and Primary-OUT as\u00a0<\/span><em style=\"color: #333333; font-family: helvetica, sans-serif; font-size: 14px; line-height: 21px;\">inconsistent paired-end connections<\/em><span style=\"color: #333333; font-family: helvetica, sans-serif; font-size: 14px; line-height: 21px;\">.\u00a0<\/span><br style=\"color: #333333; font-family: helvetica, sans-serif; font-size: 14px; line-height: 21px;\" \/><br style=\"color: #333333; font-family: helvetica, sans-serif; font-size: 14px; line-height: 21px;\" \/><span style=\"color: #333333; font-family: helvetica, sans-serif; font-size: 14px; line-height: 21px;\">Based upon our accuracy evaluation,\u00a0<\/span><strong style=\"color: #333333; font-family: helvetica, sans-serif; font-size: 14px; line-height: 21px;\">-valid_connections 1 -noise_connections 0<\/strong><span style=\"color: #333333; font-family: helvetica, sans-serif; font-size: 14px; line-height: 21px;\">\u00a0is an appropriate setting when very similar species co-exist in an environment (MetaVelvet can efficiently avoid misassemblies). Otherwise,\u00a0<\/span><strong style=\"color: #333333; font-family: helvetica, sans-serif; font-size: 14px; line-height: 21px;\">-valid_connections 0 -noise_connections 0<\/strong><span style=\"color: #333333; font-family: helvetica, sans-serif; font-size: 14px; line-height: 21px;\">\u00a0is a more appropriate setting (MetaVelvet can achieve a greater contig\/scaffold N50 while avoiding misassemblies).<\/span><span style=\"color: #333333; font-family: helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><br \/><br \/><\/span><span style=\"color: #333333; font-family: helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><span style=\"color: #333333; font-family: helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><strong style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; font-stretch: inherit; vertical-align: baseline; background-color: #f6f6f4;\">Frequently Asked Questions<br \/><br style=\"box-sizing: border-box;\" \/><\/strong><\/span><\/span>\n<ul>\n<li>Q:\u00a0meta-velveth\u00a0is not generated in the new version (&gt;= 1.1.01). Is it problem?\u00a0<br \/>A:\u00a0This is not problem. The usage of MetaVelvet is changed when the version 1.1.01 is released, and the new version does not include\u00a0meta-velveth. Instead, please use\u00a0velveth,\u00a0velvetg, and\u00a0meta-velvetg.<\/li>\n<\/ul>\n<br \/>\n<ul>\n<li>Q:\u00a0When only one coverage peak is detected (or manually input), is there any difference between MetaVelvet and Velvet algorithms?\u00a0<br \/>A:\u00a0There is no substantial difference. In such cases,\u00a0meta-velvetg\u00a0moves to \"single-peak mode\" and graph splitting functions in\u00a0meta-velvetg\u00a0is not called. Instead of graph splitting functions, standard velvet functions are called in such cases.<\/li>\n<\/ul>\n<br \/>\n<ul>\n<li>Q:\u00a0What's the difference in working procedures between\u00a0velvetg,\u00a0meta-velvetg\u00a0(&lt;= 0.3.1), and\u00a0meta-velvetg(&gt;= 1.1.01)?\u00a0<br \/>A:\u00a0The following is the working procedure of\u00a0velvetg,\u00a0meta-velvetg\u00a0(&lt;= 0.3.1), and\u00a0meta-velvetg\u00a0(&gt;= 1.1.01):\u00a0<br \/><br \/>\u00a0 \u00a0\u00a0velvetg &amp; meta-velvetg(&lt;=0.3.1) :\u00a0<br \/>\u00a0 \u00a0 \u00a0 \u00a0 Load Sequences &amp; Roadmaps file\u00a0<br \/>\u00a0 \u00a0 \u00a0 \u00a0 -&gt; Generate PreGraph file\u00a0<br \/>\u00a0 \u00a0 \u00a0 \u00a0 -&gt; Generate Graph or Graph2 file\u00a0<br \/>\u00a0 \u00a0 \u00a0 \u00a0 -&gt; Generate contigs.fa and LastGraph\u00a0<br \/><br \/>\u00a0 \u00a0\u00a0meta-velvetg (&gt;= 1.1.01):\u00a0<br \/>\u00a0 \u00a0 \u00a0 \u00a0 Load Sequences &amp; Roadmaps &amp; Graph2 file\u00a0<br \/>\u00a0 \u00a0 \u00a0 \u00a0 -&gt; Generate meta-velvetg.contigs.fa and meta-velvetg.LastGraph\u00a0<\/li>\n<\/ul>\n<br \/>\n<ul>\n<li>Q:\u00a0Is version compatibility between Velvet and MetaVelvet fully tested?\u00a0<br \/>A:\u00a0Version compatibility between Velvet-1.0.06 and MetaVelvet-1.1.01 is fully tested.<\/li>\n<\/ul>\n<span style=\"color: #333333; font-family: helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><span style=\"color: #333333; font-family: helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><strong style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; font-stretch: inherit; vertical-align: baseline; background-color: #f6f6f4;\"><br \/>Troubleshooting<br style=\"box-sizing: border-box;\" \/><br style=\"box-sizing: border-box;\" \/><\/strong><strong style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; font-stretch: inherit; vertical-align: baseline; background-color: #f6f6f4;\">Trouble:<\/strong><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; font-stretch: inherit; vertical-align: baseline; background-color: #f6f6f4;\">\u00a0<\/span><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; font-stretch: inherit; vertical-align: baseline; background-color: #f6f6f4;\">When drawing<\/span><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; font-stretch: inherit; vertical-align: baseline; background-color: #f6f6f4;\">\u00a0<\/span><em style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; font-stretch: inherit; vertical-align: baseline; background-color: #f6f6f4;\">k<\/em><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; font-stretch: inherit; vertical-align: baseline; background-color: #f6f6f4;\">-mer coverage histogram (as in the<\/span><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; font-stretch: inherit; vertical-align: baseline; background-color: #f6f6f4;\">\u00a0<\/span><a href=\"http:\/\/metavelvet.dna.bio.keio.ac.jp\/MV.html#advanced-topic-1\" target=\"_blank\">\"Advanced topics 1\"<\/a><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; font-stretch: inherit; vertical-align: baseline; background-color: #f6f6f4;\">\u00a0<\/span><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; font-stretch: inherit; vertical-align: baseline; background-color: #f6f6f4;\">section), the following warning messages is appeared:<br \/><br \/><\/span><\/span><\/span>\n<blockquote style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; font-stretch: inherit; vertical-align: baseline; quotes: none; background-color: #f6f6f4;\">&gt; weighted.hist(data$shot1_cov,data$lgth,breaks=seq(0,200,1))\u00a0<br style=\"box-sizing: border-box;\" \/>Warning messages:\u00a0<br style=\"box-sizing: border-box;\" \/>1: In min(x, na.rm = na.rm) :\u00a0<br style=\"box-sizing: border-box;\" \/>no non-missing arguments to min; returning Inf\u00a0<br style=\"box-sizing: border-box;\" \/>2: In max(x, na.rm = na.rm) :\u00a0<br style=\"box-sizing: border-box;\" \/>no non-missing arguments to max; returning -Inf\u00a0<br style=\"box-sizing: border-box;\" \/>3: In weighted.hist(data$shot1_cov, data$lgth, breaks = seq(0, 200, :\u00a0<br style=\"box-sizing: border-box;\" \/>Areas will not relate to frequencies\u00a0<\/blockquote>\n<span style=\"color: #333333; font-family: helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><span style=\"color: #333333; font-family: helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><strong style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; font-stretch: inherit; vertical-align: baseline; background-color: #f6f6f4;\"><br \/>Solution:<\/strong><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; font-stretch: inherit; vertical-align: baseline; background-color: #f6f6f4;\">\u00a0<\/span><span style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; font-stretch: inherit; vertical-align: baseline; background-color: #f6f6f4;\">This warning (error) is caused by \"Inf\" values in the Graph2 node stats. Accordingly, by removing \"Inf\" values from the Graph2 stats, the error is resolved:<\/span><\/span><\/span>\n<blockquote style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: 0px; font-stretch: inherit; vertical-align: baseline; quotes: none; background-color: #f6f6f4;\"><br \/>$ head -n 1 meta-velvetg.Graph2-stats.txt \\\u00a0<br style=\"box-sizing: border-box;\" \/>\u00a0 \u00a0 \u00a0 \u00a0 &gt; meta-velvetg.Graph2-stats.rmInf.txt\u00a0<br style=\"box-sizing: border-box;\" \/>$ perl -ne '{print $_ unless \/Inf\/;}' \\\u00a0<br style=\"box-sizing: border-box;\" \/>\u00a0 \u00a0 \u00a0 \u00a0 meta-velvetg.Graph2-stats.txt \\\u00a0<br style=\"box-sizing: border-box;\" \/>\u00a0 \u00a0 \u00a0 \u00a0 &gt;&gt; meta-velvetg.Graph2-stats.rmInf.txt\u00a0<br style=\"box-sizing: border-box;\" \/>$ R\u00a0<br style=\"box-sizing: border-box;\" \/>&gt; library(plotrix)\u00a0<br style=\"box-sizing: border-box;\" \/>&gt; data = read.table(\"meta-velvetg.Graph2-stats.rmInf.txt\", header=TRUE)\u00a0<br style=\"box-sizing: border-box;\" \/>&gt; weighted.hist(data$shot1_cov,data$lgth,breaks=seq(0,200,1))\u00a0<\/blockquote>","status_id":"1","is_research":"1","status_info":null,"steps":[]}