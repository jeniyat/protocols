{"uri":"mg-hw11-building-anvi-o-profiles-gepbtdn","version_id":"0","protocol_name":"MG_HW11: Building Anvi'o profiles","protocol_name_html":"MG_HW11: Building Anvi'o profiles","is_prepublished":"0","can_edit":"0","parent_id":null,"api_version":"2","is_new_mode":"1","last_modified":"1511652412","type_id":"1","link":"","fork_id":"","public_fork_note":"","number_of_steps":"9","has_versions":"0","first_published_date":"1479237210","publish_date":"2016-11-15 19:13:30","documents":null,"have_protocol_in_step":"0","is_protocol_in_step":"0","vendor_name":"Contributed by users","vendor_link":"https:\/\/www.protocols.io","vendor_logo":"\/img\/vendors\/1.png","mod_mins":"-45","mod_secs":"1","description":"","is_bookmarked":"0","can_reassign":"1","before_start":"","has_guidelines":"0","materials":[],"warning":"","version_class":"4271","public":"1","is_owner":"1","is_original_owner":"1","created_on":"1479233704","protocol_affiliation":"University of Arizona and University of Chicago","affiliation":"University of Arizona","doi":"dx.doi.org\/10.17504\/protocols.io.gepbtdn","doi_status":"2","changed_fork_steps":"","profile_url":"Bonnie-13y2c433","protocol_img":"https:\/\/s3.amazonaws.com\/pr-journal\/gngbvtw.jpg","profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/ee4bvtw.jpg","full_name":"Bonnie Hurwitz","created_by":"Bonnie Hurwitz","private_link":"89801A6472F8367E5C80675E6D9C43CB","original_img":"1","username":"bonnie-hurwitz","is_retracted":"0","retraction_reason":null,"plos_id":null,"manuscript_citation":null,"journal_name":null,"is_donations_disabled":"0","is_donations_disabled_by_user":"9","item_record_id":213643,"fork_info":[],"compare_forks":[{"protocol_id":"8879","protocol_name":"Building Anvi'o profiles + Interactive Viewer","protocol_name_html":"Building Anvi'o profiles + Interactive Viewer","uri":"building-anvi-o-profiles-interactive-viewer-kwpcxdn","full_name":"James Thornton Jr","affiliation":"Hurwitz Lab ","affiliation_url":"http:\/\/hurwitzlab.org","username":"james-thornton-jr"}],"protocols":[],"groups":[{"group_id":"52","group_uri":"hurwitz-lab","group_name":"Hurwitz Lab","group_logo":"https:\/\/s3.amazonaws.com\/pr-journal\/iscwwe.png","requested_uid":null,"request_flag":null,"my_request":"1"},{"group_id":"224","group_uri":"metafunc-course","group_name":"MetaFunc Course","group_logo":"https:\/\/s3.amazonaws.com\/pr-journal\/emybvtw.jpg","requested_uid":null,"request_flag":null,"my_request":"1"}],"number_of_shared_runs":[],"ownership_history":[],"keywords":"","transfer_to_user":[],"sub_transfer":false,"is_transfer_pending":false,"number_of_bookmarks":"1","collections":[],"tags":[],"archived":0,"sub_authors":[],"sub_protocols_number":0,"can_edit_shared":0,"shared_runs":[],"is_shared_run":0,"is_shared":1,"banner":null,"contact_badges":[{"badge_id":"4","badge_image":"\/img\/badges\/gold.svg","badge_description":"Gold power author!"},{"badge_id":"5","badge_image":"\/img\/badges\/earlyadopter.svg","badge_description":"Early adopter"},{"badge_id":"6","badge_image":"\/img\/badges\/socialbutterfly.svg","badge_description":"Social butterfly"}],"number_of_comments":0,"big_protocol_img":"https:\/\/s3.amazonaws.com\/pr-journal\/gnfbvtw.jpg","big_protocol_img_ofn":"154381764.jpg","is_locked":0,"is_locked_by":false,"authors":"Bonnie Hurwitz and Murat Meren","authors_list":[{"name":"Bonnie Hurwitz and Murat Meren","affiliation":"University of Arizona and University of Chicago","username":null,"profile_image":null}],"user":{"profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/ee4bvtw.jpg","username":"bonnie-hurwitz","full_name":"Bonnie Hurwitz","created_by":"Bonnie Hurwitz"},"access":{"can_view":"1","can_remove":"0","can_add":"0","can_edit":0,"can_publish":0,"can_get_doi":0,"can_share":"0","can_move":"1","can_transfer":"1","can_download":"1","is_locked":"0"},"is_contact_suspended":0,"guidelines":"","status_id":"1","is_research":"1","status_info":null,"steps":[{"id":"191157","is_changed":1,"original_id":"0","is_skipped":"0","is_checked":"0","guid":"7A27F2993D994C42ABA3E71D9EE9589B","previous_guid":null,"previous_id":"0","last_modified":"1479233704","components":[{"component_id":"233481","previous_id":0,"original_id":"0","guid":"408CDE410AC54BF3A686790E28E33BA8","previous_guid":null,"component_type_id":"1","data_id":"0","data":"<p>login to the HPC<\/p>","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>login to the HPC<\/p>"},"is_project":0},{"component_id":"233480","previous_id":"233481","original_id":"0","guid":"0338A3EE00E345AA9314E4443753EB70","previous_guid":"408CDE410AC54BF3A686790E28E33BA8","component_type_id":"6","data_id":"0","data":"Login to the HPC","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Login to the HPC"},"is_project":0},{"component_id":"233482","previous_id":"233480","original_id":"0","guid":"71824C061DCE4CD1AD10C946F117BF30","previous_guid":"0338A3EE00E345AA9314E4443753EB70","component_type_id":"15","data_id":"1440","data":"","order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"ssh hpc\nice","description":"","os_name":"","os_version":"","can_edit":"1"},"is_project":0}],"available_protocols":["8879"]},{"id":"191158","is_changed":1,"original_id":"0","is_skipped":"0","is_checked":"0","guid":"5BC54441EA34414EA49C6F367E248FCE","previous_guid":"7A27F2993D994C42ABA3E71D9EE9589B","previous_id":"191157","last_modified":"1479233704","components":[{"component_id":"233484","previous_id":0,"original_id":"0","guid":"488C9419C31F44B086AA15BE49C7AC0C","previous_guid":null,"component_type_id":"1","data_id":"0","data":"<p>Move to your user directory on bh_class<\/p>","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Move to your user directory on bh_class<\/p>"},"is_project":0},{"component_id":"233483","previous_id":"233484","original_id":"0","guid":"B205F19E2F964D5AA22A1B60757AB9F3","previous_guid":"488C9419C31F44B086AA15BE49C7AC0C","component_type_id":"6","data_id":"0","data":"Move to your user directory","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Move to your user directory"},"is_project":0},{"component_id":"233485","previous_id":"233483","original_id":"0","guid":"A1BC504488E64367B1551C4B1B4F0378","previous_guid":"B205F19E2F964D5AA22A1B60757AB9F3","component_type_id":"15","data_id":"1441","data":"","order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"cd \/rsgrps\/bh_class\/username","description":"","os_name":"","os_version":"","can_edit":"1"},"is_project":0}],"available_protocols":["8879"]},{"id":"191159","is_changed":1,"original_id":"0","is_skipped":"0","is_checked":"0","guid":"D5868DDAF92E4A7897E30F0BC0AF6E08","previous_guid":"5BC54441EA34414EA49C6F367E248FCE","previous_id":"191158","last_modified":"1479236137","components":[{"component_id":"233518","previous_id":0,"original_id":"0","guid":"D7B82E6B68014FD8A3FADE18EC7154D3","previous_guid":null,"component_type_id":"1","data_id":"0","data":"<p>If you are here, you must be done with your contigs database, and have your BAM files ready. Good! It is time to initialize your BAM files, and create an <em>anvi\u2019o profile<\/em> for your samples.<\/p>\n<p>\u00a0<\/p>\n<p>Check and make sure you have \"bam\" files here. \u00a0If not you need to run using a previous protocol.<\/p>","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>If you are here, you must be done with your contigs database, and have your BAM files ready. Good! It is time to initialize your BAM files, and create an <em>anvi\u2019o profile<\/em> for your samples.<\/p>\n<p>\u00a0<\/p>\n<p>Check and make sure you have \"bam\" files here. \u00a0If not you need to run using a previous protocol.<\/p>"},"is_project":0},{"component_id":"233486","previous_id":"233518","original_id":"0","guid":"777C75E24D1C47B785EA222AE40E3C30","previous_guid":"D7B82E6B68014FD8A3FADE18EC7154D3","component_type_id":"6","data_id":"0","data":"Go to your BAM file directory","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Go to your BAM file directory"},"is_project":0},{"component_id":"233519","previous_id":"233486","original_id":"0","guid":"4DFA8E5490694C1099000BEF2200B279","previous_guid":"777C75E24D1C47B785EA222AE40E3C30","component_type_id":"15","data_id":"1442","data":"","order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"cd \/rsgrps\/bh_class\/username\/read_recruit\/bam\nls *.bam","description":"","os_name":"","os_version":"","can_edit":"1"},"is_project":0}],"available_protocols":["8879"]},{"id":"191176","is_changed":1,"original_id":"0","is_skipped":"0","is_checked":"0","guid":"6FE8198F47694A8A8B2CB7F239BD6EE7","previous_guid":"D5868DDAF92E4A7897E30F0BC0AF6E08","previous_id":"191159","last_modified":"1479236137","components":[{"component_id":"233522","previous_id":0,"original_id":"0","guid":"021049026C864F9D87E1926831F55553","previous_guid":null,"component_type_id":"1","data_id":"0","data":"<p>Now we need to move all of the bam files from the HPC to our personal computers to input into Anvi'o. \u00a0Go to the Anvi'o terminal on your computer, where you created the contigs database in the previous protocol.<\/p>","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Now we need to move all of the bam files from the HPC to our personal computers to input into Anvi'o. \u00a0Go to the Anvi'o terminal on your computer, where you created the contigs database in the previous protocol.<\/p>"},"is_project":0},{"component_id":"233521","previous_id":"233522","original_id":"0","guid":"2DFACE7499E54926845EE8FBD0AABA96","previous_guid":"021049026C864F9D87E1926831F55553","component_type_id":"6","data_id":"0","data":"Go to the Anvi'o terminal on your computer","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Go to the Anvi'o terminal on your computer"},"is_project":0}],"available_protocols":["8879"]},{"id":"191177","is_changed":1,"original_id":"0","is_skipped":"0","is_checked":"0","guid":"6E3E4A4B67A44B0D82FD35F37AE0765E","previous_guid":"6FE8198F47694A8A8B2CB7F239BD6EE7","previous_id":"191176","last_modified":"1479236137","components":[{"component_id":"233524","previous_id":0,"original_id":"0","guid":"87129A2C2B094EF48111FF5D1013747C","previous_guid":null,"component_type_id":"1","data_id":"0","data":"<p>Download the bam files form the HPC to your computer<\/p>","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Download the bam files form the HPC to your computer<\/p>"},"is_project":0},{"component_id":"233523","previous_id":"233524","original_id":"0","guid":"7E7EB01B2F6F43F49ED879889DAB009E","previous_guid":"87129A2C2B094EF48111FF5D1013747C","component_type_id":"6","data_id":"0","data":"Download the bam files","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Download the bam files"},"is_project":0},{"component_id":"233525","previous_id":"233523","original_id":"0","guid":"8E2563A66D7C493795E05334ADB23C79","previous_guid":"7E7EB01B2F6F43F49ED879889DAB009E","component_type_id":"15","data_id":"1443","data":"","order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"scp sftp.hpc.arizona.edu:\/rsgrps\/bh_class\/username\/read_recruit\/bam\/*bam .","description":"Notice the \".' at the end of the line, that means download to the current directory.","os_name":"","os_version":"","can_edit":"1"},"is_project":0}],"available_protocols":["8879"]},{"id":"191178","is_changed":1,"original_id":"0","is_skipped":"0","is_checked":"0","guid":"CD6D2FB9A09A4D36BB3EC186AEC0C986","previous_guid":"6E3E4A4B67A44B0D82FD35F37AE0765E","previous_id":"191177","last_modified":"1479236137","components":[{"component_id":"233527","previous_id":0,"original_id":"0","guid":"A7DDB43FB1464571A6466862E24A0127","previous_guid":null,"component_type_id":"1","data_id":"0","data":"<p>To help with downstream processing. \u00a0Create a list of the samples you have. \u00a0We will call this file:\u00a0<\/p>\n<pre><code class=\"language-bash\" data-lang=\"bash\">SAMPLE_IDs<\/code><\/pre>","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>To help with downstream processing. \u00a0Create a list of the samples you have. \u00a0We will call this file:\u00a0<\/p>\n<pre><code class=\"language-bash\" data-lang=\"bash\">SAMPLE_IDs<\/code><\/pre>"},"is_project":0},{"component_id":"233526","previous_id":"233527","original_id":"0","guid":"5155B11DC68B4C998B3C1BCC63B69D56","previous_guid":"A7DDB43FB1464571A6466862E24A0127","component_type_id":"6","data_id":"0","data":"Create a list of samples for downstream processing","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Create a list of samples for downstream processing"},"is_project":0},{"component_id":"233528","previous_id":"233526","original_id":"0","guid":"F61225F71AC14448B44BD9F631666E47","previous_guid":"5155B11DC68B4C998B3C1BCC63B69D56","component_type_id":"15","data_id":"1444","data":"","order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"ls *bam | sed 's\/\\.bam\/\/' > SAMPLE_IDs","description":"My SAMPLE_IDs contains:\nSRR1647045\nSRR1647046\nSRR1647047\nSRR1647048\nSRR1647049\nSRR1647141\nSRR1647142\nSRR1647143","os_name":"","os_version":"","can_edit":"1"},"is_project":0}],"available_protocols":["8879"]},{"id":"191179","is_changed":1,"original_id":"0","is_skipped":"0","is_checked":"0","guid":"9B88F9865F264AB7B62635DA7E0C6EDF","previous_guid":"CD6D2FB9A09A4D36BB3EC186AEC0C986","previous_id":"191178","last_modified":"1480456775","components":[{"component_id":"233530","previous_id":0,"original_id":"0","guid":"2B113256CE9745EDB19A82A2739CA62E","previous_guid":null,"component_type_id":"1","data_id":"0","data":"<p>Anvi\u2019o requires BAM files to be sorted and indexed. In most cases the BAM files you get back from your mapping software will not be sorted and indexed. \u00a0You need to initialize your BAM files:<\/p>","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Anvi\u2019o requires BAM files to be sorted and indexed. In most cases the BAM files you get back from your mapping software will not be sorted and indexed. \u00a0You need to initialize your BAM files:<\/p>"},"is_project":0},{"component_id":"233529","previous_id":"233530","original_id":"0","guid":"822F98661A1C4C1CA4839BFE59593B47","previous_guid":"2B113256CE9745EDB19A82A2739CA62E","component_type_id":"6","data_id":"0","data":"Index the bam files","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Index the bam files"},"is_project":0},{"component_id":"234322","previous_id":"233529","original_id":"0","guid":"3981F683089F403F9C0A619AB4B6DB85","previous_guid":"822F98661A1C4C1CA4839BFE59593B47","component_type_id":"13","data_id":"13462","data":"","order_id":"2","name":"Comment","data_by_id":"1","type_id":"13","source_data":{"annotation_id":"13462","thread_id":"13462","id":"13462","thread_title":"Annotation on step 7 of MG_HW11: Building Anvi'o profiles","uri":"annotation-on-step-7-of-mghw11-building-anvio-profiles","thread_uri":"annotation-on-step-7-of-mghw11-building-anvio-profiles","step_id":"191179","protocol_uri":"mg-hw11-building-anvi-o-profiles-gepbtdn","protocol_name":"MG_HW11: Building Anvi'o profiles","protocol_name_html":"MG_HW11: Building Anvi'o profiles","annotation":"<p>Is \u00a0( ` ) specific to the bash command line? I don't think I've seen it yet in perl6.\u00a0<\/p>","thread_text":"<p>Is \u00a0( ` ) specific to the bash command line? I don't think I've seen it yet in perl6.\u00a0<\/p>","body":"<p>Is \u00a0( ` ) specific to the bash command line? I don't think I've seen it yet in perl6.\u00a0<\/p>","is_private":"0","public_protocol":"1","can_edit":0,"can_delete":"0","show_name":"1","created_date":"1479741859","created_on":"1479741859","modified_on":null,"last_updated":null,"profile_image":"\/img\/avatars\/006.png","full_name":"Amy Hudson","affiliation":null,"username":"amy-hudson","email":"bhurwitz@email.arizona.edu","pa_useranme":"bonnie-hurwitz","comments":[]},"is_project":0},{"component_id":"234373","previous_id":"234322","original_id":"0","guid":"58849EE06F8347268D4480818A3F5797","previous_guid":"3981F683089F403F9C0A619AB4B6DB85","component_type_id":"13","data_id":"13471","data":"","order_id":"3","name":"Comment","data_by_id":"1","type_id":"13","source_data":{"annotation_id":"13471","thread_id":"13471","id":"13471","thread_title":"Annotation on step 7 of MG_HW11: Building Anvi'o profiles","uri":"annotation-on-step-7-of-mghw11-building-anvio-profiles2","thread_uri":"annotation-on-step-7-of-mghw11-building-anvio-profiles2","step_id":"191179","protocol_uri":"mg-hw11-building-anvi-o-profiles-gepbtdn","protocol_name":"MG_HW11: Building Anvi'o profiles","protocol_name_html":"MG_HW11: Building Anvi'o profiles","annotation":"<p>backticks are in perl5 and essentially mean execute this \"command\" to get some sort of input. \u00a0In perl6, there is the concept of processes that are \"run\" (that is the actual command). \u00a0You can see examples in all of Ken's test suite programs.\u00a0<\/p>","thread_text":"<p>backticks are in perl5 and essentially mean execute this \"command\" to get some sort of input. \u00a0In perl6, there is the concept of processes that are \"run\" (that is the actual command). \u00a0You can see examples in all of Ken's test suite programs.\u00a0<\/p>","body":"<p>backticks are in perl5 and essentially mean execute this \"command\" to get some sort of input. \u00a0In perl6, there is the concept of processes that are \"run\" (that is the actual command). \u00a0You can see examples in all of Ken's test suite programs.\u00a0<\/p>","is_private":"0","public_protocol":"1","can_edit":0,"can_delete":"0","show_name":"0","created_date":"1479751349","created_on":"1479751349","modified_on":null,"last_updated":null,"profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/ee4bvtw.jpg","full_name":"Bonnie Hurwitz","affiliation":"University of Arizona","username":"bonnie-hurwitz","email":"bhurwitz@email.arizona.edu","pa_useranme":"bonnie-hurwitz","comments":[]},"is_project":0},{"component_id":"234826","previous_id":"234373","original_id":"0","guid":"862DD10BE71845ECB0A369AE5AA7CE81","previous_guid":"58849EE06F8347268D4480818A3F5797","component_type_id":"13","data_id":"13520","data":"","order_id":"4","name":"Comment","data_by_id":"1","type_id":"13","source_data":{"annotation_id":"13520","thread_id":"13520","id":"13520","thread_title":"Annotation on step 7 of MG_HW11: Building Anvi'o profiles","uri":"annotation-on-step-7-of-mghw11-building-anvio-profiles3","thread_uri":"annotation-on-step-7-of-mghw11-building-anvio-profiles3","step_id":"191179","protocol_uri":"mg-hw11-building-anvi-o-profiles-gepbtdn","protocol_name":"MG_HW11: Building Anvi'o profiles","protocol_name_html":"MG_HW11: Building Anvi'o profiles","annotation":"<p>When I run this step it gives me an error of too few arguments.<\/p>\n<p>usage: anvi-init-bam [-h] [-o FILE_PATH] BAM_FILE<\/p>","thread_text":"<p>When I run this step it gives me an error of too few arguments.<\/p>\n<p>usage: anvi-init-bam [-h] [-o FILE_PATH] BAM_FILE<\/p>","body":"<p>When I run this step it gives me an error of too few arguments.<\/p>\n<p>usage: anvi-init-bam [-h] [-o FILE_PATH] BAM_FILE<\/p>","is_private":"0","public_protocol":"1","can_edit":0,"can_delete":"0","show_name":"1","created_date":"1479833551","created_on":"1479833551","modified_on":null,"last_updated":null,"profile_image":"\/img\/avatars\/009.png","full_name":"Emma Skidmore","affiliation":null,"username":"emma-skidmore","email":"bhurwitz@email.arizona.edu","pa_useranme":"bonnie-hurwitz","comments":[]},"is_project":0},{"component_id":"237779","previous_id":"234826","original_id":"0","guid":"7A80684B5E89498E98A08B98B78914E2","previous_guid":"862DD10BE71845ECB0A369AE5AA7CE81","component_type_id":"13","data_id":"13755","data":"","order_id":"5","name":"Comment","data_by_id":"1","type_id":"13","source_data":{"annotation_id":"13755","thread_id":"13755","id":"13755","thread_title":"Annotation on step 7 of MG_HW11: Building Anvi'o profiles","uri":"annotation-on-step-7-of-mghw11-building-anvio-profiles4","thread_uri":"annotation-on-step-7-of-mghw11-building-anvio-profiles4","step_id":"191179","protocol_uri":"mg-hw11-building-anvi-o-profiles-gepbtdn","protocol_name":"MG_HW11: Building Anvi'o profiles","protocol_name_html":"MG_HW11: Building Anvi'o profiles","annotation":"<p><strong>PC users<\/strong><\/p>\n<p>\u00a0<\/p>\n<p>When you scp your files using Cygwin, move those files to a new folder in Documents. Then in docker quickstart terminal navigate to that folder and do pwd to get the full path. Then to launch Anvio:<\/p>\n<p>\u00a0<\/p>\n<p>docker run --rm -v \/path\/to\/files:\/my_data -p 8080:8080 -it meren\/anvio:latest<\/p>\n<p>\u00a0<\/p>\n<p>Additional troubleshooting- if having issues do docker ps and see if there are existing sessions. If so do docker kill\u00a0[session id]<\/p>","thread_text":"<p><strong>PC users<\/strong><\/p>\n<p>\u00a0<\/p>\n<p>When you scp your files using Cygwin, move those files to a new folder in Documents. Then in docker quickstart terminal navigate to that folder and do pwd to get the full path. Then to launch Anvio:<\/p>\n<p>\u00a0<\/p>\n<p>docker run --rm -v \/path\/to\/files:\/my_data -p 8080:8080 -it meren\/anvio:latest<\/p>\n<p>\u00a0<\/p>\n<p>Additional troubleshooting- if having issues do docker ps and see if there are existing sessions. If so do docker kill\u00a0[session id]<\/p>","body":"<p><strong>PC users<\/strong><\/p>\n<p>\u00a0<\/p>\n<p>When you scp your files using Cygwin, move those files to a new folder in Documents. Then in docker quickstart terminal navigate to that folder and do pwd to get the full path. Then to launch Anvio:<\/p>\n<p>\u00a0<\/p>\n<p>docker run --rm -v \/path\/to\/files:\/my_data -p 8080:8080 -it meren\/anvio:latest<\/p>\n<p>\u00a0<\/p>\n<p>Additional troubleshooting- if having issues do docker ps and see if there are existing sessions. If so do docker kill\u00a0[session id]<\/p>","is_private":"0","public_protocol":"1","can_edit":0,"can_delete":"0","show_name":"1","created_date":"1480456775","created_on":"1480456775","modified_on":null,"last_updated":null,"profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/67c2w6.jpg","full_name":"James Thornton Jr","affiliation":"Hurwitz Lab ","username":"james-thornton-jr","email":"bhurwitz@email.arizona.edu","pa_useranme":"bonnie-hurwitz","comments":[]},"is_project":0},{"component_id":"233531","previous_id":"237779","original_id":"0","guid":"9F3851A38A7A4870BE21360498B971DA","previous_guid":"7A80684B5E89498E98A08B98B78914E2","component_type_id":"15","data_id":"1445","data":"","order_id":"6","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"for sample in `cat SAMPLE_IDs`; do anvi-init-bam $sample.bam -o $sample.i.bam; done","description":"","os_name":"","os_version":"","can_edit":"1"},"is_project":0}],"available_protocols":["8879"]},{"id":"191180","is_changed":1,"original_id":"0","is_skipped":"0","is_checked":"0","guid":"1D43B3C62B8645B3A25C266916D42449","previous_guid":"9B88F9865F264AB7B62635DA7E0C6EDF","previous_id":"191179","last_modified":"1479236545","components":[{"component_id":"233533","previous_id":0,"original_id":"0","guid":"92B4ABB935FF45419B40453B4B37D5B7","previous_guid":null,"component_type_id":"1","data_id":"0","data":"<p>In contrast to the contigs database, an anvi\u2019o profile database stores sample-specific information about contigs. Profiling a BAM file with anvi\u2019o using <code class=\"highlighter-rouge\">anvi-profile<\/code> creates a single profile that reports properties for each contig in a single sample based on mapping results. Each profile database links to a contigs database, and anvi\u2019o can merge single profiles that link to the same contigs database into merged profiles (which will be covered later).<\/p>\n<p>In other words, the profiling step makes sense of each BAM file separately by utilizing the information stored in the contigs database. It is one of the most critical (and also most complex and computationally demanding) steps of the metagenomic workflow.<\/p>\n<p>The simplest form of the command that starts the profiling looks like this:<\/p>\n<pre><code class=\"language-bash\" data-lang=\"bash\">anvi-profile -i SAMPLE-01.bam -c contigs.db<br \/><br \/><\/code><\/pre>\n<p>When you run <code class=\"highlighter-rouge\">anvi-profile<\/code> it will:<\/p>\n<ul>\n<li>\n<p>Process each contig that is longer than <code class=\"highlighter-rouge\">2,500 nts<\/code> by default. You can change this value by using <code class=\"highlighter-rouge\">--min-contig-length<\/code> flag. But you should remember that the minimum contig length should be long enough for tetra-nucleotide frequencies to have enough meaningful signal. There is no way to define a golden number for minimum length that would be applicable to genomes found in all environments. We empirically chose the default to be 2,500, and have been happy with it. You are welcome to experiment, but we advise you to never go below 1,000. You also should remember that the lower you go, the more time it will take to analyze all contigs. You can use \u2013list-contigs parameter to have an idea how many contigs would be discarded for a given <code class=\"highlighter-rouge\">--min-contig-length<\/code> parameter. If you have an arbitrary list of contigs you want to profile, you can use the flag <code class=\"highlighter-rouge\">--contigs-of-interest<\/code> to ignore the rest.<\/p>\n<\/li>\n<li>\n<p>Make up some output directory, and sample names for you. We encourage you to use <code class=\"highlighter-rouge\">--output-dir<\/code> parameter to tell anvi\u2019o where to store your output files, and <code class=\"highlighter-rouge\">--sample-name<\/code> parameter to give a meaningful, preferably not-so-long sample name to be stored in the profile database. This name will appear almost everywhere, and changing it later will be a pain.<\/p>\n<\/li>\n<\/ul>\n<p>Processing of contigs will include:<\/p>\n<ul>\n<li>\n<p>The recovery of mean coverage, standard deviation of coverage, and the average coverage for the inner quartiles (Q1 and Q3) for a given contig. Profiling will also create an HD5 file where the coverage value for <em>each nucleotide position<\/em> will be kept for each contig for later use. While the profiling recovers all the coverage information, it can discard some contigs with very low coverage declared by <code class=\"highlighter-rouge\">--min-mean-coverage<\/code> parameter (the default is 0, so everything is kept).<\/p>\n<\/li>\n<li>\n<p>The characterization of single-nucleotide variants (SNVs) for every nucleotide position, unless you use <code class=\"highlighter-rouge\">--skip-SNV-profiling<\/code> flag to skip it altogether (you will definitely gain a lot of time if you do that, but then, you know, maybe you shouldn\u2019t). By default, the profiler will not pay attention to any nucleotide position with less than <code class=\"highlighter-rouge\">10X<\/code> coverage. You can change this behavior via <code class=\"highlighter-rouge\">--min-coverage-for-variability<\/code> flag. Anvi\u2019o uses a conservative heuristic to not report every position with variation: i.e., if you have 200X coverage in a position, and only one of the bases disagree with the reference or consensus nucleotide, it is very likely that this is due to a mapping or sequencing error, and anvi\u2019o tries to avoid those positions. If you want anvi\u2019o to report everything, you can use <code class=\"highlighter-rouge\">--report-variability-full<\/code> flag. We encourage you to experiment with it, maybe with a small set of contigs, but in general you should refrain reporting everything (it will make your databases grow larger and larger, and everything will take longer for -99% of the time- no good reason).<\/p>\n<\/li>\n<li>\n<p>Finally, because single profiles are rarely used for genome binning or visualization, and since clustering step increases the profiling runtime for no good reason, the default behavior of profiling is to <em>not cluster<\/em> contigs automatically. However, if you are planning to work with single profiles, and if you would like to visualize them using the interactive interface without any merging, you can use <code class=\"highlighter-rouge\">--cluster-contigs<\/code> flag to initiate clustering of contigs. In this case anvi\u2019o would use <a href=\"https:\/\/github.com\/meren\/anvio\/tree\/master\/anvio\/data\/clusterconfigs\/single\" target=\"_blank\">default clustering configurations for single profiles<\/a>, and store resulting trees in the profile database. You <em>do not<\/em> need to use this flag if you are planning to merge multiple profiles (i.e., if you have more than one BAM files to work with, which will be the case for most people).<\/p>\n<\/li>\n<\/ul>\n<p>\u00a0<\/p>\n<pre>\u00a0<\/pre>","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>In contrast to the contigs database, an anvi\u2019o profile database stores sample-specific information about contigs. Profiling a BAM file with anvi\u2019o using <code class=\"highlighter-rouge\">anvi-profile<\/code> creates a single profile that reports properties for each contig in a single sample based on mapping results. Each profile database links to a contigs database, and anvi\u2019o can merge single profiles that link to the same contigs database into merged profiles (which will be covered later).<\/p>\n<p>In other words, the profiling step makes sense of each BAM file separately by utilizing the information stored in the contigs database. It is one of the most critical (and also most complex and computationally demanding) steps of the metagenomic workflow.<\/p>\n<p>The simplest form of the command that starts the profiling looks like this:<\/p>\n<pre><code class=\"language-bash\" data-lang=\"bash\">anvi-profile -i SAMPLE-01.bam -c contigs.db<br \/><br \/><\/code><\/pre>\n<p>When you run <code class=\"highlighter-rouge\">anvi-profile<\/code> it will:<\/p>\n<ul>\n<li>\n<p>Process each contig that is longer than <code class=\"highlighter-rouge\">2,500 nts<\/code> by default. You can change this value by using <code class=\"highlighter-rouge\">--min-contig-length<\/code> flag. But you should remember that the minimum contig length should be long enough for tetra-nucleotide frequencies to have enough meaningful signal. There is no way to define a golden number for minimum length that would be applicable to genomes found in all environments. We empirically chose the default to be 2,500, and have been happy with it. You are welcome to experiment, but we advise you to never go below 1,000. You also should remember that the lower you go, the more time it will take to analyze all contigs. You can use \u2013list-contigs parameter to have an idea how many contigs would be discarded for a given <code class=\"highlighter-rouge\">--min-contig-length<\/code> parameter. If you have an arbitrary list of contigs you want to profile, you can use the flag <code class=\"highlighter-rouge\">--contigs-of-interest<\/code> to ignore the rest.<\/p>\n<\/li>\n<li>\n<p>Make up some output directory, and sample names for you. We encourage you to use <code class=\"highlighter-rouge\">--output-dir<\/code> parameter to tell anvi\u2019o where to store your output files, and <code class=\"highlighter-rouge\">--sample-name<\/code> parameter to give a meaningful, preferably not-so-long sample name to be stored in the profile database. This name will appear almost everywhere, and changing it later will be a pain.<\/p>\n<\/li>\n<\/ul>\n<p>Processing of contigs will include:<\/p>\n<ul>\n<li>\n<p>The recovery of mean coverage, standard deviation of coverage, and the average coverage for the inner quartiles (Q1 and Q3) for a given contig. Profiling will also create an HD5 file where the coverage value for <em>each nucleotide position<\/em> will be kept for each contig for later use. While the profiling recovers all the coverage information, it can discard some contigs with very low coverage declared by <code class=\"highlighter-rouge\">--min-mean-coverage<\/code> parameter (the default is 0, so everything is kept).<\/p>\n<\/li>\n<li>\n<p>The characterization of single-nucleotide variants (SNVs) for every nucleotide position, unless you use <code class=\"highlighter-rouge\">--skip-SNV-profiling<\/code> flag to skip it altogether (you will definitely gain a lot of time if you do that, but then, you know, maybe you shouldn\u2019t). By default, the profiler will not pay attention to any nucleotide position with less than <code class=\"highlighter-rouge\">10X<\/code> coverage. You can change this behavior via <code class=\"highlighter-rouge\">--min-coverage-for-variability<\/code> flag. Anvi\u2019o uses a conservative heuristic to not report every position with variation: i.e., if you have 200X coverage in a position, and only one of the bases disagree with the reference or consensus nucleotide, it is very likely that this is due to a mapping or sequencing error, and anvi\u2019o tries to avoid those positions. If you want anvi\u2019o to report everything, you can use <code class=\"highlighter-rouge\">--report-variability-full<\/code> flag. We encourage you to experiment with it, maybe with a small set of contigs, but in general you should refrain reporting everything (it will make your databases grow larger and larger, and everything will take longer for -99% of the time- no good reason).<\/p>\n<\/li>\n<li>\n<p>Finally, because single profiles are rarely used for genome binning or visualization, and since clustering step increases the profiling runtime for no good reason, the default behavior of profiling is to <em>not cluster<\/em> contigs automatically. However, if you are planning to work with single profiles, and if you would like to visualize them using the interactive interface without any merging, you can use <code class=\"highlighter-rouge\">--cluster-contigs<\/code> flag to initiate clustering of contigs. In this case anvi\u2019o would use <a href=\"https:\/\/github.com\/meren\/anvio\/tree\/master\/anvio\/data\/clusterconfigs\/single\" target=\"_blank\">default clustering configurations for single profiles<\/a>, and store resulting trees in the profile database. You <em>do not<\/em> need to use this flag if you are planning to merge multiple profiles (i.e., if you have more than one BAM files to work with, which will be the case for most people).<\/p>\n<\/li>\n<\/ul>\n<p>\u00a0<\/p>\n<pre>\u00a0<\/pre>"},"is_project":0},{"component_id":"233532","previous_id":"233533","original_id":"0","guid":"1E6E18B4E3E143318FE4518640DC6D26","previous_guid":"92B4ABB935FF45419B40453B4B37D5B7","component_type_id":"6","data_id":"0","data":"Creating an anvi\u2019o profile database","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Creating an anvi\u2019o profile database"},"is_project":0},{"component_id":"233534","previous_id":"233532","original_id":"0","guid":"13CB653A3D904407A390A827C3140750","previous_guid":"1E6E18B4E3E143318FE4518640DC6D26","component_type_id":"15","data_id":"1446","data":"","order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"anvi-profile -i SRR1647045.i.bam -c contigs.db --output-dir Pa --sample-name Pa","description":"Look up your sample name in the original sample to metadata table from your report.  We will need to run this step on each of the samples individually, and use the appropriate names.\n\nRun this step 8x, once for each sample.","os_name":"","os_version":"","can_edit":"1"},"is_project":0}],"available_protocols":["8879"]},{"id":"191184","is_changed":1,"original_id":"0","is_skipped":"0","is_checked":"0","guid":"3E3D1607DB5642D780C07DD2E459B72E","previous_guid":"1D43B3C62B8645B3A25C266916D42449","previous_id":"191180","last_modified":"1479236470","components":[{"component_id":"233542","previous_id":0,"original_id":"0","guid":"4BEC176AB61744D7A52C50B3EAFE48A0","previous_guid":null,"component_type_id":"1","data_id":"0","data":"<p>You have all your BAM files profiled! Did it take forever? Well, sorry about that. But now you are golden.<\/p>\n<p>\u00a0<\/p>\n<p>The next step in the workflow is to to merge all anvi\u2019o profiles.<\/p>\n<p>\u00a0<\/p>\n<p>When you run <code class=\"highlighter-rouge\">anvi-merge<\/code>,<\/p>\n<ul>\n<li>\n<p>It will merge everything and create a merged profile (yes, thanks, captain obvious),<\/p>\n<\/li>\n<li>\n<p>It will attempt to create multiple clusterings of your splits using the default <em>clustering configurations<\/em>. Please take a quick look at the default <a href=\"https:\/\/github.com\/meren\/anvio\/tree\/master\/anvio\/data\/clusterconfigs\/merged\" target=\"_blank\">clustering configurations for merged profiles<\/a> \u2013they are pretty easy to understand. By default, anvi\u2019o will use euclidean distance and ward linkage algorithm to organize contigs, however, you can change those default values with <code class=\"highlighter-rouge\">--distance<\/code>and <code class=\"highlighter-rouge\">--linkage<\/code> parameters (available options for distance metrics and linkage algorithms are listed in <a href=\"https:\/\/github.com\/meren\/anvio\/releases\/tag\/v2.0.2\" target=\"_blank\">this release note<\/a>). Hierarchical clustering results are necessary for comprehensive visualization, and human guided binning, therefore, by default, anvi\u2019o attempts to cluster your contigs using default configurations. You can skip this step by using <code class=\"highlighter-rouge\">--skip-hierarchical-clustering\u00a0<\/code>flag. But even if you don\u2019t skip it, anvi\u2019o will skip it for you if you have more than 20,000 splits, since the computational complexity of this process will get less and less feasible with increasing number of splits. That\u2019s OK, though. There are many ways to recover from this. On the other hand, if you want to teach everyone who is the boss, you can force anvi\u2019o try to cluster your splits regardless of how many of them are there by using <code class=\"highlighter-rouge\">--enforce-hierarchical-clustering<\/code> flag. You have the power.<\/p>\n<\/li>\n<li>\n<p>It will attempt to run <a href=\"http:\/\/www.nature.com\/nmeth\/journal\/v11\/n11\/full\/nmeth.3103.html\" target=\"_blank\">CONCOCT<\/a> to bin your splits automatically. CONCOCT can deal with hundreds of thousands of splits. Which means, regardless of the number of splits you have, and even if you skip the hierarchical clustering step, there will be a collection in the merged profile database (which will be called <code class=\"highlighter-rouge\">CONCOCT<\/code>) with genome bins identified by CONCOCT in an automatic manner. From which you can generate a summary, or run the interactive interface with <code class=\"highlighter-rouge\">--collection-name CONCOCT<\/code> parameter (more later on these). But if you would like to skip default CONCOCT clustering, you can use <code class=\"highlighter-rouge\">--skip-concoct-binning<\/code> flag.<\/p>\n<\/li>\n<\/ul>\n<p>\u00a0<\/p>","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>You have all your BAM files profiled! Did it take forever? Well, sorry about that. But now you are golden.<\/p>\n<p>\u00a0<\/p>\n<p>The next step in the workflow is to to merge all anvi\u2019o profiles.<\/p>\n<p>\u00a0<\/p>\n<p>When you run <code class=\"highlighter-rouge\">anvi-merge<\/code>,<\/p>\n<ul>\n<li>\n<p>It will merge everything and create a merged profile (yes, thanks, captain obvious),<\/p>\n<\/li>\n<li>\n<p>It will attempt to create multiple clusterings of your splits using the default <em>clustering configurations<\/em>. Please take a quick look at the default <a href=\"https:\/\/github.com\/meren\/anvio\/tree\/master\/anvio\/data\/clusterconfigs\/merged\" target=\"_blank\">clustering configurations for merged profiles<\/a> \u2013they are pretty easy to understand. By default, anvi\u2019o will use euclidean distance and ward linkage algorithm to organize contigs, however, you can change those default values with <code class=\"highlighter-rouge\">--distance<\/code>and <code class=\"highlighter-rouge\">--linkage<\/code> parameters (available options for distance metrics and linkage algorithms are listed in <a href=\"https:\/\/github.com\/meren\/anvio\/releases\/tag\/v2.0.2\" target=\"_blank\">this release note<\/a>). Hierarchical clustering results are necessary for comprehensive visualization, and human guided binning, therefore, by default, anvi\u2019o attempts to cluster your contigs using default configurations. You can skip this step by using <code class=\"highlighter-rouge\">--skip-hierarchical-clustering\u00a0<\/code>flag. But even if you don\u2019t skip it, anvi\u2019o will skip it for you if you have more than 20,000 splits, since the computational complexity of this process will get less and less feasible with increasing number of splits. That\u2019s OK, though. There are many ways to recover from this. On the other hand, if you want to teach everyone who is the boss, you can force anvi\u2019o try to cluster your splits regardless of how many of them are there by using <code class=\"highlighter-rouge\">--enforce-hierarchical-clustering<\/code> flag. You have the power.<\/p>\n<\/li>\n<li>\n<p>It will attempt to run <a href=\"http:\/\/www.nature.com\/nmeth\/journal\/v11\/n11\/full\/nmeth.3103.html\" target=\"_blank\">CONCOCT<\/a> to bin your splits automatically. CONCOCT can deal with hundreds of thousands of splits. Which means, regardless of the number of splits you have, and even if you skip the hierarchical clustering step, there will be a collection in the merged profile database (which will be called <code class=\"highlighter-rouge\">CONCOCT<\/code>) with genome bins identified by CONCOCT in an automatic manner. From which you can generate a summary, or run the interactive interface with <code class=\"highlighter-rouge\">--collection-name CONCOCT<\/code> parameter (more later on these). But if you would like to skip default CONCOCT clustering, you can use <code class=\"highlighter-rouge\">--skip-concoct-binning<\/code> flag.<\/p>\n<\/li>\n<\/ul>\n<p>\u00a0<\/p>"},"is_project":0},{"component_id":"233541","previous_id":"233542","original_id":"0","guid":"E48B2B1C0FE744599B29C8D4DE2DB9CA","previous_guid":"4BEC176AB61744D7A52C50B3EAFE48A0","component_type_id":"6","data_id":"0","data":"Merge all anvi'o profiles","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Merge all anvi'o profiles"},"is_project":0},{"component_id":"233543","previous_id":"233541","original_id":"0","guid":"B2D8FDC160154F5DB17C0BA774052464","previous_guid":"E48B2B1C0FE744599B29C8D4DE2DB9CA","component_type_id":"15","data_id":"1447","data":"","order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"anvi-merge *\/RUNINFO.cp -o SAMPLES-MERGED -c contigs.db","description":"","os_name":"","os_version":"","can_edit":"1"},"is_project":0}],"available_protocols":["8879"]}]}