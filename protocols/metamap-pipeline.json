{"uri":"metamap-pipeline-msec6be","version_id":"0","protocol_name":"MetaMap pipeline","protocol_name_html":"MetaMap pipeline","is_prepublished":"0","can_edit":"0","parent_id":null,"api_version":"1","is_new_mode":"0","last_modified":"1522231932","type_id":"1","link":null,"fork_id":"","public_fork_note":"","number_of_steps":"2","has_versions":"1","first_published_date":"1517836140","publish_date":"2018-02-05 13:09:00","documents":null,"have_protocol_in_step":"0","is_protocol_in_step":"0","vendor_name":"Contributed by users","vendor_link":"https:\/\/www.protocols.io","vendor_logo":"\/img\/vendors\/1.png","mod_mins":"-45","mod_secs":"1","description":"<p><span style=\"font-weight: 400;\">We developed a bioinformatic two-step pipeline, so called \"MetaMap\" pipeline,\u00a0 to screen human RNA-seq datasets for the presence of microbial and viral reads by re-inspecting the non-human-mapping read fraction.<\/span><\/p>\n<p><span style=\"font-weight: 400;\">In the first step, reads are aligned against the human genome with STAR (version 2.5.2) and subsequently\u00a0<\/span><span style=\"font-weight: 400;\">the non-human-mapping reads are subjected to metatgenomic classification using CLARK-S (version 1.2.3).<\/span><\/p>","is_bookmarked":"0","can_reassign":"1","before_start":null,"has_guidelines":"0","materials":[],"warning":null,"version_class":"9766","public":"1","is_owner":"1","is_original_owner":"1","created_on":"1516637568","protocol_affiliation":"Helmholtz-Zentrum M\u00fcnchen","affiliation":"Helmholtz-Zentrum M\u00fcnchen","doi":"dx.doi.org\/10.17504\/protocols.io.msec6be","doi_status":"2","changed_fork_steps":null,"profile_url":"Sebastian-y2y274z2r2","protocol_img":"https:\/\/www.protocols.io\/img\/default_protocol.png","profile_image":"\/img\/avatars\/008.png","full_name":"Sebastian Karg","created_by":"Sebastian Karg","private_link":"834C49C613B5453285F4B3C832BBBBB4","original_img":"1","username":"sebastian-karg","is_retracted":"0","retraction_reason":null,"plos_id":null,"manuscript_citation":"<p># Citation of GigaScience Manuscript<\/p>","journal_name":null,"is_donations_disabled":"0","is_donations_disabled_by_user":"9","item_record_id":285185,"fork_info":[],"compare_forks":[],"protocols":[],"groups":[],"number_of_shared_runs":[],"ownership_history":[],"keywords":"CLARK, STAR, Metafeatures, human RNA-seq data","transfer_to_user":[],"sub_transfer":false,"is_transfer_pending":false,"number_of_bookmarks":"0","collections":[],"tags":[],"archived":0,"sub_authors":[],"sub_protocols_number":0,"can_edit_shared":0,"shared_runs":[],"is_shared_run":0,"is_shared":1,"banner":null,"contact_badges":[{"badge_id":"2","badge_image":"\/img\/badges\/bronze.svg","badge_description":"Author!"}],"number_of_comments":0,"is_locked":0,"is_locked_by":false,"authors":"Lukas Simon,Sebastian Karg","authors_list":[{"name":"Lukas Simon","affiliation":"Helmholtz-Zentrum M\u00fcnchen","username":"lukas-simon","profile_image":"\/img\/avatars\/018.png"},{"name":"Sebastian Karg","affiliation":"Helmholtz-Zentrum M\u00fcnchen","username":"sebastian-karg","profile_image":"\/img\/avatars\/008.png"}],"user":{"profile_image":"\/img\/avatars\/008.png","username":"sebastian-karg","full_name":"Sebastian Karg","created_by":"Sebastian Karg"},"access":{"can_view":"1","can_remove":"0","can_add":"0","can_edit":0,"can_publish":0,"can_get_doi":0,"can_share":"0","can_move":"1","can_transfer":"1","can_download":"1","is_locked":"0"},"is_contact_suspended":0,"guidelines":null,"status_id":"2","is_research":"1","status_info":"We are still developing and optimizing this protocol","steps":[{"id":"605968","is_changed":0,"original_id":"0","is_skipped":"0","is_checked":"0","guid":"52B75C9602E84E849DFD594ED91BEE5B","previous_guid":null,"previous_id":"0","last_modified":"1517835927","components":[{"component_id":"1050483","previous_id":0,"original_id":"0","guid":"40E020B199504328BC8395634D4A5855","previous_guid":null,"component_type_id":"1","data_id":null,"data":"","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":""},"is_project":0},{"component_id":"1050484","previous_id":"1050483","original_id":"0","guid":"08F462D0E5B449148DCDB0CBFC9ECDE9","previous_guid":"40E020B199504328BC8395634D4A5855","component_type_id":"6","data_id":"0","data":"Human mapping","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Human mapping"},"is_project":0},{"component_id":"1050489","previous_id":"1050484","original_id":"0","guid":"66A991F3870E4AD28A6924EAE847D45E","previous_guid":"08F462D0E5B449148DCDB0CBFC9ECDE9","component_type_id":"15","data_id":"3169","data":"","order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"\/naslx\/projects\/t1172\/di36dih\/Linux_x86_64_static\/STAR \\\n--readFilesIn ${dir}\/${srr}*gz \\\n--genomeDir \/naslx\/projects\/t1172\/di36dih\/Genomes\/hg38 \\\n--runThreadN 28 \\\n--genomeLoad LoadAndKeep \\\n--readFilesCommand zcat \\\n--quantMode GeneCounts \\\n--outReadsUnmapped Fastx \\\n--outFileNamePrefix ${dir}\/$srr.human","description":"STAR command, using the parameters:\n--readFilesIn \nTakes gz compressed FASTQ files of SRA run ${srr} as input.\n--genomeDir \nThe hg38 human reference genome \n\n--genomeLoad LoadAndKeep\nThis loads the genome into memory once and keeps it there for subsequent STAR runs\n\n--runThreadN\nUsing 28 cores.\n\n--readFilesCommand zcat\nFor input files in .gz compression. \n\n--quantMode GeneCounts \nThis generates the gene count table.\n\n--outReadsUnmapped Fastx\nThis saves all unmapped reads in a file in .fastq format.\n\n--outFileNamePrefix \nSaving all Files in the work directory with the prefix ${srr}.human","os_name":"STAR","os_version":"2.5.2","can_edit":"1"},"is_project":0}],"available_protocols":[]},{"id":"605969","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"78C151AF0EDD461E8725D2660E099662","previous_guid":"52B75C9602E84E849DFD594ED91BEE5B","previous_id":"605968","last_modified":"1517835941","components":[{"component_id":"1050485","previous_id":0,"original_id":"0","guid":"0A7D516DAF624D538B83556F35B58BD3","previous_guid":null,"component_type_id":"1","data_id":null,"data":"","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":""},"is_project":0},{"component_id":"1050486","previous_id":"1050485","original_id":"0","guid":"41C47ED4CA4E4D84B658CFFDF0FD6885","previous_guid":"0A7D516DAF624D538B83556F35B58BD3","component_type_id":"6","data_id":"0","data":"Metagenomic classification","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Metagenomic classification"},"is_project":0},{"component_id":"1050490","previous_id":"1050486","original_id":"0","guid":"FD0DED1512D4497FA5646789139E664D","previous_guid":"41C47ED4CA4E4D84B658CFFDF0FD6885","component_type_id":"15","data_id":"3170","data":"","order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"sh set_targets.sh $db bacteria viruses","description":"This command sets the path to a custom databank $db with the genomes to map to, here bacteria and viruses. ","os_name":"CLARK","os_version":"1.2.3.1","can_edit":"1"},"is_project":0},{"component_id":"1050491","previous_id":"1050490","original_id":"0","guid":"E583AAF00B364254BD02E164AC9596E9","previous_guid":"FD0DED1512D4497FA5646789139E664D","component_type_id":"15","data_id":"3171","data":"","order_id":"3","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"sh classify_metagenome.sh --spaced -O $dir\/listUnmapped -R $dir\/CLARKresults -n 32 -m 2","description":"The unmapped reads in .fastq format derived in the first mapping step are listed in the Object file -O $dir\/listUnmapped. The reads are mapped to the metagenomes, using 32 cores, spaced k-mers for higher sensitivity and in the fast mode (-m 2) for faster mapping speed. The ${srr}.metagenome.results.csv files are saved in the files specified in -R $dir\/CLARKresults. ","os_name":"CLARK","os_version":"1.2.3.1","can_edit":"1"},"is_project":0},{"component_id":"1050546","previous_id":"1050491","original_id":"0","guid":"B8F29A99D21243ABB57BCB8337C2179D","previous_guid":"E583AAF00B364254BD02E164AC9596E9","component_type_id":"15","data_id":"3172","data":"","order_id":"4","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"sh estimate_abundance.sh -F ${srr}.metagenome.results.csv -D $db > ${srr}.abundance.tsv","description":"Here the ${srr}.metagenome.results.csv files from the step before are evaluated and the abundance of the metagenomes is saved in the files ${srr}.abundance.tsv.","os_name":"CLARK","os_version":"1.2.3.1","can_edit":"1"},"is_project":0}]}]}