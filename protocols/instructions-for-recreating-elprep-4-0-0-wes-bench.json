{"id":19389,"title":"Instructions for recreating elPrep 4.0.0 WES benchmarks","title_html":"Instructions for recreating elPrep 4.0.0 WES benchmarks","image":{"source":"https:\/\/www.protocols.io\/img\/default_protocol.png","placeholder":"https:\/\/www.protocols.io\/img\/default_protocol.png"},"doi":"dx.doi.org\/10.17504\/protocols.io.w65fhg6","doi_status":2,"uri":"instructions-for-recreating-elprep-4-0-0-wes-bench-w65fhg6","type_id":1,"published_on":1547642506,"version_id":0,"created_on":1547634291,"categories":null,"creator":{"name":"Charlotte Herzeel","affiliation":null,"username":"charlotte-herzeel","link":"https:\/\/www.biorxiv.org\/content\/early\/2018\/12\/10\/492249","image":{"source":"\/img\/avatars\/016.png","placeholder":"\/img\/avatars\/016.png"},"badges":[{"id":2,"image":{"source":"\/img\/badges\/bronze.svg","placeholder":"\/img\/badges\/bronze.svg"},"name":"Author"}],"research_interests":null},"journal":null,"journal_name":null,"journal_link":null,"public":1,"has_versions":0,"link":"https:\/\/www.biorxiv.org\/content\/early\/2018\/12\/10\/492249","number_of_steps":4,"authors":[{"name":"Charlotte Herzeel","affiliation":"ExaScience Life Lab, imec, Leuven, Belgium","username":"charlotte-herzeel","link":null,"image":{"source":"\/img\/avatars\/016.png","placeholder":"\/img\/avatars\/016.png"},"badges":[],"research_interests":null}],"versions":[],"groups":[],"has_subprotocols":0,"is_subprotocol":0,"is_bookmarked":0,"forks_count":{"private":0,"public":0},"steps":[{"id":698501,"guid":"544A1830197911E98CCAF3D7421FB50D","previous_id":null,"previous_guid":null,"modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"31DDB666E0024E4EB0833E4C1E09576B","order_id":1,"type_id":6,"title":"Section","source":{"title":""}},{"id":1054723,"guid":"066CD945FF614C2EAED3185556E3B5B9","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">Configuration<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">1.1 Hardware<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">1.2 Software<\/span><\/div><\/div>"}},{"id":1054723,"guid":"C4543E6A0B80418FA5BC63143D5DA65C","order_id":2,"type_id":26,"title":"notes","source":{"id":0,"parent_id":0,"uri":"","title":"","body":"<div class = \"text-blocks\"><div class = \"text-block\">These instructions have been tested with elPrep v.4.0.0. The following assumes that everything is performed from a working directory WORKDIR.<\/div><\/div>","created_on":0,"changed_on":0,"creator":{"name":" ","affiliation":"","username":"","link":null,"image":{"source":"","placeholder":""},"badges":[],"research_interests":null},"comments":[]}},{"id":1054723,"guid":"95D6C7381F0A4659896171D36E0F3D27","order_id":3,"type_id":26,"title":"notes","source":{"id":0,"parent_id":0,"uri":"","title":"","body":"<div class = \"text-blocks\"><div class = \"text-block\">* 2x18-core Intel Xeon processor E5-2699v3 Haswell @ 2.3GHz<\/div><div class = \"text-block\">* 256 GB RAM<\/div><div class = \"text-block\">* 2x400 GB SSD<\/div><\/div>","created_on":0,"changed_on":0,"creator":{"name":" ","affiliation":"","username":"","link":null,"image":{"source":"","placeholder":""},"badges":[],"research_interests":null},"comments":[]}},{"id":1054723,"guid":"933B0ED409EE4676870CBF911083A057","order_id":4,"type_id":26,"title":"notes","source":{"id":0,"parent_id":0,"uri":"","title":"","body":"<div class = \"text-blocks\"><div class = \"text-block\">* Ubuntu 14.04.5 LTS<\/div><div class = \"text-block\">* elPrep 4.0.1<\/div><\/div>","created_on":0,"changed_on":0,"creator":{"name":" ","affiliation":"","username":"","link":null,"image":{"source":"","placeholder":""},"badges":[],"research_interests":null},"comments":[]}}],"cases":null,"data":null,"section":null,"section_color":null},{"id":698511,"guid":"BD8332A0197911E98CCAF3D7421FB50D","previous_id":698501,"previous_guid":"544A1830197911E98CCAF3D7421FB50D","modified_on":1547634768,"protocol_id":0,"components":[{"id":1054723,"guid":"2E7D7F7D2EAF4A378E8C53BCA2377280","order_id":1,"type_id":6,"title":"Section","source":{"title":""}},{"id":1054723,"guid":"217614B218A64FAA988AF57F37336AFB","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">Installation<\/span><\/div><\/div>"}},{"id":1054723,"guid":"E5855AD0197911E98CCAF3D7421FB50D","order_id":2,"type_id":8,"title":"software","source":{"name":"elPrep","developer":"imec","repository":"https:\/\/github.com\/ExaScience\/elprep","link":"https:\/\/github.com\/ExaScience\/elprep","os_name":"","os_version":""}},{"id":1054723,"guid":"F135C1FF938C40039CCF3A3E9D01DBCB","order_id":3,"type_id":26,"title":"notes","source":{"id":0,"parent_id":0,"uri":"","title":"","body":"<div class = \"text-blocks\"><div class = \"text-block\">The following steps are required to run elPrep:<\/div><div class = \"text-block\">1. Download the elPrep binary distribution from https:\/\/github.com\/ExaScience\/elprep<\/div><div class = \"text-block\">Direct download link: https:\/\/github.com\/ExaScience\/elprep\/releases\/download\/v4.0.0\/elprep-v4.0.0.tar.gz  <\/div><div class = \"text-block\">2. mdkir elprep-v4.0.0 <\/div><div class = \"text-block\">3. mv elprep-v4.0.1.tar.gz elprep-v4.0.0<\/div><div class = \"text-block\">4. cd elprep-v4.0.0<\/div><div class = \"text-block\">5. tar xvf elprep-v4.0.0.tar.gz<\/div><div class = \"text-block\">6. PATH=$WORKDIR\/elprep-v4.0.0:$PATH<\/div><\/div>","created_on":0,"changed_on":0,"creator":{"name":" ","affiliation":"","username":"","link":null,"image":{"source":"","placeholder":""},"badges":[],"research_interests":null},"comments":[]}}],"cases":null,"data":null,"section":null,"section_color":null},{"id":698512,"guid":"20409A40197A11E98CCAF3D7421FB50D","previous_id":698511,"previous_guid":"BD8332A0197911E98CCAF3D7421FB50D","modified_on":1547642337,"protocol_id":0,"components":[{"id":1054723,"guid":"C6C70D0AFE1B496BBC9CF5B28BB84023","order_id":1,"type_id":6,"title":"Section","source":{"title":""}},{"id":1054723,"guid":"9F91A41F47624EEE955F555B84D1A2F6","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">Data preparation<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">3.1 Required tools<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">3.2 Required data<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">3.3 Data preparation steps<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">3.3.1 Create the reference index:<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">3.3.2 Align the FASTQ files to create a BAM file:<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">3.3.3 Create hg19 elfasta file:<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">3.3.4 Create elsites files from vcf files:<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">3.3.5 Unzip the BED file with captured regions:<\/span><\/div><\/div>"}},{"id":1054723,"guid":"7C66902E53B24481A0E9C43898B14A64","order_id":2,"type_id":26,"title":"notes","source":{"id":0,"parent_id":0,"uri":"","title":"","body":"<div class = \"text-blocks\"><div class = \"text-block\">Our WES benchmark uses the public data provided by the Genome in a Bottle Consortium (GIAB). This data consists of unaligned FASTQ files, but we offer an aligned BAM file for this data on our demo repository (see https:\/\/github.com\/ExaScience\/elprep\/tree\/master\/demo). Otherwise, the following steps describe how to download and align the data yourself using BWA mem (version 0.7.17). Similarly, our benchmark requires the reference genome, databases with known SNPs and BED files to be converted into an elPrep-specific format. Again, these files can be downloaded from our demo repository. Otherwise, the following steps describe how to download the data from public repositories and creating the elPrep-specific conversions.<\/div><\/div>","created_on":0,"changed_on":0,"creator":{"name":" ","affiliation":"","username":"","link":null,"image":{"source":"","placeholder":""},"badges":[],"research_interests":null},"comments":[]}},{"id":1054723,"guid":"894CD850197A11E98CCAF3D7421FB50D","order_id":3,"type_id":8,"title":"software","source":{"name":"BWA","developer":"Heng Li","repository":"https:\/\/github.com\/lh3\/bwa","link":"https:\/\/github.com\/lh3\/bwa","os_name":"","os_version":""}},{"id":1054723,"guid":"F600E193DB774A8090D2141A17BFBBC2","order_id":4,"type_id":26,"title":"notes","source":{"id":0,"parent_id":0,"uri":"","title":"","body":"<div class = \"text-blocks\"><div class = \"text-block\">1. Ensure GCC installed (version 4.8.4 recommended)<\/div><div class = \"text-block\">2. Download BWA source code from https:\/\/github.com\/lh3\/bwa Direct link: https:\/\/github.com\/lh3\/bwa\/releases\/download\/v0.7.17\/bwa-0.7.17.tar.bz2<\/div><div class = \"text-block\">3. tar xvf bwa-0.7.17.tar.bz2<\/div><div class = \"text-block\">4. cd bwa-0.7.17<\/div><div class = \"text-block\">5. make<\/div><div class = \"text-block\">6. cd $WORKDIR<\/div><\/div>","created_on":0,"changed_on":0,"creator":{"name":" ","affiliation":"","username":"","link":null,"image":{"source":"","placeholder":""},"badges":[],"research_interests":null},"comments":[]}},{"id":1054723,"guid":"C2A780C078E04921A5B983FC9048DF56","order_id":5,"type_id":26,"title":"notes","source":{"id":0,"parent_id":0,"uri":"","title":"","body":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">FASTQ and BED files<\/span><\/div><div class = \"text-block\">* Download GIAB whole-exome NA12878, FASTQ and BED files from https:\/\/github.com\/genome-in-a-bottle<\/div><div class = \"text-block\">Direct links: <\/div><div class = \"text-block\">ftp:\/\/ftp-trace.ncbi.nih.gov\/giab\/ftp\/data\/NA12878\/Garvan_NA12878_HG001_HiSeq_Exome\/NIST7035_TAAGGCGA_L001_R1_001.fasq.gz<\/div><div class = \"text-block\">ftp:\/\/ftp-trace.ncbi.nih.gov\/giab\/ftp\/data\/NA12878\/Garvan_NA12878_HG001_HiSeq_Exome\/NIST7035_TAAGGCGA_L001_R2_001.fastq.gz<\/div><div class = \"text-block\">ftp:\/\/ftp-trace.ncbi.nih.gov\/giab\/ftp\/data\/NA12878\/Garvan_NA12878_HG001_HiSeq_Exome\/nexterarapidcapture_expandedexome_targetedregions.bed.gz<\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">Reference files<\/span><\/div><div class = \"text-block\">* Download the hg19 reference files from https:\/\/software.broadinstitute.org\/gatk\/download\/bundle<\/div><div class = \"text-block\">Direct links:<\/div><div class = \"text-block\"><a style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">ftp:\/\/gsapubftp-anonymous@ftp.broadinstitute.org\/bundle\/<\/span><\/a><span>hg19\/ucsc.hg19.*<\/span><\/div><div class = \"text-block\">When attempting a download, this may result in an error message that the login is incorrect. This is because the ftp site only allows a maximum of 25 users at the same time. If this happens, try again.\n<\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">Known variants<\/span><\/div><div class = \"text-block\">* Download the database with known SNPs from https:\/\/software.broadinstitute.org\/gatk\/download\/bundle<\/div><div class = \"text-block\">Direct links:<\/div><div class = \"text-block\">ftp:\/\/gsapubftp-anonymous@ftp.broadinstitute.org\/bundle\/hg19\/Mills_and_1000G_gold_standard.indels.hg19.sites.vcf.gz<\/div><div class = \"text-block\">ftp:\/\/gsapubftp-anonymous@ftp.broadinstitute.org\/bundle\/hg19\/dbsnp_138.hg19.vcf.gz<\/div><\/div>","created_on":0,"changed_on":0,"creator":{"name":" ","affiliation":"","username":"","link":null,"image":{"source":"","placeholder":""},"badges":[],"research_interests":null},"comments":[]}},{"id":1054723,"guid":"2AA6FF50197B11E98CCAF3D7421FB50D","order_id":6,"type_id":15,"title":"command","source":{"name":"bwa-0.7.17\/bwa index ucsc.hg19.fasta.gz","command":"Required time: ca. 1h\nResult: ucsc.hg19.fasta.gz.*","os_name":"","os_version":""}},{"id":1054723,"guid":"A3483140197B11E98CCAF3D7421FB50D","order_id":7,"type_id":15,"title":"command","source":{"name":"bwa-0.7.17\/bwa mem -t 72 -R '@RG\\tID:Group1\\tLB:lib1\\tPL:illumina\\tSM:sample1' ucsc.hg19.fasta.gz NIST7035_TAAGGCGA_L001_R1_001.fastq.gz NIST7035_TAAGGCGA_L001_R2_001.fastq.gz | elprep \/dev\/stdin NA12878.bam","command":"Required time: ca. 5 minutes\nResult: NA12878.bam","os_name":"","os_version":""}},{"id":1054723,"guid":"EE49DA40197B11E98CCAF3D7421FB50D","order_id":8,"type_id":15,"title":"command","source":{"name":"cp ucsc.hg19.fasta.gz hg19.fasta.gz\ngunzip hg19.fasta.gz\nelprep fasta-to-elfasta hg19.fasta ucsc.hg19.elfasta","command":"Required time: ca. 1 minute\nResult: ucsc.hg19.elfasta","os_name":"","os_version":""}},{"id":1054723,"guid":"2C5B2280197C11E98CCAF3D7421FB50D","order_id":9,"type_id":15,"title":"command","source":{"name":"gunzip dbsnp_138.hg19.vcf.gz\nelprep vcf-to-elsites dbsnp_138.hg19.vcf dbsnp_138.hg19.elsites","command":"Required time: ca. 1 minute\nResult: dbsnp_138.hg19.elsites","os_name":"","os_version":""}},{"id":1054723,"guid":"6F43BC60197C11E98CCAF3D7421FB50D","order_id":10,"type_id":15,"title":"command","source":{"name":"gunzip Mills_and_1000G_gold_standard.indels.hg19.sites.vcf.gz\nelprep vcf-to-elsites Mills_and_1000G_gold_standard.indels.hg19.sites.vcf Mills_and_1000G_gold_standard.indels.hg19.elsites","command":"Required time: ca. 10 seconds\nResult: Mills_and_1000G_gold_standard.indels.hg19.elsites","os_name":"","os_version":""}},{"id":1054723,"guid":"B3B31D50197C11E98CCAF3D7421FB50D","order_id":11,"type_id":15,"title":"command","source":{"name":"gunzip nexterarapidcapture_expandedexome_targetedregions.bed.gz","command":"","os_name":"","os_version":""}}],"cases":null,"data":null,"section":null,"section_color":null},{"id":698520,"guid":"BBDFB470197C11E98CCAF3D7421FB50D","previous_id":698512,"previous_guid":"20409A40197A11E98CCAF3D7421FB50D","modified_on":1547642371,"protocol_id":0,"components":[{"id":1054723,"guid":"28C777814B90434593546B74B453046C","order_id":1,"type_id":6,"title":"Section","source":{"title":""}},{"id":1054723,"guid":"3A6F0EB3E3D349F9872A237BB6B27C50","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">Benchmarking elPrep<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">4.1 elPrep filter mode<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">4.2 elPrep sfm mode<\/span><\/div><\/div>"}},{"id":1054723,"guid":"7428178A995E4EC9B652F5A3A8A1D066","order_id":2,"type_id":26,"title":"notes","source":{"id":0,"parent_id":0,"uri":"","title":"","body":"<div class = \"text-blocks\"><div class = \"text-block\">elPrep provides a lot of filtering options, as well as two modes to execute it. The following benchmark implements a pipeline that executes the following four steps:<\/div><div class = \"text-block\">1. Sorting by coordinate order (equivalent to, for example https:\/\/software.broadinstitute.org\/gatk\/documentation\/tooldocs\/current\/picard_sam_SortSam.php)<\/div><div class = \"text-block\">2. Marking PCR and optical duplicates (equivalent to, for example, https:\/\/software.broadinstitute.org\/gatk\/documentation\/tooldocs\/current\/picard_sam_markduplicates_MarkDuplicates.php)<\/div><div class = \"text-block\">3. Base quality score recalibration (equivalent to, for example, https:\/\/software.broadinstitute.org\/gatk\/documentation\/tooldocs\/current\/org_broadinstitute_hellbender_tools_walkers_bqsr_BaseRecalibrator.php)<\/div><div class = \"text-block\">4. Applying base quality score recalibration (equivalent to, for example, https:\/\/software.broadinstitute.org\/gatk\/documentation\/tooldocs\/current\/org_broadinstitute_hellbender_tools_walkers_bqsr_ApplyBQSR.php)<\/div><div class = \"text-block\">Please see the elPrep documentation at https:\/\/github.com\/ExaScience\/elprep for further filtering options.<\/div><div class = \"text-block\">As for the execution options, elPrep can be run in an in-memory mode (filter) or a mode that first splits the input into smaller chunks, operates on each chunk to produce partial results, and merges the partial results into a final output file (sfm). The filter mode uses significantly more RAM than the sfm mode, but also runs significantly faster.\n<\/div><div class = \"text-block\">Each invocation produces the same BAM file as output. See the Statistics section below to double-check whether the BAM file is correctly processed. Please delete the output files before each rerun of elPrep.<\/div><\/div>","created_on":0,"changed_on":0,"creator":{"name":" ","affiliation":"","username":"","link":null,"image":{"source":"","placeholder":""},"badges":[],"research_interests":null},"comments":[]}},{"id":1054723,"guid":"333839C0197D11E98CCAF3D7421FB50D","order_id":3,"type_id":15,"title":"command","source":{"name":"elprep filter NA12878.bam NA12878.filter.bam --mark-duplicates --mark-optical-duplicates NA12878.filter.metrics --sorting-order coordinate --bqsr NA12878.filter.recal --known-sites Mills_and_1000G_gold_standard.indels.hg19.elsites,dbsnp_138.hg19.elsites --bqsr-reference ucsc.hg19.elfasta --filter-non-overlapping-reads nexterarapidcapture_expandedexome_targetedregions.bed","command":"Required time: ca. 5 minutes\nRequired RAM: 80 GB RAM\nResult: NA12878.filter.bam, NA12878.filter.metrics, NA12878.filter.recal","os_name":"","os_version":""}},{"id":1054723,"guid":"5CC4AB70197D11E98CCAF3D7421FB50D","order_id":4,"type_id":15,"title":"command","source":{"name":"elprep sfm NA12878.bam NA12878.sfm.bam --mark-duplicates --mark-optical-duplicates NA12878.sfm.metrics --sorting-order coordinate --bqsr NA12878.sfm.recal --known-sites Mills_and_1000G_gold_standard.indels.hg19.elsites,dbsnp_138.hg19.elsites --bqsr-reference ucsc.hg19.elfasta --filter-non-overlapping-reads nexterarapidcapture_expandedexome_targetedregions.bed","command":"Required time: ca. 11 minutes\nRequired RAM: 22 GB RAM\nResult: NA12878.sfm.bam, NA12878.sfm.metrics, NA12878.sfm.recal","os_name":"","os_version":""}}],"cases":null,"data":null,"section":null,"section_color":null}],"materials":[],"description":"<div class = \"text-blocks\"><div class = \"text-block\">Instructions for recreating the elPrep4.0.0 WES benchmarks used in the following paper:<\/div><div class = \"text-block\">Herzeel C, Costanza P, Decap D, Fostier J, Verachtert W. elPrep: A multithreaded framework for sequence analysis. BioRxv https:\/\/doi.org\/10.1101\/492249  <\/div><\/div>","changed_on":1547642506}