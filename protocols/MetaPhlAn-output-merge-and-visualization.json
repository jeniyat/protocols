{"uri":"MetaPhlAn-output-merge-and-visualization-d9q95v","version_id":"0","protocol_name":"MetaPhlAn output merge and visualization","protocol_name_html":"MetaPhlAn output merge and visualization","is_prepublished":"0","can_edit":"0","parent_id":null,"api_version":"2","is_new_mode":"1","last_modified":"1521007201","type_id":"1","link":"https:\/\/bitbucket.org\/nsegata\/metaphlan\/wiki\/MetaPhlAn_Pipelines_Tutorial","fork_id":"","public_fork_note":"","number_of_steps":"4","has_versions":"0","first_published_date":"1452788120","publish_date":"2016-02-08 17:22:06","documents":"null","have_protocol_in_step":"0","is_protocol_in_step":"0","vendor_name":"Contributed by users","vendor_link":"https:\/\/www.protocols.io","vendor_logo":"\/img\/vendors\/1.png","mod_mins":"-45","mod_secs":"1","description":"In this protocol, we will merge the 20 profiled metagenomes in a table of relative abundances and visualize the table with a heatmap.","is_bookmarked":"0","can_reassign":"1","before_start":"REQUIREMENTS: the <a href=\"http:\/\/matplotlib.org\/\" target=\"_blank\">matplotlib<\/a> python library installed.","has_guidelines":"1","materials":[],"warning":"","version_class":"2064","public":"1","is_owner":"1","is_original_owner":"1","created_on":"1449085462","protocol_affiliation":"","affiliation":null,"doi":"dx.doi.org\/10.17504\/protocols.io.d9q95v","doi_status":"2","changed_fork_steps":null,"profile_url":"w2y26443x2","protocol_img":"https:\/\/www.protocols.io\/img\/default_protocol.png","profile_image":"\/img\/avatars\/004.png","full_name":"Bahar Sayoldin","created_by":"Bahar Sayoldin","private_link":"CE01D7D8064378AB8D51F1B76AB187D9","original_img":"1","username":"bahar-sayoldin","is_retracted":"0","retraction_reason":null,"plos_id":null,"manuscript_citation":null,"journal_name":null,"is_donations_disabled":"0","is_donations_disabled_by_user":"9","item_record_id":227171,"fork_info":[],"compare_forks":[],"protocols":[],"groups":[{"group_id":"45","group_uri":"verve-net","group_name":"VERVE Net","group_logo":"https:\/\/s3.amazonaws.com\/pr-journal\/cdqcwwe.png","requested_uid":null,"request_flag":null,"my_request":"1"},{"group_id":"140","group_uri":"huttenhower-lab","group_name":"Huttenhower Lab","group_logo":"https:\/\/s3.amazonaws.com\/pr-journal\/cq7d2jw.jpg","requested_uid":null,"request_flag":null,"my_request":"1"}],"number_of_shared_runs":[],"ownership_history":[],"keywords":"","transfer_to_user":[],"sub_transfer":false,"is_transfer_pending":false,"number_of_bookmarks":"0","collections":[{"protocol_name":"bioBakery Protocols","protocol_name_html":"bioBakery Protocols","uri":"bioBakery-Protocols-d9899v","username":"bahar-sayoldin","profile_image":"\/img\/avatars\/004.png","protocol_img":"https:\/\/www.protocols.io\/img\/default_protocol.png","full_name":"Bahar Sayoldin"}],"tags":[{"tag_id":"57","tag_name":"VERVE"}],"archived":0,"sub_authors":[],"sub_protocols_number":0,"can_edit_shared":0,"shared_runs":[],"is_shared_run":0,"is_shared":1,"banner":null,"contact_badges":[{"badge_id":"3","badge_image":"\/img\/badges\/silver.svg","badge_description":"Power author!"},{"badge_id":"5","badge_image":"\/img\/badges\/earlyadopter.svg","badge_description":"Early adopter"},{"badge_id":"6","badge_image":"\/img\/badges\/socialbutterfly.svg","badge_description":"Social butterfly"}],"number_of_comments":0,"is_locked":0,"is_locked_by":false,"authors":"Curtis Huttenhower","authors_list":[{"name":"Curtis Huttenhower","affiliation":"","username":null,"profile_image":null}],"user":{"profile_image":"\/img\/avatars\/004.png","username":"bahar-sayoldin","full_name":"Bahar Sayoldin","created_by":"Bahar Sayoldin"},"access":{"can_view":"1","can_remove":"0","can_add":"0","can_edit":0,"can_publish":0,"can_get_doi":0,"can_share":"0","can_move":"1","can_transfer":"1","can_download":"1","is_locked":"0"},"is_contact_suspended":0,"guidelines":"The commands reported in this protocol\u00a0can be retrieved as a\u00a0<a href=\"https:\/\/bitbucket.org\/nsegata\/metaphlan\/wiki\/2_metaphlan_merge_and_visualize.sh\" target=\"_blank\">bash script<\/a>","status_id":"1","is_research":"1","status_info":null,"steps":[{"id":"137965","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"A16D5CEB427B4D4082CCE905EC8D7B3F","previous_guid":null,"previous_id":"0","last_modified":"1502718686","components":[{"component_id":"976622","previous_id":0,"original_id":"0","guid":"7163065CBAD84927A35DDCD6B07848C3","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"141552","previous_id":"976622","original_id":"0","guid":"CA6E37734E4146A3845927F0EAD731EC","previous_guid":"7163065CBAD84927A35DDCD6B07848C3","component_type_id":"1","data_id":"0","data":"Merging the profiled metagenomes is a simple operation that can be performed with a script downloaded with MetaPhlAn and located in the \"utils\" folder:","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Merging the profiled metagenomes is a simple operation that can be performed with a script downloaded with MetaPhlAn and located in the \"utils\" folder:"},"is_project":0},{"component_id":"141553","previous_id":"141552","original_id":"0","guid":"40445B1F86034855A316C5F2EC991BA7","previous_guid":"CA6E37734E4146A3845927F0EAD731EC","component_type_id":"15","data_id":"257","data":"","order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ mkdir output\n$ utils\/merge_metaphlan_tables.py profiled_samples\/*.txt > output\/merged_abundance_table.txt","description":"The resulting table contains relative abundances with microbial clades as rows and samples as columns.","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"137971","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"42DDF18364604FA9BE5F78356D7D7116","previous_guid":"A16D5CEB427B4D4082CCE905EC8D7B3F","previous_id":"137965","last_modified":"1502718686","components":[{"component_id":"976626","previous_id":0,"original_id":"0","guid":"FB6B807C70194F35BDCB40C9A32A9329","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"141561","previous_id":"976626","original_id":"0","guid":"36619577701541C8B5FEBD19C20BE56C","previous_guid":"FB6B807C70194F35BDCB40C9A32A9329","component_type_id":"1","data_id":"0","data":"The \"metaphlan_hclust_heatmap.py\" script in the MetaPhlAn \"plotting_scripts\" folder can now be used to perform hierarchical clustering of both samples and clades to generate the heatmap:","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"The \"metaphlan_hclust_heatmap.py\" script in the MetaPhlAn \"plotting_scripts\" folder can now be used to perform hierarchical clustering of both samples and clades to generate the heatmap:"},"is_project":0},{"component_id":"141562","previous_id":"141561","original_id":"0","guid":"3458961DEBB748CEB2AAE6E840605EBC","previous_guid":"36619577701541C8B5FEBD19C20BE56C","component_type_id":"15","data_id":"258","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ mkdir output_images\n$ plotting_scripts\/metaphlan_hclust_heatmap.py -c bbcry --top 25 --minv 0.1 -s log --in output\/merged_abundance_table.txt --out output_images\/abundance_heatmap.png","description":"Specifically, we are displaying the abundances for species only (default --tax_lev s), in logarithmic scale (-s log), reporting only the 25 most abundant clades (--top 25) according to the 90th percentile of the abundances in each clade (default --perc 90) with custom color map (-c bbcry). In this example, the clustering is performed with \"average\" linkage (default -m average), using \"Bray-Curtis\" distance for clades (default -d braycurtis) and \"correlation\" for samples (default -f correlation).","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"137972","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"AA5D2A1EBA914CF78840DB6EACFDBE7C","previous_guid":"42DDF18364604FA9BE5F78356D7D7116","previous_id":"137971","last_modified":"1502718686","components":[{"component_id":"976627","previous_id":0,"original_id":"0","guid":"CE2F5B772864469E842E12A0FB6F9786","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"141563","previous_id":"976627","original_id":"0","guid":"45C8D8D899BA459198596C7880E73E01","previous_guid":"CE2F5B772864469E842E12A0FB6F9786","component_type_id":"1","data_id":"0","data":"The resulting heatmap is shown here:<br \/><br \/><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/bxvc2w6.png\" alt=\"\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/bxuc2w6.png\" data-ofn=\"abundance_heatmap.png\" \/>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"The resulting heatmap is shown here:<br \/><br \/><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/bxvc2w6.png\" alt=\"\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/bxuc2w6.png\" data-ofn=\"abundance_heatmap.png\" \/>"},"is_project":0}]},{"id":"137973","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"B8A39E2CA69E462FA3946B12EB744074","previous_guid":"AA5D2A1EBA914CF78840DB6EACFDBE7C","previous_id":"137972","last_modified":"1502718686","components":[{"component_id":"976628","previous_id":0,"original_id":"0","guid":"7C68B0BB62D54849A8E8C5051647B5F7","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"141564","previous_id":"976628","original_id":"0","guid":"D81DC283A3B747AABE09A69A7C57E3ED","previous_guid":"7C68B0BB62D54849A8E8C5051647B5F7","component_type_id":"1","data_id":"0","data":"For additional customization, enter the following command to list all available options in \"metaphlan_hclust_heatmap.py\" for the heatmap and\/or the clustering.","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"For additional customization, enter the following command to list all available options in \"metaphlan_hclust_heatmap.py\" for the heatmap and\/or the clustering."},"is_project":0},{"component_id":"141878","previous_id":"141564","original_id":"0","guid":"8488B3A4DC314FD98172EFB804EBB998","previous_guid":"D81DC283A3B747AABE09A69A7C57E3ED","component_type_id":"15","data_id":"265","data":"","order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"plotting_scripts\/metaphlan_hclust_heatmap.py -h","description":"Provides a full list of available options for heatmap and\/or clustering.","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]}]}