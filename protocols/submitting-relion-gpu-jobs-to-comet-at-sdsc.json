{"uri":"submitting-relion-gpu-jobs-to-comet-at-sdsc-i3ecgje","version_id":"0","protocol_name":"Submitting RELION GPU jobs to Comet at SDSC","protocol_name_html":"Submitting RELION GPU jobs to Comet at SDSC","is_prepublished":"0","can_edit":"0","parent_id":null,"api_version":"1","is_new_mode":"0","last_modified":"1522130401","type_id":"1","link":null,"fork_id":"","public_fork_note":"","number_of_steps":"9","has_versions":"0","first_published_date":"1500598325","publish_date":"2017-07-21 00:52:05","documents":null,"have_protocol_in_step":"0","is_protocol_in_step":"0","vendor_name":"Contributed by users","vendor_link":"https:\/\/www.protocols.io","vendor_logo":"\/img\/vendors\/1.png","mod_mins":"-45","mod_secs":"1","description":"<p>Below is a protocol for logging in and submitting a RELION GPU job to Comet GPU nodes at the San Diego Supercomputer Center.<\/p>","is_bookmarked":"0","can_reassign":"1","before_start":null,"has_guidelines":"0","materials":[],"warning":null,"version_class":"6982","public":"1","is_owner":"1","is_original_owner":"1","created_on":"1500581422","protocol_affiliation":"","affiliation":null,"doi":"dx.doi.org\/10.17504\/protocols.io.i3ecgje","doi_status":"2","changed_fork_steps":null,"profile_url":"x2y2c4z2q2","protocol_img":"https:\/\/www.protocols.io\/img\/default_protocol.png","profile_image":"\/img\/avatars\/012.png","full_name":"Michael Cianfrocco","created_by":"Michael Cianfrocco","private_link":"D01B9C50990A25F4A9ACBE2538ED5789","original_img":"1","username":"michael-cianfrocco","is_retracted":"0","retraction_reason":null,"plos_id":null,"manuscript_citation":null,"journal_name":null,"is_donations_disabled":"0","is_donations_disabled_by_user":"9","item_record_id":245282,"fork_info":[],"compare_forks":[{"protocol_id":"7026","protocol_name":"Submitting RELION GPU jobs to Comet at SDSC","protocol_name_html":"Submitting RELION GPU jobs to Comet at SDSC","uri":"submitting-relion-gpu-jobs-to-comet-at-sdsc-i4scgwe","full_name":"Michael Cianfrocco","affiliation":null,"affiliation_url":null,"username":"michael-cianfrocco"}],"protocols":[],"groups":[{"group_id":"386","group_uri":"cianfrocco-lab-university-of-michigan","group_name":"Cianfrocco Lab @ University of Michigan","group_logo":"","requested_uid":null,"request_flag":null,"my_request":"1"}],"number_of_shared_runs":[],"ownership_history":[],"keywords":"","transfer_to_user":[],"sub_transfer":false,"is_transfer_pending":false,"number_of_bookmarks":"0","collections":[],"tags":[],"archived":0,"sub_authors":[],"sub_protocols_number":0,"can_edit_shared":0,"shared_runs":[],"is_shared_run":0,"is_shared":1,"banner":null,"contact_badges":[{"badge_id":"2","badge_image":"\/img\/badges\/bronze.svg","badge_description":"Author!"},{"badge_id":"5","badge_image":"\/img\/badges\/earlyadopter.svg","badge_description":"Early adopter"}],"number_of_comments":0,"is_locked":0,"is_locked_by":false,"authors":"Michael Cianfrocco","authors_list":[{"name":"Michael Cianfrocco","affiliation":null,"username":"michael-cianfrocco","profile_image":"\/img\/avatars\/012.png"}],"user":{"profile_image":"\/img\/avatars\/012.png","username":"michael-cianfrocco","full_name":"Michael Cianfrocco","created_by":"Michael Cianfrocco"},"access":{"can_view":"1","can_remove":"0","can_add":"0","can_edit":0,"can_publish":0,"can_get_doi":0,"can_share":"0","can_move":"1","can_transfer":"1","can_download":"1","is_locked":"0"},"is_contact_suspended":0,"guidelines":null,"status_id":"1","is_research":"1","status_info":null,"steps":[{"id":"580174","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"5A9669BAF1FC4E1198B226343F8D7B87","previous_guid":"4B349166D5DA497E99C911FBE54F4117","previous_id":"580184","last_modified":"1500581691","components":[{"component_id":"963417","previous_id":0,"original_id":"0","guid":"0098F2E57401467BAF310C5266764964","previous_guid":null,"component_type_id":"1","data_id":null,"data":"<p>From your project directory on Oasis, open the RELION GUI:<\/p>\n<p>\u00a0<\/p>\n<p>$ relion<\/p>","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>From your project directory on Oasis, open the RELION GUI:<\/p>\n<p>\u00a0<\/p>\n<p>$ relion<\/p>"},"is_project":0},{"component_id":"963418","previous_id":"963417","original_id":"0","guid":"EBCA6145CBA24488B848AB47EA9C31B8","previous_guid":"0098F2E57401467BAF310C5266764964","component_type_id":"6","data_id":null,"data":"Prepare RELION job submission","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Prepare RELION job submission"},"is_project":0}]},{"id":"580175","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"7DDE9EA4139A4746A24B3724E3C96F3C","previous_guid":"5A9669BAF1FC4E1198B226343F8D7B87","previous_id":"580174","last_modified":"1500581636","components":[{"component_id":"963419","previous_id":0,"original_id":"0","guid":"80B635889D234E0E95A2A7CF25C76C14","previous_guid":null,"component_type_id":"1","data_id":null,"data":"Input parameters related to your job & select 'Print command'. Copy the output text after the command relion_refine or relion_refine_mpi.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Input parameters related to your job & select 'Print command'. Copy the output text after the command relion_refine or relion_refine_mpi."},"is_project":0},{"component_id":"963420","previous_id":"963419","original_id":"0","guid":"55FB2DCF01274ABDA0BC95A706EF3A13","previous_guid":"80B635889D234E0E95A2A7CF25C76C14","component_type_id":"6","data_id":null,"data":"","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":""},"is_project":0}]},{"id":"580176","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"DBD8EB18BA074D07ADE5EDBB5D4F2A88","previous_guid":"7DDE9EA4139A4746A24B3724E3C96F3C","previous_id":"580175","last_modified":"1500581715","components":[{"component_id":"963421","previous_id":0,"original_id":"0","guid":"8C37DAEA0CD84E6F9C487EC17D203B40","previous_guid":null,"component_type_id":"1","data_id":null,"data":"Create a new file (e.g. relion_gpu_submit.run)","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Create a new file (e.g. relion_gpu_submit.run)"},"is_project":0},{"component_id":"963422","previous_id":"963421","original_id":"0","guid":"EDDF1F0A635F4A8394C75B8BE9419514","previous_guid":"8C37DAEA0CD84E6F9C487EC17D203B40","component_type_id":"6","data_id":null,"data":"Submit job to Comet","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Submit job to Comet"},"is_project":0}]},{"id":"580177","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"87C630DB2FF5418C9B8B09DB2DA6FCAB","previous_guid":"DBD8EB18BA074D07ADE5EDBB5D4F2A88","previous_id":"580176","last_modified":"1500581807","components":[{"component_id":"963423","previous_id":0,"original_id":"0","guid":"E9DCE1FB8FA4439384A2045D243CC0C9","previous_guid":null,"component_type_id":"1","data_id":null,"data":"<p>Open file using 'vi' to include this template information:<\/p>\n<p>\u00a0<\/p>\n<p>#!\/bin\/bash<\/p>\n<p>#SBATCH --job-name='reliongpu'<\/p>\n<p>#SBATCH --output='reliongpu.%j.%N.out'<\/p>\n<p>#SBATCH --partition=gpu<\/p>\n<p>#SBATCH --nodes=1 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 #For 1 node<\/p>\n<p>#SBATCH --ntasks-per-node=24<\/p>\n<p>#SBATCH --no-requeue<\/p>\n<p>#SBATCH --gres=gpu:4<\/p>\n<p>#SBATCH -t 2:00:00 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0#Edit to give approx. time in hours here<\/p>\n<p>#SBATCH --mail-type=begin,end<\/p>\n<p>#SBATCH --mail-user= \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0#Input email address here<\/p>\n<p>#SBTACH --export=ALL<\/p>\n<p>#SBATCH -A [ID] \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 #Input XSEDE Project ID here<\/p>\n<p>export MODULEPATH=\/share\/apps\/compute\/modulefiles\/applications:$MODULEPATHmodule load relion\/2.0.3dateibrun -np 5 --tpr 4 relion_refine_mpi [paste relion command here]<\/p>","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Open file using 'vi' to include this template information:<\/p>\n<p>\u00a0<\/p>\n<p>#!\/bin\/bash<\/p>\n<p>#SBATCH --job-name='reliongpu'<\/p>\n<p>#SBATCH --output='reliongpu.%j.%N.out'<\/p>\n<p>#SBATCH --partition=gpu<\/p>\n<p>#SBATCH --nodes=1 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 #For 1 node<\/p>\n<p>#SBATCH --ntasks-per-node=24<\/p>\n<p>#SBATCH --no-requeue<\/p>\n<p>#SBATCH --gres=gpu:4<\/p>\n<p>#SBATCH -t 2:00:00 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0#Edit to give approx. time in hours here<\/p>\n<p>#SBATCH --mail-type=begin,end<\/p>\n<p>#SBATCH --mail-user= \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0#Input email address here<\/p>\n<p>#SBTACH --export=ALL<\/p>\n<p>#SBATCH -A [ID] \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 #Input XSEDE Project ID here<\/p>\n<p>export MODULEPATH=\/share\/apps\/compute\/modulefiles\/applications:$MODULEPATHmodule load relion\/2.0.3dateibrun -np 5 --tpr 4 relion_refine_mpi [paste relion command here]<\/p>"},"is_project":0},{"component_id":"963424","previous_id":"963423","original_id":"0","guid":"4A091E9561044B0CB47E1B6BD9EB3DF6","previous_guid":"E9DCE1FB8FA4439384A2045D243CC0C9","component_type_id":"6","data_id":null,"data":"","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":""},"is_project":0}]},{"id":"580178","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"270019C1DA0F415AB5F714CD05C2B853","previous_guid":"87C630DB2FF5418C9B8B09DB2DA6FCAB","previous_id":"580177","last_modified":"1500581891","components":[{"component_id":"963425","previous_id":0,"original_id":"0","guid":"F00E834834BA417EABFAA523658EB416","previous_guid":null,"component_type_id":"1","data_id":null,"data":"<p><a href=\"https:\/\/docs.google.com\/a\/umich.edu\/document\/d\/1eFOVTIpAcTO8CuihvbfdxLKkZHoOVnvzPJ4GrKuM5-g\/edit?usp=sharing\" target=\"_blank\">Click here for Cianfrocco Lab XSEDE Project ID number<\/a> to include (need to be signed into UMich account &amp; need permission to be able to view file)<\/p>","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p><a href=\"https:\/\/docs.google.com\/a\/umich.edu\/document\/d\/1eFOVTIpAcTO8CuihvbfdxLKkZHoOVnvzPJ4GrKuM5-g\/edit?usp=sharing\" target=\"_blank\">Click here for Cianfrocco Lab XSEDE Project ID number<\/a> to include (need to be signed into UMich account &amp; need permission to be able to view file)<\/p>"},"is_project":0},{"component_id":"963426","previous_id":"963425","original_id":"0","guid":"D3B5631013554813BD7F2C7246626614","previous_guid":"F00E834834BA417EABFAA523658EB416","component_type_id":"6","data_id":null,"data":"","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":""},"is_project":0}]},{"id":"580179","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"4ECA2458EF01403EBD571969D8A0C62C","previous_guid":"270019C1DA0F415AB5F714CD05C2B853","previous_id":"580178","last_modified":"1500581901","components":[{"component_id":"963427","previous_id":0,"original_id":"0","guid":"96DA2DA425E44136832902F71E67F690","previous_guid":null,"component_type_id":"1","data_id":null,"data":"<p>Submit to Comet:<\/p>\n<p>\u00a0<\/p>\n<p>$ sbatch [filename]<\/p>","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Submit to Comet:<\/p>\n<p>\u00a0<\/p>\n<p>$ sbatch [filename]<\/p>"},"is_project":0},{"component_id":"963428","previous_id":"963427","original_id":"0","guid":"91D45D24A2ED44938F89EA09457DF34B","previous_guid":"96DA2DA425E44136832902F71E67F690","component_type_id":"6","data_id":null,"data":"","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":""},"is_project":0}]},{"id":"580183","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"6E0E36A68D824FB49384FADD79963823","previous_guid":"0101B2FA75C84C0CA815E02A2BAB598A","previous_id":"580185","last_modified":"1500597437","components":[{"component_id":"963435","previous_id":0,"original_id":"0","guid":"A987A646068E499B90CBD1A7362595A8","previous_guid":null,"component_type_id":"1","data_id":null,"data":"<p>To log onto Comet, ssh into Comet using Terminal on Mac OSX (Forget name for Windows):\u00a0<\/p>\n<p>\u00a0<\/p>\n<p>$ ssh -X [username]@comet.sdsc.edu<\/p>\n<p>\u00a0<\/p>\n<p>-&gt; You will use your xsede username &amp; password<\/p>","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>To log onto Comet, ssh into Comet using Terminal on Mac OSX (Forget name for Windows):\u00a0<\/p>\n<p>\u00a0<\/p>\n<p>$ ssh -X [username]@comet.sdsc.edu<\/p>\n<p>\u00a0<\/p>\n<p>-&gt; You will use your xsede username &amp; password<\/p>"},"is_project":0},{"component_id":"963436","previous_id":"963435","original_id":"0","guid":"0AA245ACF3F149D0AF5E28BF6244BB4D","previous_guid":"A987A646068E499B90CBD1A7362595A8","component_type_id":"6","data_id":null,"data":"Logging into Comet","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Logging into Comet"},"is_project":0}]},{"id":"580184","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"4B349166D5DA497E99C911FBE54F4117","previous_guid":"6E0E36A68D824FB49384FADD79963823","previous_id":"580183","last_modified":"1500597405","components":[{"component_id":"963437","previous_id":0,"original_id":"0","guid":"4F3F7B98120F4655B99A716E60B5C6E1","previous_guid":null,"component_type_id":"1","data_id":null,"data":"<p>Navigate to your storage on Oasis &amp; create a new project directory for your current dataset \/ sample:\u00a0<\/p>\n<p>\u00a0<\/p>\n<p>$ cd \/oasis\/projects\/nsf\/[XSEDE allocation ID]\/[username]<\/p>\n<p>$ mkdir mysample<\/p>\n<p>$ cd mysample<\/p>","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Navigate to your storage on Oasis &amp; create a new project directory for your current dataset \/ sample:\u00a0<\/p>\n<p>\u00a0<\/p>\n<p>$ cd \/oasis\/projects\/nsf\/[XSEDE allocation ID]\/[username]<\/p>\n<p>$ mkdir mysample<\/p>\n<p>$ cd mysample<\/p>"},"is_project":0},{"component_id":"963438","previous_id":"963437","original_id":"0","guid":"F25F7EB3A2C64271B761A842F758378E","previous_guid":"4F3F7B98120F4655B99A716E60B5C6E1","component_type_id":"6","data_id":null,"data":"","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":""},"is_project":0}]},{"id":"580185","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"0101B2FA75C84C0CA815E02A2BAB598A","previous_guid":null,"previous_id":null,"last_modified":"1500597511","components":[{"component_id":"963439","previous_id":0,"original_id":"0","guid":"0AC8D3986FCE4F088F4C0ED131544A55","previous_guid":null,"component_type_id":"1","data_id":null,"data":"<p>To move your data onto Comet, you can use globus.org for moving datasets easily from local machines \/ laptop to your Oasis storage directory.\u00a0<\/p>\n<p>\u00a0<\/p>\n<p>Alternatively, you can always use scp or rsync\u00a0from the command line.<\/p>","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>To move your data onto Comet, you can use globus.org for moving datasets easily from local machines \/ laptop to your Oasis storage directory.\u00a0<\/p>\n<p>\u00a0<\/p>\n<p>Alternatively, you can always use scp or rsync\u00a0from the command line.<\/p>"},"is_project":0},{"component_id":"963440","previous_id":"963439","original_id":"0","guid":"C881673AA6B141BFA9AB46EC82C1A683","previous_guid":"0AC8D3986FCE4F088F4C0ED131544A55","component_type_id":"6","data_id":null,"data":"Upload data to Comet","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Upload data to Comet"},"is_project":0}]}]}