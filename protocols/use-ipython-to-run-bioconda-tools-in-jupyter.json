{"id":27912,"title":"Use IPython to run bioconda tools in jupyter","title_html":"<p>Use IPython to run bioconda tools in jupyter<\/p>","image":{"source":"https:\/\/s3.amazonaws.com\/protocols-files\/public\/526fb78095ba2a9fa201cc118027ed92e4a2b45a63bd0cecc506d2c2a14e4371\/bq972kge.jpg","placeholder":"https:\/\/s3.amazonaws.com\/protocols-files\/public\/526fb78095ba2a9fa201cc118027ed92e4a2b45a63bd0cecc506d2c2a14e4371\/bq972kge.jpg"},"doi":"dx.doi.org\/10.17504\/protocols.io.7hghj3w","doi_status":2,"uri":"use-ipython-to-run-bioconda-tools-in-jupyter-7hghj3w","type_id":1,"published_on":1568907358,"parent_protocols":[],"parent_collections":[],"version_id":1,"created_on":1568906626,"categories":null,"creator":{"name":"Alise J. Ponsero","affiliation":"University of Arizona","affiliations":[{"affiliation":"University of Arizona","url":"","is_default":1}],"username":"alise-ponsero","link":null,"image":{"source":"https:\/\/s3.amazonaws.com\/pr-journal\/4uh2kge.jpg","placeholder":"https:\/\/s3.amazonaws.com\/pr-journal\/4uh2kge.jpg"},"badges":[{"id":4,"image":{"source":"\/img\/badges\/gold.svg","placeholder":"\/img\/badges\/gold.svg"},"name":"Gold power author!"},{"id":6,"image":{"source":"\/img\/badges\/socialbutterfly.svg","placeholder":"\/img\/badges\/socialbutterfly.svg"},"name":"Social butterfly"}],"research_interests":null,"blocked_by_you":false,"blocked_you":false},"journal":null,"journal_name":null,"journal_link":null,"article_citation":null,"public":1,"has_versions":1,"link":null,"total_collections":0,"number_of_steps":8,"authors":[{"name":"Alise J. Ponsero","affiliation":"University of Arizona","affiliations":[],"username":"alise-ponsero","link":null,"image":{"source":"https:\/\/s3.amazonaws.com\/pr-journal\/4uh2kge.jpg","placeholder":"https:\/\/s3.amazonaws.com\/pr-journal\/4uh2kge.jpg"},"badges":[],"research_interests":null,"blocked_by_you":false,"blocked_you":false}],"versions":[],"groups":[{"id":1312,"uri":"metagenomics-class-2019","title":"Metagenomics class 2019","image":{"source":"https:\/\/s3.amazonaws.com\/protocols-files\/public\/526fb78095ba2a9fa201cc118027ed92e4a2b45a63bd0cecc506d2c2a14e4371\/bp6a2kge.jpg","placeholder":"https:\/\/s3.amazonaws.com\/protocols-files\/public\/526fb78095ba2a9fa201cc118027ed92e4a2b45a63bd0cecc506d2c2a14e4371\/bp6a2kge.jpg"},"tech_support":{"email":null,"phone":null,"hide_contact":0,"use_email":0},"is_member":1,"request":{"id":1312,"uri":"metagenomics-class-2019","title":"Metagenomics class 2019","image":{"source":"https:\/\/s3.amazonaws.com\/protocols-files\/public\/526fb78095ba2a9fa201cc118027ed92e4a2b45a63bd0cecc506d2c2a14e4371\/bp6a2kge.jpg","placeholder":"https:\/\/s3.amazonaws.com\/protocols-files\/public\/526fb78095ba2a9fa201cc118027ed92e4a2b45a63bd0cecc506d2c2a14e4371\/bp6a2kge.jpg"},"tech_support":{"email":null,"phone":null,"hide_contact":0,"use_email":0},"is_member":1,"description":null,"research_interests":null,"website":null,"location":null,"affiliation":null,"status":{"is_visible":true,"access_level":0},"stats":{"files":[],"total_members":0,"total_followers":0,"total_child_groups":0,"total_parent_groups":0,"has_collaborations":0},"user_status":{"is_member":true,"is_confirmed":true,"is_invited":false,"is_owner":false,"is_admin":false,"is_following":false},"join_link":null,"token":null,"owner":{"name":" ","affiliation":null,"affiliations":[],"username":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"research_interests":null,"blocked_by_you":false,"blocked_you":false},"is_protocol_requested":0,"is_group_requested":0,"is_my":false,"is_request":false,"is_confirmed":1,"is_declined":0,"requester":{"name":" ","affiliation":null,"affiliation_url":null,"username":null,"link":null},"protocol":{"id":0,"title":"Use IPython to run bioconda tools in jupyter","title_html":"Use IPython to run bioconda tools in jupyter","image":{"source":null,"placeholder":null},"doi":null,"doi_status":0,"uri":"use-ipython-to-run-bioconda-tools-in-jupyter-7hghj3w","type_id":1,"published_on":null,"stats":{"number_of_views":0,"number_of_steps":0,"number_of_bookmarks":0,"number_of_comments":0,"number_of_exports":0,"number_of_runs":0,"number_of_votes":0,"is_voted":0},"parent_protocols":[],"parent_collections":[]},"created_on":1568907358,"resolve_on":0,"resolved_user":{"name":" ","affiliation":null,"affiliations":[],"username":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"research_interests":null,"blocked_by_you":false,"blocked_you":false},"shared":false}}],"has_subprotocols":0,"is_subprotocol":0,"is_bookmarked":0,"can_be_copied":1,"can_remove_fork":1,"forks_count":{"private":0,"public":0},"access":{"can_view":1,"can_remove":0,"can_add":1,"can_edit":0,"can_publish":0,"can_get_doi":0,"can_share":1,"can_move":1,"can_move_outside":1,"can_transfer":1,"can_download":1,"is_locked":0},"guid":"1A59DE140B964F98A2AD09239FE7DBC0","steps":[{"id":815192,"guid":"D36557117CA547E9A1D0DBDD967BCD04","previous_id":815194,"previous_guid":"7F74B6AF4E79410CAFC603705B06CB31","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"8AFA738F234242D291850F25F21CB0A8","order_id":1,"type_id":6,"title":"Section","source":{"title":"installing Mothur "}},{"id":1054724,"guid":"AA84F3C4F1A5479A8070955EE2468BDC","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Open Anaconda Navigator and go to your environment manager. Select the class environment and search for the Mothur package in the \"not installed\" packages list.<\/div><div class = \"text-block\">Install Mothur in the environment. If you don't remember how to do this. Do not panic and go back to the Anaconda protocol (<\/div><div class = \"text-block\"><a href=\"https:\/\/www.protocols.io\/view\/first-steps-using-a-jupyter-notebook-6uphevn\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">https:\/\/www.protocols.io\/view\/first-steps-using-a-jupyter-notebook-6uphevn<\/span><\/a><\/div><div class = \"text-block\">).<\/div><div class = \"text-block\">The installation will take some time, therefore you can read <\/div><div class = \"text-block\"><a href=\"https:\/\/www.sciencedirect.com\/science\/article\/pii\/S2352409X19305371\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">this very serious paper about Inuit poop knives<\/span><\/a><\/div><div class = \"text-block\">.<\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">If you don't find mothur in the \"not installed\" or the \"all\" list of packages in the conda navigator look at your channels in the conda navigator :<\/span><\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/protocols-files.s3.amazonaws.com\/private\/526fb78095ba2a9fa201cc118027ed92e4a2b45a63bd0cecc506d2c2a14e4371\/brev2kge.png?X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJYFAX46LHRVQMGOA%2F20190919%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20190919T153523Z&X-Amz-SignedHeaders=host&X-Amz-Expires=604800&X-Amz-Signature=7d596f05b9fff86249c22d208e51cbc58aa9653f38dbaf539dd342b2c2e61238\" \/><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">If you don't see these three channels, go to step 2.2<\/span><\/div><\/div>"}},{"id":1054725,"guid":"243052D2A8AF476CA5A3754A35F8F207","order_id":2,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/protocols-files.s3.amazonaws.com\/private\/526fb78095ba2a9fa201cc118027ed92e4a2b45a63bd0cecc506d2c2a14e4371\/brev2kge.png?X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJYFAX46LHRVQMGOA%2F20190919%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20190919T153523Z&X-Amz-SignedHeaders=host&X-Amz-Expires=604800&X-Amz-Signature=7d596f05b9fff86249c22d208e51cbc58aa9653f38dbaf539dd342b2c2e61238\" \/><\/div>"}}],"cases":[],"data":null,"section":null,"section_color":"#94EBFF","critical":null,"critical_id":null,"duration":0},{"id":815193,"guid":"CB3726E9F0554DE6A29D36CA866A8D14","previous_id":815192,"previous_guid":"D36557117CA547E9A1D0DBDD967BCD04","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"860B4CB470DF4A49810508C051737924","order_id":1,"type_id":6,"title":"Section","source":{"title":"installing Mothur "}},{"id":1054724,"guid":"85E67546BBAB4A298C5D539077360AFE","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">For Miniconda users, open your terminal and type :<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">source activate class_2019<\/div><\/div><\/code><\/pre><\/div><div class = \"text-block\">You should have your environment correctly loaded. Then type :<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">conda config --add channels defaults<\/div><div class = \"text-block\">conda config --add channels bioconda<\/div><div class = \"text-block\">conda config --add channels conda-forge<\/div><\/div><\/code><\/pre><\/div><div class = \"text-block\">That should have set up your conda channels correctly. Now, let's install mothur.<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">conda install Mothur<\/div><\/div><\/code><\/pre><\/div><div class = \"text-block\">Confirm the installation by typing \"y\" and wait patiently for the installation.<\/div><\/div>"}}],"cases":[],"data":null,"section":null,"section_color":"#94EBFF","critical":null,"critical_id":null,"duration":0},{"id":815194,"guid":"7F74B6AF4E79410CAFC603705B06CB31","previous_id":null,"previous_guid":null,"modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"44C56E0A21384300907D8A928FC62558","order_id":1,"type_id":6,"title":"Section","source":{"title":"Looking at bioconda"}},{"id":1054724,"guid":"1A3DE21612CC4C6CA08B2145EB345D58","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Meet Bioconda. Bioconda is a project aiming to integrate bioinformatic tools in the conda package management system. They have over 6000 bioinformatic tools available and a repository of recipe on how to use them.<\/div><div class = \"text-block\">Yes, Bioconda is your new best friend.<\/div><div class = \"text-block\">You can browse for your tool of interest in Bioconda through their <\/div><div class = \"text-block\"><a href=\"https:\/\/anaconda.org\/bioconda\/repo\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">tool repository<\/span><\/a><\/div><div class = \"text-block\">. For this tutorial we will install and run <\/div><div class = \"text-block\"><a href=\"https:\/\/www.mothur.org\/\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">Mothur<\/span><\/a><\/div><div class = \"text-block\">.<\/div><\/div>"}}],"cases":[],"data":null,"section":null,"section_color":"#A492FF","critical":null,"critical_id":null,"duration":0},{"id":815195,"guid":"F55938F0472B4507A6A464BE3BC47927","previous_id":815199,"previous_guid":"27617530DAF211E9B82569FE3293AD65","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"540E539A81FF40B3B718E2B251C4328C","order_id":1,"type_id":6,"title":"Section","source":{"title":"Using IPython"}},{"id":1054724,"guid":"0B480023433949D98D56EF24625340CE","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Is Mothur is installed in your conda environment? Great! Now open a Python jupyter notebook in your Document folder.<\/div><\/div>"}}],"cases":[],"data":null,"section":null,"section_color":"#84CE84","critical":null,"critical_id":null,"duration":0},{"id":815196,"guid":"1FA1445CBAEE4AFA9CDC2EFDBB9CBDF0","previous_id":815195,"previous_guid":"F55938F0472B4507A6A464BE3BC47927","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"F7E01D40BD1E473CB5246227D8D8EE69","order_id":1,"type_id":6,"title":"Section","source":{"title":"Using IPython"}},{"id":1054724,"guid":"9BBA8E99FE664B30A3B66289A21EB2AF","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Think of IPython as a bridge between Python and shell commands. It's basically allowing you to run shell command lines directly into your Python Notebook ! Are you excited? Ok, let's try it!<\/div><div class = \"text-block\">As you (should) know, in shell you can print a text using the \"echo\" command. Like this :<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">echo \"I love metagenomics\"<\/div><\/div><\/code><\/pre><\/div><div class = \"text-block\">Well, let's say you REALLY want to use the \"echo\" command in your notebook, then IPython allows you to just type :<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">!echo \"I love metagenomics\"<\/div><\/div><\/code><\/pre><\/div><div class = \"text-block\">Now, try it and run the cell ! You should see <\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/public\/526fb78095ba2a9fa201cc118027ed92e4a2b45a63bd0cecc506d2c2a14e4371\/brah2kge.png\" \/><\/div><div class = \"text-block\">And the same idea applies to ls, pwd, mkdir... all your favorite commands are there! All? Well, almost all...<\/div><\/div>"}},{"id":1054725,"guid":"1C50B0C3B4E9477EADE3BB6D86CB571B","order_id":2,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/public\/526fb78095ba2a9fa201cc118027ed92e4a2b45a63bd0cecc506d2c2a14e4371\/brah2kge.png\" \/><\/div>"}}],"cases":[],"data":null,"section":null,"section_color":"#84CE84","critical":null,"critical_id":null,"duration":0},{"id":815197,"guid":"BF03EB9850A948488502899D108DE5AB","previous_id":815196,"previous_guid":"1FA1445CBAEE4AFA9CDC2EFDBB9CBDF0","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"544810D0ACBB4397B62C825452740CAB","order_id":1,"type_id":6,"title":"Section","source":{"title":"Using IPython"}},{"id":1054724,"guid":"BE45C5BD82624AF385C2354B7482883E","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">If you play with IPython long enough, you'll quickly notice that !cd doesn't exactly work as it is supposed to. If you try to run <\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">!cd ..<\/div><\/div><\/code><\/pre><\/div><div class = \"text-block\">You won't see an error, but you won't have changed directory either... This is because each cell from the notebook is run as a temporary sub-shell. It opened a shell, ran the cd .. and then closed it. So you're back to square one.<\/div><div class = \"text-block\">To run these commands, you need to use a % instead of the ! <\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">%cd ..<\/div><\/div><\/code><\/pre><\/div><div class = \"text-block\">Now, it should work ! And even better, if you have the \"automagic\" IPython function installed, you don't need to use the \"%\". You can simply run :<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">cd ..<\/div><\/div><\/code><\/pre><\/div><div class = \"text-block\">You have automagic functions for the main shell commands (ls, cd, <\/div><div class = \"text-block\"><pre><code>%cat<\/code><\/pre><\/div><div class = \"text-block\">, man, mkdir, mv, pwd, rm and rmdir). <\/div><\/div>"}}],"cases":[],"data":null,"section":null,"section_color":"#84CE84","critical":null,"critical_id":null,"duration":0},{"id":815198,"guid":"B27BC21A580A4278BA27AC6F7A1B2DE1","previous_id":815197,"previous_guid":"BF03EB9850A948488502899D108DE5AB","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"E2B09715E9C34A2488D9EBFF637EA7CC","order_id":1,"type_id":6,"title":"Section","source":{"title":"running Mothur"}},{"id":1054724,"guid":"3D7C7B5E84664BF68CC9FE707A18A1D5","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">So let's use IPython to run Mothur. To do so, you need to find where conda installs your packages. The path to this folder should look like this :<\/div><div class = \"text-block\">'\/Users\/[USERNAME]\/anaconda3\/envs\/class_2019\/bin'<\/div><div class = \"text-block\">Once you know where is you bin folder, you can run Mothur using the command (here showing the output of the help command in Mothur) :<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">!\/Users\/[USERNAME]\/anaconda3\/envs\/class_2019\/bin\/mothur \"#help();\"<\/div><\/div><\/code><\/pre><\/div><div class = \"text-block\">Note that Mothur is by default an interactive tool. You cannot use this feature in a notebook, however, you can use <\/div><div class = \"text-block\"><a href=\"https:\/\/mothur.org\/wiki\/Command_line_mode\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">Mothur command line mode<\/span><\/a><\/div><div class = \"text-block\">.<\/div><\/div>"}}],"cases":[],"data":null,"section":null,"section_color":"#FFED92","critical":null,"critical_id":null,"duration":0},{"id":815199,"guid":"27617530DAF211E9B82569FE3293AD65","previous_id":815193,"previous_guid":"CB3726E9F0554DE6A29D36CA866A8D14","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"25727F5620D3445C88B04E7F2C03A272","order_id":1,"type_id":6,"title":"Section","source":{"title":"installing Mothur "}},{"id":1054724,"guid":"9B79BAD7193B421CB535EBEA1ADA56EE","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Let's fix your channels (these are the channels that conda look at when they look for packages to install).<\/div><div class = \"text-block\">In the conda navigator, load your \"class_2019\" environment, then click on the \"triangle\" logo and ask to open a terminal :<\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/protocols-files.s3.amazonaws.com\/private\/526fb78095ba2a9fa201cc118027ed92e4a2b45a63bd0cecc506d2c2a14e4371\/brew2kge.png?X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJYFAX46LHRVQMGOA%2F20190919%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20190919T153523Z&X-Amz-SignedHeaders=host&X-Amz-Expires=604800&X-Amz-Signature=1910120562554ae61f9025df9fb0297c219e7b05e013e89f38ee8d1e3ac81103\" \/><\/div><div class = \"text-block\">In the terminal type :<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">conda config --add channels defaults<\/div><div class = \"text-block\">conda config --add channels bioconda<\/div><div class = \"text-block\">conda config --add channels conda-forge<\/div><\/div><\/code><\/pre><\/div><div class = \"text-block\">then :<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\"><a href=\"#\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">conda install mothur <\/span><\/a><\/div><div class = \"text-block\"><pre><code>conda install -c bioconda mothur <\/code><\/pre><\/div><\/div><\/code><\/pre><\/div><div class = \"text-block\">When the prompt asks you if you really want to install the packages, type \"y\".<\/div><\/div>"}},{"id":1054725,"guid":"D0F6CA49975E405885FF0D8114046F52","order_id":2,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/protocols-files.s3.amazonaws.com\/private\/526fb78095ba2a9fa201cc118027ed92e4a2b45a63bd0cecc506d2c2a14e4371\/brew2kge.png?X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJYFAX46LHRVQMGOA%2F20190919%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20190919T153523Z&X-Amz-SignedHeaders=host&X-Amz-Expires=604800&X-Amz-Signature=1910120562554ae61f9025df9fb0297c219e7b05e013e89f38ee8d1e3ac81103\" \/><\/div>"}}],"cases":[],"data":null,"section":null,"section_color":"#94EBFF","critical":null,"critical_id":null,"duration":0}],"document":null,"materials":[],"description":"<div class = \"text-blocks\"><div class = \"text-block\">Learn how to run shell commands directly in your jupyter notebook using IPython<\/div><\/div>","changed_on":1568907358}