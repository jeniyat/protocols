{"uri":"ECOGEO-Workshop-Binning-Module-Anvi-o-fg8bjzw","version_id":"0","protocol_name":"ECOGEO Workshop: Binning Module - Anvi'o","protocol_name_html":"ECOGEO Workshop: Binning Module - Anvi'o","is_prepublished":"0","can_edit":"0","parent_id":null,"api_version":"2","is_new_mode":"1","last_modified":"1521699062","type_id":"1","link":"","fork_id":"","public_fork_note":"","number_of_steps":"6","has_versions":"1","first_published_date":"1470280263","publish_date":"2016-08-04 03:11:03","documents":"[{\"url\":\"https:\/\/s3.amazonaws.com\/pr-journal\/ejedwkw.pdf\",\"file_id\":\"4388\",\"thumb_url\":\"\/img\/extensions\/pdf.png\",\"ofn\":\"ecogeo-binning-tutorial.pdf\"}]","have_protocol_in_step":"0","is_protocol_in_step":"0","vendor_name":"Contributed by users","vendor_link":"https:\/\/www.protocols.io","vendor_logo":"\/img\/vendors\/1.png","mod_mins":"-45","mod_secs":"1","description":"<p>This is the hands-on interactive component to the ECOGEO Workshop Module on Binning.<\/p>","is_bookmarked":"0","can_reassign":"1","before_start":"<p>This tutorial is tailored for <a href=\"http:\/\/anvio.org\" target=\"_blank\">Anvi\u2019o<\/a> v2.0.1. If you do not have this version available to you, certain things may not work the way they should. The purpose of this tutorial is to demonstrate some of the anvi\u2019o capabilities using the Infant Gut dataset, which was generated, analyzed, and published by <a href=\"http:\/\/www.ncbi.nlm.nih.gov\/pubmed\/22936250\" target=\"_blank\">Sharon et al. (2013)<\/a>, and was re-analyzed in the <a href=\"https:\/\/peerj.com\/articles\/1319\/\" target=\"_blank\">anvi\u2019o methods paper<\/a>.<\/p>\n<p>\u00a0<\/p>\n<p>The attached ecogeo-binning-tutorial.pdf is the full tutorial used during the actual workshop. Many of the links no longer work and should be followed from this protocol. A similar non-ECOGEO tutorial is also updated and available online (<a href=\"http:\/\/merenlab.org\/tutorials\/infant-gut\/\" target=\"_blank\">http:\/\/merenlab.org\/tutorials\/infant-gut\/<\/a>)<\/p>","has_guidelines":"0","materials":[],"warning":"","version_class":"3328","public":"1","is_owner":"1","is_original_owner":"1","created_on":"1470274063","protocol_affiliation":"MBL, University of Chicago","affiliation":"SCOPE","doi":"dx.doi.org\/10.17504\/protocols.io.fg8bjzw","doi_status":"2","changed_fork_steps":"","profile_url":"Elisha-w2x2b443p2","protocol_img":"https:\/\/www.protocols.io\/img\/default_protocol.png","profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/cuhdwkw.jpg","full_name":"Elisha Wood-Charlson","created_by":"Elisha Wood-Charlson","private_link":"45CB1761A0C9FA62215A5C4064EBE594","original_img":"1","username":"elisha-woodcharlson","is_retracted":"0","retraction_reason":null,"plos_id":null,"manuscript_citation":null,"journal_name":null,"is_donations_disabled":"0","is_donations_disabled_by_user":"9","item_record_id":226228,"fork_info":[],"compare_forks":[],"protocols":[],"groups":[{"group_id":"129","group_uri":"ecogeo","group_name":"ECOGEO","group_logo":"https:\/\/s3.amazonaws.com\/pr-journal\/dh4dwkw.jpg","requested_uid":null,"request_flag":null,"my_request":"1"}],"number_of_shared_runs":[],"ownership_history":[],"keywords":"","transfer_to_user":[],"sub_transfer":false,"is_transfer_pending":false,"number_of_bookmarks":"2","collections":[],"tags":[],"archived":0,"sub_authors":[],"sub_protocols_number":0,"can_edit_shared":0,"shared_runs":[],"is_shared_run":0,"is_shared":1,"banner":null,"contact_badges":[{"badge_id":"4","badge_image":"\/img\/badges\/gold.svg","badge_description":"Gold power author!"},{"badge_id":"5","badge_image":"\/img\/badges\/earlyadopter.svg","badge_description":"Early adopter"},{"badge_id":"6","badge_image":"\/img\/badges\/socialbutterfly.svg","badge_description":"Social butterfly"}],"number_of_comments":0,"is_locked":0,"is_locked_by":false,"authors":"A. Murat Eren","authors_list":[{"name":"A. Murat Eren","affiliation":"MBL, University of Chicago","username":null,"profile_image":null}],"user":{"profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/cuhdwkw.jpg","username":"elisha-woodcharlson","full_name":"Elisha Wood-Charlson","created_by":"Elisha Wood-Charlson"},"access":{"can_view":"1","can_remove":"0","can_add":"0","can_edit":0,"can_publish":0,"can_get_doi":0,"can_share":"0","can_move":"1","can_transfer":"1","can_download":"1","is_locked":"0"},"is_contact_suspended":0,"guidelines":"","status_id":"1","is_research":"1","status_info":null,"steps":[{"id":"162761","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"E360EFAD8E6944A2AA3A71920E8DB98F","previous_guid":null,"previous_id":"0","last_modified":"1502718871","components":[{"component_id":"983964","previous_id":0,"original_id":"0","guid":"8B64A728BF984A3988A6CD72AD029F87","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"186647","previous_id":"983964","original_id":"0","guid":"8A4DE72BAEE64CBD95D568179E471A0F","previous_guid":"8B64A728BF984A3988A6CD72AD029F87","component_type_id":"1","data_id":"0","data":"<p>BAM files and contigs FASTA<\/p>\n<p>\u00a0<\/p>\n<p>In the directory 00_BAM_FILES_AND_CONTIGS you will find the the co-assembly of the time series data, contigs.fa, but you do NOT have an indexed BAM file for each sampling day. These BAM files were generated by mapping metagenomic short reads from each sample to contigs.fa. These files are too large for the VM. <\/p>\n<p>\u00a0<\/p>\n<p>Anvi\u2019o metagenomic workflow <a href=\"http:\/\/merenlab.org\/2016\/06\/22\/anvio-tutorial-v2\/#preparation\" target=\"_blank\">starts with BAM files and a FASTA file<\/a> for your contigs. There are many ways to get your contigs and BAM files for your metagenomes. But we have started implementing a tutorial that describes the workflow we use to generate these files regularly: \u201c <a href=\"http:\/\/merenlab.org\/tutorials\/assembly-based-metagenomics\/\" target=\"_blank\">A tutorial on assembly-based metagenomics<\/a> \u201d. Please feel free to take a look at that one, as well.<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>BAM files and contigs FASTA<\/p>\n<p>\u00a0<\/p>\n<p>In the directory 00_BAM_FILES_AND_CONTIGS you will find the the co-assembly of the time series data, contigs.fa, but you do NOT have an indexed BAM file for each sampling day. These BAM files were generated by mapping metagenomic short reads from each sample to contigs.fa. These files are too large for the VM. <\/p>\n<p>\u00a0<\/p>\n<p>Anvi\u2019o metagenomic workflow <a href=\"http:\/\/merenlab.org\/2016\/06\/22\/anvio-tutorial-v2\/#preparation\" target=\"_blank\">starts with BAM files and a FASTA file<\/a> for your contigs. There are many ways to get your contigs and BAM files for your metagenomes. But we have started implementing a tutorial that describes the workflow we use to generate these files regularly: \u201c <a href=\"http:\/\/merenlab.org\/tutorials\/assembly-based-metagenomics\/\" target=\"_blank\">A tutorial on assembly-based metagenomics<\/a> \u201d. Please feel free to take a look at that one, as well.<\/p>"},"is_project":0},{"component_id":"186679","previous_id":"186647","original_id":"0","guid":"7DFB7B8FBE1F4CD79BDF4DB61272186C","previous_guid":"8A4DE72BAEE64CBD95D568179E471A0F","component_type_id":"15","data_id":"1175","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ cd \/home\/c-debi\/ecogeo\/binning\/00_BAM_FILES_AND_CONTIGS","description":"","os_name":"","os_version":"","can_edit":"1"},"is_project":0}]},{"id":"162789","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"EC6BCB618C014F8B99EFBBEDF2236D41","previous_guid":"E360EFAD8E6944A2AA3A71920E8DB98F","previous_id":"162761","last_modified":"1502718871","components":[{"component_id":"983965","previous_id":0,"original_id":"0","guid":"6E23E6A83ED949ABB0A6C77AB7923D3C","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"186681","previous_id":"983965","original_id":"0","guid":"51BF873549264B7F9BC0BF465E9040BE","previous_guid":"6E23E6A83ED949ABB0A6C77AB7923D3C","component_type_id":"1","data_id":"0","data":"<p>Contigs database &amp; anvi\u2019o merged profile<\/p>\n<p>\u00a0<\/p>\n<p>The directory 01_ANVIO_MERGED_PROFILE contains the anvi\u2019o contigs database that is generated from contigs.fa, and the anvi\u2019o merged profile, which is generated by merging individual anvi\u2019o profiles for each of the BAM file in 00_BAM_FILES_AND_CONTIG.<\/p>\n<p>\u00a0<\/p>\n<p>An anvi\u2019o contigs database keeps all the information related to your contigs: positions of open reading frames, kmer frequencies for each contig, where splits start and end, functional and taxonomic annotation of genes, etc. The contigs database is an essential component of everything related to anvi\u2019o metagenomic workflow. In contrast to the contigs database, an anvi\u2019o profile database stores sample-specific information about contigs. Profiling a BAM file with anvi\u2019o creates a single profile that reports properties for each contig in a single sample based on mapping results. Each profile database automatically links to a contigs database, and anvi\u2019o can merge single profiles that link to the same contigs database into anvi\u2019o merged profiles (which is what you have in this directory). If you would like to learn more about these, here are some direct links: <a href=\"http:\/\/merenlab.org\/2016\/06\/22\/anvio-tutorial-v2\/#profiling-bam-files\" target=\"_blank\">creating an anvi\u2019o contigs database , creating single anvi\u2019o profiles, and merging anvi\u2019o profiles<\/a>.<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Contigs database &amp; anvi\u2019o merged profile<\/p>\n<p>\u00a0<\/p>\n<p>The directory 01_ANVIO_MERGED_PROFILE contains the anvi\u2019o contigs database that is generated from contigs.fa, and the anvi\u2019o merged profile, which is generated by merging individual anvi\u2019o profiles for each of the BAM file in 00_BAM_FILES_AND_CONTIG.<\/p>\n<p>\u00a0<\/p>\n<p>An anvi\u2019o contigs database keeps all the information related to your contigs: positions of open reading frames, kmer frequencies for each contig, where splits start and end, functional and taxonomic annotation of genes, etc. The contigs database is an essential component of everything related to anvi\u2019o metagenomic workflow. In contrast to the contigs database, an anvi\u2019o profile database stores sample-specific information about contigs. Profiling a BAM file with anvi\u2019o creates a single profile that reports properties for each contig in a single sample based on mapping results. Each profile database automatically links to a contigs database, and anvi\u2019o can merge single profiles that link to the same contigs database into anvi\u2019o merged profiles (which is what you have in this directory). If you would like to learn more about these, here are some direct links: <a href=\"http:\/\/merenlab.org\/2016\/06\/22\/anvio-tutorial-v2\/#profiling-bam-files\" target=\"_blank\">creating an anvi\u2019o contigs database , creating single anvi\u2019o profiles, and merging anvi\u2019o profiles<\/a>.<\/p>"},"is_project":0},{"component_id":"186684","previous_id":"186681","original_id":"0","guid":"0CEF83BB0BF4439587865A970B04EE6C","previous_guid":"51BF873549264B7F9BC0BF465E9040BE","component_type_id":"15","data_id":"1176","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ cd ..\/01_ANVIO_MERGED_PROFILE\/\n$ anvi-interactive -p PROFILE.db -c CONTIGS.db","description":"Execute anvi-interactive interface. To kill the interactive interface, press Cntl + C in the terminal window.","os_name":"","os_version":"","can_edit":"1"},"is_project":0}]},{"id":"162798","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"A96B355B4F67469EAAB9575F364EABEB","previous_guid":"EC6BCB618C014F8B99EFBBEDF2236D41","previous_id":"162789","last_modified":"1502718871","components":[{"component_id":"983966","previous_id":0,"original_id":"0","guid":"A37E670570F64D2089D4C9B6F6CA638A","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"186696","previous_id":"983966","original_id":"0","guid":"1FBC9233138E4EC98AD641657D08F10D","previous_guid":"A37E670570F64D2089D4C9B6F6CA638A","component_type_id":"1","data_id":"0","data":"<p>Importing taxonomy<\/p>\n<p>\u00a0<\/p>\n<p>Centrifuge (<a href=\"https:\/\/github.com\/infphilo\/centrifuge\" target=\"_blank\">code<\/a>, <a href=\"http:\/\/biorxiv.org\/content\/early\/2016\/05\/25\/054965.article-info\" target=\"_blank\">pre-print<\/a>) is <a href=\"http:\/\/merenlab.org\/2016\/06\/18\/importing-taxonomy\/#centrifuge-output\" target=\"_blank\">one of the options<\/a> to <a href=\"http:\/\/merenlab.org\/2016\/06\/18\/importing-taxonomy\/\" target=\"_blank\">import taxonomic annotations<\/a> into an anvi\u2019o contigs database. Centrifuge files for the infant gut data are already in the directory 02_CENTRIFUGE_FILES of your data pack.<\/p>\n<p><img src=\"http:\/\/merenlab.org\/tutorials\/infant-gut\/images\/infant-gut-with-tax.png\" alt=\"Infant gut merged\" width=\"400\" height=\"430\" \/><\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Importing taxonomy<\/p>\n<p>\u00a0<\/p>\n<p>Centrifuge (<a href=\"https:\/\/github.com\/infphilo\/centrifuge\" target=\"_blank\">code<\/a>, <a href=\"http:\/\/biorxiv.org\/content\/early\/2016\/05\/25\/054965.article-info\" target=\"_blank\">pre-print<\/a>) is <a href=\"http:\/\/merenlab.org\/2016\/06\/18\/importing-taxonomy\/#centrifuge-output\" target=\"_blank\">one of the options<\/a> to <a href=\"http:\/\/merenlab.org\/2016\/06\/18\/importing-taxonomy\/\" target=\"_blank\">import taxonomic annotations<\/a> into an anvi\u2019o contigs database. Centrifuge files for the infant gut data are already in the directory 02_CENTRIFUGE_FILES of your data pack.<\/p>\n<p><img src=\"http:\/\/merenlab.org\/tutorials\/infant-gut\/images\/infant-gut-with-tax.png\" alt=\"Infant gut merged\" width=\"400\" height=\"430\" \/><\/p>"},"is_project":0},{"component_id":"186704","previous_id":"186696","original_id":"0","guid":"E69204ACFF3D4E489ECA10C0919FD7AE","previous_guid":"1FBC9233138E4EC98AD641657D08F10D","component_type_id":"26","data_id":"11947","data":"","order_id":"2","name":"Note","data_by_id":"1","type_id":"26","source_data":{"annotation_id":"11947","thread_id":"11947","id":"11947","thread_title":"Annotation on step 3 of ECOGEO Workshop: Binning Module - Anvi'o","uri":"annotation-on-step-3-of-ecogeo-workshop-binning-module","thread_uri":"annotation-on-step-3-of-ecogeo-workshop-binning-module","step_id":"162798","protocol_uri":"ECOGEO-Workshop-Binning-Module-Anvi-o-fg8bjzw","protocol_name":"ECOGEO Workshop: Binning Module - Anvi'o","protocol_name_html":"ECOGEO Workshop: Binning Module - Anvi'o","annotation":"<p>In the Layers tab find the <em>Taxonomy<\/em> layer, set its height to 200, and click <em>Draw<\/em> again. Then click <em>Save State<\/em> button, and overwrite the default state. This will make sure anvi\u2019o remembers to make the height of that layer 200px the next time you run the interactive interface!<\/p>","thread_text":"<p>In the Layers tab find the <em>Taxonomy<\/em> layer, set its height to 200, and click <em>Draw<\/em> again. Then click <em>Save State<\/em> button, and overwrite the default state. This will make sure anvi\u2019o remembers to make the height of that layer 200px the next time you run the interactive interface!<\/p>","body":"<p>In the Layers tab find the <em>Taxonomy<\/em> layer, set its height to 200, and click <em>Draw<\/em> again. Then click <em>Save State<\/em> button, and overwrite the default state. This will make sure anvi\u2019o remembers to make the height of that layer 200px the next time you run the interactive interface!<\/p>","is_private":"0","public_protocol":"1","can_edit":0,"can_delete":"0","show_name":"0","created_date":"1470275997","created_on":"1470275997","modified_on":null,"last_updated":null,"profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/cuhdwkw.jpg","full_name":"Elisha Wood-Charlson","affiliation":"SCOPE","username":"elisha-woodcharlson","email":"elishawc@hawaii.edu","pa_useranme":"elisha-woodcharlson","comments":[]},"is_project":0},{"component_id":"186702","previous_id":"186704","original_id":"0","guid":"075F4F06D59F421E9F796C063446E796","previous_guid":"E69204ACFF3D4E489ECA10C0919FD7AE","component_type_id":"15","data_id":"1177","data":"","order_id":"3","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ anvi-import-taxonomy -c CONTIGS.db -i ..\/02_CENTRIFUGE_FILES\/*.tsv -p centrifuge\n$ anvi-interactive -p PROFILE.db -c CONTIGS.db","description":"Adds an additional layer with taxonomy.","os_name":"","os_version":"","can_edit":"1"},"is_project":0}]},{"id":"162806","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"6AC37E64602F496785D436CEA8DB95FB","previous_guid":"A96B355B4F67469EAAB9575F364EABEB","previous_id":"162798","last_modified":"1502718871","components":[{"component_id":"983967","previous_id":0,"original_id":"0","guid":"17AC2D39FB664D10966F311EF24F8928","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"186708","previous_id":"983967","original_id":"0","guid":"C1B2308BD3A14C309C7686677B2C4A9E","previous_guid":"17AC2D39FB664D10966F311EF24F8928","component_type_id":"1","data_id":"0","data":"<p>Importing external binning results<\/p>\n<p>\u00a0<\/p>\n<p>The directory 03_EXTERNAL_BINNING_RESULTS contains number of files describe the binning of contigs in the infant gut data based on various binning approaches (see annotation).<\/p>\n<p>\u00a0<\/p>\n<p>There is a SHARON_et_al.txt files with BLAST searched sequences in bins identified by the authors of the <a href=\"http:\/\/ggkbase.berkeley.edu\/carrol\" target=\"_blank\">study<\/a> so our contigs will have matching names.<\/p>\n<p><img src=\"http:\/\/merenlab.org\/tutorials\/infant-gut\/images\/infant-gut-concoct.png\" alt=\"Infant gut merged\" width=\"400\" height=\"444\" \/><\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Importing external binning results<\/p>\n<p>\u00a0<\/p>\n<p>The directory 03_EXTERNAL_BINNING_RESULTS contains number of files describe the binning of contigs in the infant gut data based on various binning approaches (see annotation).<\/p>\n<p>\u00a0<\/p>\n<p>There is a SHARON_et_al.txt files with BLAST searched sequences in bins identified by the authors of the <a href=\"http:\/\/ggkbase.berkeley.edu\/carrol\" target=\"_blank\">study<\/a> so our contigs will have matching names.<\/p>\n<p><img src=\"http:\/\/merenlab.org\/tutorials\/infant-gut\/images\/infant-gut-concoct.png\" alt=\"Infant gut merged\" width=\"400\" height=\"444\" \/><\/p>"},"is_project":0},{"component_id":"186710","previous_id":"186708","original_id":"0","guid":"B03CFF2F4E1A4E4191D31E3149875C27","previous_guid":"C1B2308BD3A14C309C7686677B2C4A9E","component_type_id":"26","data_id":"11948","data":"","order_id":"2","name":"Note","data_by_id":"1","type_id":"26","source_data":{"annotation_id":"11948","thread_id":"11948","id":"11948","thread_title":"Annotation on step 4 of ECOGEO Workshop: Binning Module - Anvi'o","uri":"annotation-on-step-4-of-ecogeo-workshop-binning-module","thread_uri":"annotation-on-step-4-of-ecogeo-workshop-binning-module","step_id":"162806","protocol_uri":"ECOGEO-Workshop-Binning-Module-Anvi-o-fg8bjzw","protocol_name":"ECOGEO Workshop: Binning Module - Anvi'o","protocol_name_html":"ECOGEO Workshop: Binning Module - Anvi'o","annotation":"<p>Three files are courtesy of Elaina Graham, who used <a href=\"http:\/\/www.ncbi.nlm.nih.gov\/pmc\/articles\/PMC4183954\/\" target=\"_blank\">GroopM<\/a> (v0.3.5), <a href=\"https:\/\/peerj.com\/articles\/1165\/\" target=\"_blank\">MetaBat<\/a> (v0.26.3), and <a href=\"https:\/\/microbiomejournal.biomedcentral.com\/articles\/10.1186\/2049-2618-2-26\" target=\"_blank\">MaxBin<\/a> (v2.1.1) to bin contigs using BAM files and the contigs FASTA in 01_ANVIO_MERGED_PROFILE.<\/p>\n<p>\u00a0<\/p>\n<p>For future references, here are the parameters:<br \/># GroopM v0.3.5 (followed the general workflow on their manual)<br \/>$ groopm parse groopm.db contigs.fa [list of bam files]<br \/>$ groopm core groopm.db -c 1000 -s 10 -b 1000000<br \/>$ groopm recruit groopm.db -c 500 -s 200<br \/>$ groopm extract groopm.db contigs.fa<br \/># MetaBat v0.26.3 (used jgi_summarize_bam_contig_depths to get a depth<br \/>file from BAM files).<br \/>$ metabat -i contigs.fa -a depth.txt -o bin<br \/># MaxBin v2.1.1<br \/>$ run_MaxBin.pl -contig contigs.fa -out maxbin_IGM -abund_list [list of<br \/>all coverage files in associated format]<\/p>\n<p>\u00a0<\/p>\n<p>CONCOCT results come from the CONCOCT module embedded within anvi\u2019o.<\/p>","thread_text":"<p>Three files are courtesy of Elaina Graham, who used <a href=\"http:\/\/www.ncbi.nlm.nih.gov\/pmc\/articles\/PMC4183954\/\" target=\"_blank\">GroopM<\/a> (v0.3.5), <a href=\"https:\/\/peerj.com\/articles\/1165\/\" target=\"_blank\">MetaBat<\/a> (v0.26.3), and <a href=\"https:\/\/microbiomejournal.biomedcentral.com\/articles\/10.1186\/2049-2618-2-26\" target=\"_blank\">MaxBin<\/a> (v2.1.1) to bin contigs using BAM files and the contigs FASTA in 01_ANVIO_MERGED_PROFILE.<\/p>\n<p>\u00a0<\/p>\n<p>For future references, here are the parameters:<br \/># GroopM v0.3.5 (followed the general workflow on their manual)<br \/>$ groopm parse groopm.db contigs.fa [list of bam files]<br \/>$ groopm core groopm.db -c 1000 -s 10 -b 1000000<br \/>$ groopm recruit groopm.db -c 500 -s 200<br \/>$ groopm extract groopm.db contigs.fa<br \/># MetaBat v0.26.3 (used jgi_summarize_bam_contig_depths to get a depth<br \/>file from BAM files).<br \/>$ metabat -i contigs.fa -a depth.txt -o bin<br \/># MaxBin v2.1.1<br \/>$ run_MaxBin.pl -contig contigs.fa -out maxbin_IGM -abund_list [list of<br \/>all coverage files in associated format]<\/p>\n<p>\u00a0<\/p>\n<p>CONCOCT results come from the CONCOCT module embedded within anvi\u2019o.<\/p>","body":"<p>Three files are courtesy of Elaina Graham, who used <a href=\"http:\/\/www.ncbi.nlm.nih.gov\/pmc\/articles\/PMC4183954\/\" target=\"_blank\">GroopM<\/a> (v0.3.5), <a href=\"https:\/\/peerj.com\/articles\/1165\/\" target=\"_blank\">MetaBat<\/a> (v0.26.3), and <a href=\"https:\/\/microbiomejournal.biomedcentral.com\/articles\/10.1186\/2049-2618-2-26\" target=\"_blank\">MaxBin<\/a> (v2.1.1) to bin contigs using BAM files and the contigs FASTA in 01_ANVIO_MERGED_PROFILE.<\/p>\n<p>\u00a0<\/p>\n<p>For future references, here are the parameters:<br \/># GroopM v0.3.5 (followed the general workflow on their manual)<br \/>$ groopm parse groopm.db contigs.fa [list of bam files]<br \/>$ groopm core groopm.db -c 1000 -s 10 -b 1000000<br \/>$ groopm recruit groopm.db -c 500 -s 200<br \/>$ groopm extract groopm.db contigs.fa<br \/># MetaBat v0.26.3 (used jgi_summarize_bam_contig_depths to get a depth<br \/>file from BAM files).<br \/>$ metabat -i contigs.fa -a depth.txt -o bin<br \/># MaxBin v2.1.1<br \/>$ run_MaxBin.pl -contig contigs.fa -out maxbin_IGM -abund_list [list of<br \/>all coverage files in associated format]<\/p>\n<p>\u00a0<\/p>\n<p>CONCOCT results come from the CONCOCT module embedded within anvi\u2019o.<\/p>","is_private":"0","public_protocol":"1","can_edit":0,"can_delete":"0","show_name":"0","created_date":"1470276196","created_on":"1470276196","modified_on":null,"last_updated":null,"profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/cuhdwkw.jpg","full_name":"Elisha Wood-Charlson","affiliation":"SCOPE","username":"elisha-woodcharlson","email":"elishawc@hawaii.edu","pa_useranme":"elisha-woodcharlson","comments":[]},"is_project":0},{"component_id":"186730","previous_id":"186710","original_id":"0","guid":"B2D46FC9721E4ED3A0456C4A5BE00FC9","previous_guid":"B03CFF2F4E1A4E4191D31E3149875C27","component_type_id":"15","data_id":"1179","data":"","order_id":"3","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ anvi-import-collection -c CONTIGS.db -p PROFILE.db -C CONCOCT --contigs-mode ..\/03_EXTERNAL_BINNING_RESULTS\/CONCOCT.txt\n$ anvi-interactive -p PROFILE.db -c CONTIGS.db","description":"Imports CONCOCT file that describes the results of an external binning effort into your profile database.\n\nOnce the display is ready, click Bins > Load bin collection > CONCOCT > Load.","os_name":"","os_version":"","can_edit":"1"},"is_project":0}]},{"id":"162822","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"778A74BAF73F429695BD533C1D37BF9D","previous_guid":"6AC37E64602F496785D436CEA8DB95FB","previous_id":"162806","last_modified":"1502718871","components":[{"component_id":"983968","previous_id":0,"original_id":"0","guid":"D3CC1400DAD1462B95F1E91696B6D680","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"186748","previous_id":"983968","original_id":"0","guid":"ABA5FAE439954F7AA269ECA7D17A8819","previous_guid":"D3CC1400DAD1462B95F1E91696B6D680","component_type_id":"1","data_id":"0","data":"<p>Comparing multiple binning approaches<\/p>\n<p>\u00a0<\/p>\n<p>Here we have the organization of contigs based on hierarchical clustering analysis, taxonomy from Centrifuge per contig (which is independent of the organization of contigs so it is a very good validation to see whether the organization makes sense), and results from the original publication from Sharon et al., in which authors did a very careful job to identify every genome in the dataset, including resolving the <em>Staphylococcus pangenome.<\/em> So these are the things we will assume \u201ctrue enough\u201d to build upon.<\/p>\n<p>\u00a0<\/p>\n<p>To compare binning results, we could import each external binning result into the profile database the way we imported CONCOCT. Unfortunately, Anvi'o Can only display one bin collection. But we have a workaround - merge all binning results into a single file (anvi-script-merge-collections) and use that file as an \u2018additional data file\u2019 to visualize them in the interactive interface.<\/p>\n<p><img src=\"http:\/\/merenlab.org\/tutorials\/infant-gut\/images\/infant-gut-collections.png\" alt=\"Infant gut merged\" width=\"400\" height=\"501\" \/><\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Comparing multiple binning approaches<\/p>\n<p>\u00a0<\/p>\n<p>Here we have the organization of contigs based on hierarchical clustering analysis, taxonomy from Centrifuge per contig (which is independent of the organization of contigs so it is a very good validation to see whether the organization makes sense), and results from the original publication from Sharon et al., in which authors did a very careful job to identify every genome in the dataset, including resolving the <em>Staphylococcus pangenome.<\/em> So these are the things we will assume \u201ctrue enough\u201d to build upon.<\/p>\n<p>\u00a0<\/p>\n<p>To compare binning results, we could import each external binning result into the profile database the way we imported CONCOCT. Unfortunately, Anvi'o Can only display one bin collection. But we have a workaround - merge all binning results into a single file (anvi-script-merge-collections) and use that file as an \u2018additional data file\u2019 to visualize them in the interactive interface.<\/p>\n<p><img src=\"http:\/\/merenlab.org\/tutorials\/infant-gut\/images\/infant-gut-collections.png\" alt=\"Infant gut merged\" width=\"400\" height=\"501\" \/><\/p>"},"is_project":0},{"component_id":"186758","previous_id":"186748","original_id":"0","guid":"8B446768F01D437A9B977A82BC6D6073","previous_guid":"ABA5FAE439954F7AA269ECA7D17A8819","component_type_id":"15","data_id":"1180","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"$ python anvi-script-merge-collections -c CONTIGS.db -i ..\/03_EXTERNAL_BINNING_RESULTS\/*.txt -o collections.tsv\n$ head ..\/03_EXTERNAL_BINNING_RESULTS\/collections.tsv | column -t\n$ anvi-interactive -p PROFILE.db -c CONTIGS.db -A collections.tsv","description":"When you look at collections.tsv, it has a very simple format.","os_name":"","os_version":"","can_edit":"1"},"is_project":0}]},{"id":"162843","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"509B1003B38445FCA32FDFE55D2AE629","previous_guid":"778A74BAF73F429695BD533C1D37BF9D","previous_id":"162822","last_modified":"1502718871","components":[{"component_id":"983969","previous_id":0,"original_id":"0","guid":"9062E174BBBD467C98DF03A93B16E2C2","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"186786","previous_id":"983969","original_id":"0","guid":"9FA194EF21304231A105644C10836ACA","previous_guid":"9062E174BBBD467C98DF03A93B16E2C2","component_type_id":"1","data_id":"0","data":"<p>This should give you a good start with using Anvi'o to visualize your bins. If you would like to continue with this tutorial online, please visit the Meren Lab <a href=\"http:\/\/merenlab.org\/tutorials\/infant-gut\/\" target=\"_blank\">tutorial on infant gut<\/a>. The workshop organizers highly recommend reading through the full tutorial, even if you don't run the codes, to get \"<strong>Meren\u2019s two cents on binning<\/strong>\".<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>This should give you a good start with using Anvi'o to visualize your bins. If you would like to continue with this tutorial online, please visit the Meren Lab <a href=\"http:\/\/merenlab.org\/tutorials\/infant-gut\/\" target=\"_blank\">tutorial on infant gut<\/a>. The workshop organizers highly recommend reading through the full tutorial, even if you don't run the codes, to get \"<strong>Meren\u2019s two cents on binning<\/strong>\".<\/p>"},"is_project":0}]}]}