{"id":13978,"title":"Effective early disease risk assessment with matrix factorization on a large-scale medical database","title_html":"Effective early disease risk assessment with matrix factorization on a large-scale medical database","image":{"source":"https:\/\/www.protocols.io\/img\/default_protocol.png","placeholder":"https:\/\/www.protocols.io\/img\/default_protocol.png"},"doi":"dx.doi.org\/10.17504\/protocols.io.rv2d68e","doi_status":2,"uri":"effective-early-disease-risk-assessment-with-matri-rv2d68e","type_id":1,"published_on":1543334762,"version_id":0,"created_on":1532323461,"categories":null,"creator":{"name":"Chu-Yu Chin","affiliation":null,"username":"chuyu-chin","link":"https:\/\/doi.org\/10.1371\/journal.pone.0207579","image":{"source":"\/img\/avatars\/002.png","placeholder":"\/img\/avatars\/002.png"},"badges":[{"id":2,"image":{"source":"\/img\/badges\/bronze.svg","placeholder":"\/img\/badges\/bronze.svg"},"name":"Author"}],"research_interests":null},"journal":"PLOS One","journal_name":"PLOS One","journal_link":"https:\/\/doi.org\/10.1371\/journal.pone.0207579","public":1,"has_versions":0,"link":"https:\/\/doi.org\/10.1371\/journal.pone.0207579","number_of_steps":5,"authors":[{"name":"Chu-Yu Chin","affiliation":"National Cheng Kung University","username":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"research_interests":null},{"name":"Sun-Yuan Hsieh","affiliation":"National Cheng Kung University","username":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"research_interests":null},{"name":"Vincent S. Tseng","affiliation":"National Chiao Tung University","username":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"research_interests":null}],"versions":[],"groups":[],"has_subprotocols":0,"is_subprotocol":0,"is_bookmarked":1,"forks_count":{"private":0,"public":0},"steps":[{"id":646361,"guid":"2E0F4D8AC6EE40E78024AAB033F03111","previous_id":null,"previous_guid":null,"modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"8B2B2CECB7234447906FCD08B75EB4CA","order_id":1,"type_id":6,"title":"Section","source":{"title":"Install Prerequisite software and libraries"}},{"id":1054723,"guid":"3B8B729DD79F41899122B38F5521B9D5","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">This protocol requires:<\/div><div class = \"text-block\"><ul style = \"list-style-type:disc;\"><li style = \"counter-reset:ol0;list-style-type:disc;\">Matlab 2016a<\/li><li style = \"counter-reset:ol0;list-style-type:disc;\">LibSVM version 3.22<\/li><\/ul><\/div><div class = \"text-block\">Each instruction can be verified on property websites.<\/div><div class = \"text-block\">The following steps include: dataset preparation, executing NMF multiplicative update algorithm, paremeter settings for SVM and effectiveness evaluation on the SVM-based disease risk assessment.<\/div><\/div>"}}],"cases":null,"data":null,"section":null,"section_color":null},{"id":646362,"guid":"75545D30576E4880B5345595CCFE60CD","previous_id":646361,"previous_guid":"2E0F4D8AC6EE40E78024AAB033F03111","modified_on":1532933935,"protocol_id":0,"components":[{"id":1054723,"guid":"D39B1BD745CF400980F7FC854F44E265","order_id":1,"type_id":6,"title":"Section","source":{"title":"Prepare and load a Patient-Diagnosis Disease Matrix by the LibSVM format with label"}},{"id":1054723,"guid":"6B8974AA815B480783E951466435B5DE","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">The medical diagnostic record data to be analyzed is converted into a patient-diagnosis disease matrix\u00a0in advance.<\/div><div class = \"text-block\">Running the command below in the Matlab to load patient-diagnosis disease matrix by the libSVM Format.<\/div><div class = \"text-block\"><pre><code>>> [label, inst] = libsvmread('C:\\SVM_data\\200.libsvm.txt'); <\/code><\/pre><\/div><div class = \"text-block\">An example of patient-diagnosis disease matrix with the LibSVM format.<\/div><\/div>"}},{"id":1054723,"guid":"EA18BED94C434A5CBCA6DCF9EFF65B6C","order_id":2,"type_id":17,"title":"result","source":{"body":"<p>The instance data matrix and label will be show in the Matlab workspace.<\/p>\n<p> <\/p>\n<p><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/32p2r7n.png\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/32p2r7n.png\" data-ofn=\"e1.png\" \/><\/p>"}}],"cases":null,"data":null,"section":null,"section_color":null},{"id":646363,"guid":"9F9AF391849F45228C684C3475F64285","previous_id":646362,"previous_guid":"75545D30576E4880B5345595CCFE60CD","modified_on":1532936474,"protocol_id":0,"components":[{"id":1054723,"guid":"DE5A0FD0C58743319F26F545AE525CA1","order_id":1,"type_id":6,"title":"Section","source":{"title":"Executing the NMF multiplicative update algorithm"}},{"id":1054723,"guid":"093C0A5ED264482F99282D3DAFB7968B","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">The step comprises three phases. First, a number of dimension should be set. The appropriate values can be selected based on the training data by performing step 3-5.\u00a0Second, to generate the NMF-Based matrix, the NMF multiplicative update algorithm is performed. Third, the NMF-Based matrix is stored in the LibSVM file format.<\/div><div class = \"text-block\"><pre><code>>> numOfR=200\n>> rng(1)\n>> [nmfbasedmatrix,H] = nnmf(inst, numOfR, 'algorithm','mult');\n\n>> %Create sparse matrix\n>> nmfbasedmatrixS = sparse(nmfbasedmatrix)  \n\n>> %write the matrix to the file by the libSVM format.\n>> libsvmwrite('C:\\NMF_Based_matrix\\200.libsvm',label, nmfbasedmatrixS);  <\/code><\/pre><\/div><\/div>"}},{"id":1054723,"guid":"7AE22F8688B543AA9681DC042AA2FD4B","order_id":2,"type_id":17,"title":"result","source":{"body":"<p>A new matrix called the NMF-based matrix has been generated and displayed in the matlab workspace.<\/p>\n<p> <\/p>\n<p><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/32v2r7n.jpg\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/32v2r7n.jpg\" data-ofn=\"rr23.JPG\" \/><\/p>\n<p> <\/p>\n<p> <\/p>\n<p>The NMF-based matrix is stored in the SVM file format.<\/p>\n<p> <\/p>\n<p><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/32s2r7n.png\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/32s2r7n.png\" data-ofn=\"r22.png\" \/><\/p>\n<p>An example of the NMF-based matrix with the LibSVM format.<\/p>"}}],"cases":null,"data":null,"section":null,"section_color":null},{"id":646364,"guid":"45DF343BC5C84944AB3F4FCC2FFA60E1","previous_id":646363,"previous_guid":"9F9AF391849F45228C684C3475F64285","modified_on":1532934439,"protocol_id":0,"components":[{"id":1054723,"guid":"2901E1DE19214466919A009606F7F18E","order_id":1,"type_id":6,"title":"Section","source":{"title":"Obtaining the SVM parameters by using the grid search method with stratified ten-fold cross-validation."}},{"id":1054723,"guid":"061A6BEF94AD4061B198913E68AA3665","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">In order to obtain more suitable SVM parameters, based on stratified ten-fold cross-validation, the grid search method that derived by the LibSVM is utilized.<\/div><div class = \"text-block\"><pre><code>c:\\>python C:\\libsvm-3.22\\tools\\grid.py C:\\NMF_Based_matrix\\200.libsvm -v 10<\/code><\/pre><\/div><\/div>"}},{"id":1054723,"guid":"434D47CCF8AF477B8228FED9CFD26CBF","order_id":2,"type_id":17,"title":"result","source":{"body":"<p>In this example, the suitable parameters values of C and g are 2 and 0.03125, respectively.<\/p>\n<p> <\/p>\n<p> <\/p>\n<p><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/33c2r7n.jpg\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/33c2r7n.jpg\" data-ofn=\"grid_.JPG\" \/><\/p>\n<p> <\/p>\n<p>[local] 5 -7 74.2 (best c=32.0, g=0.0078125, rate=74.2)<br \/>[local] -1 -7 71.9 (best c=32.0, g=0.0078125, rate=74.2)<br \/>[local] 5 -1 62.9 (best c=32.0, g=0.0078125, rate=74.2)<br \/>[local] -1 -1 57.5 (best c=32.0, g=0.0078125, rate=74.2)<br \/>[local] 11 -7 69.2 (best c=32.0, g=0.0078125, rate=74.2)<br \/>[local] 11 -1 61.0 (best c=32.0, g=0.0078125, rate=74.2)<br \/>[local] 5 -13 72.4 (best c=32.0, g=0.0078125, rate=74.2)<br \/>[local] -1 -13 46.4 (best c=32.0, g=0.0078125, rate=74.2)<br \/>[local] 11 -13 72.7 (best c=32.0, g=0.0078125, rate=74.2)<br \/>[local] -3 -7 57.2 (best c=32.0, g=0.0078125, rate=74.2)<br \/>[local] -3 -1 54.9 (best c=32.0, g=0.0078125, rate=74.2)<br \/>[local] -3 -13 46.4 (best c=32.0, g=0.0078125, rate=74.2)<br \/>[local] 5 1 54.3 (best c=32.0, g=0.0078125, rate=74.2)<br \/>[local] -1 1 50.3 (best c=32.0, g=0.0078125, rate=74.2)<br \/>[local] 11 1 51.9 (best c=32.0, g=0.0078125, rate=74.2)<br \/>[local] -3 1 46.9 (best c=32.0, g=0.0078125, rate=74.2)<br \/>[local] 9 -7 71.6 (best c=32.0, g=0.0078125, rate=74.2)<br \/>[local] 9 -1 60.9 (best c=32.0, g=0.0078125, rate=74.2)<br \/>[local] 9 -13 75.7 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 9 1 51.9 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 5 -11 75.3 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] -1 -11 46.4 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 11 -11 73.9 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] -3 -11 46.4 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 9 -11 73.3 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 3 -7 75.1 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 3 -1 63.7 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 3 -13 60.0 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 3 1 55.2 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 3 -11 72.7 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 5 -5 72.9 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] -1 -5 75.2 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 11 -5 68.2 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] -3 -5 70.8 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 9 -5 68.7 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 3 -5 74.2 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 15 -7 66.1 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 15 -1 61.0 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 15 -13 72.9 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 15 1 51.9 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 15 -11 72.2 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 15 -5 64.1 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 5 -15 60.0 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] -1 -15 46.4 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 11 -15 75.6 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] -3 -15 46.4 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 9 -15 75.3 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 3 -15 46.4 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 15 -15 73.7 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] -5 -7 46.4 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] -5 -1 46.4 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] -5 -13 46.4 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] -5 1 46.4 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] -5 -11 46.4 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] -5 -5 47.9 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] -5 -15 46.4 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 5 3 49.6 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] -1 3 48.0 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 11 3 49.8 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] -3 3 46.4 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 9 3 49.8 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 3 3 49.4 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 15 3 49.8 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] -5 3 46.4 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 7 -7 73.5 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 7 -1 61.4 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 7 -13 75.2 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 7 1 52.1 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 7 -11 75.7 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 7 -5 71.4 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 7 -15 72.3 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 7 3 49.8 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 5 -9 75.7 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] -1 -9 59.5 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 11 -9 73.0 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] -3 -9 46.4 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 9 -9 73.6 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 3 -9 75.3 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 15 -9 68.6 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] -5 -9 46.4 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 7 -9 73.7 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 1 -7 75.3 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 1 -1 63.8 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 1 -13 46.4 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 1 1 55.2 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 1 -11 60.0 (best c=512.0, g=0.0001220703125, rate=75.7)<br \/>[local] 1 -5 76.5 (best c=2.0, g=0.03125, rate=76.5)<br \/>[local] 1 -15 46.4 (best c=2.0, g=0.03125, rate=76.5)<br \/>[local] 1 3 49.4 (best c=2.0, g=0.03125, rate=76.5)<br \/>[local] 1 -9 72.5 (best c=2.0, g=0.03125, rate=76.5)<br \/>[local] 5 -3 71.3 (best c=2.0, g=0.03125, rate=76.5)<br \/>[local] -1 -3 73.4 (best c=2.0, g=0.03125, rate=76.5)<br \/>[local] 11 -3 66.0 (best c=2.0, g=0.03125, rate=76.5)<br \/>[local] -3 -3 66.0 (best c=2.0, g=0.03125, rate=76.5)<br \/>[local] 9 -3 66.8 (best c=2.0, g=0.03125, rate=76.5)<br \/>[local] 3 -3 72.1 (best c=2.0, g=0.03125, rate=76.5)<br \/>[local] 15 -3 63.5 (best c=2.0, g=0.03125, rate=76.5)<br \/>[local] -5 -3 60.0 (best c=2.0, g=0.03125, rate=76.5)<br \/>[local] 7 -3 70.0 (best c=2.0, g=0.03125, rate=76.5)<br \/>[local] 1 -3 73.9 (best c=2.0, g=0.03125, rate=76.5)<br \/>[local] 13 -7 67.6 (best c=2.0, g=0.03125, rate=76.5)<br \/>[local] 13 -1 61.0 (best c=2.0, g=0.03125, rate=76.5)<br \/>[local] 13 -13 73.7 (best c=2.0, g=0.03125, rate=76.5)<br \/>[local] 13 1 51.9 (best c=2.0, g=0.03125, rate=76.5)<br \/>[local] 13 -11 73.6 (best c=2.0, g=0.03125, rate=76.5)<br \/>[local] 13 -5 65.7 (best c=2.0, g=0.03125, rate=76.5)<br \/>[local] 13 -15 72.5 (best c=2.0, g=0.03125, rate=76.5)<br \/>[local] 13 3 49.8 (best c=2.0, g=0.03125, rate=76.5)<br \/>[local] 13 -9 71.2 (best c=2.0, g=0.03125, rate=76.5)<br \/>[local] 13 -3 63.5 (best c=2.0, g=0.03125, rate=76.5)<br \/>2.0 0.03125 76.5<\/p>"}}],"cases":null,"data":null,"section":null,"section_color":null},{"id":646365,"guid":"9D1D144535944B07BFBE8E652851EC96","previous_id":646364,"previous_guid":"45DF343BC5C84944AB3F4FCC2FFA60E1","modified_on":1532934659,"protocol_id":0,"components":[{"id":1054723,"guid":"F63329ED76F6419BBA9BE13D3021E36E","order_id":1,"type_id":6,"title":"Section","source":{"title":"Effectiveness Evaluation on the SVM-based disease risk assessment model"}},{"id":1054723,"guid":"A2C1D0FA036A4051A3BB0FDF8E8523BA","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">For Effectiveness Evaluation on the SVM-based disease risk assessment model, the stratified ten-fold cross-validation\u00a0is conducted by the LibSVM.<\/div><div class = \"text-block\"><pre><code>C:\\NMF_Based_matrix>c:\\libsvm-3.22\\windows\\svm-train.exe -v 10 -c 2 -g 0.03125 testing-1.libsvm<\/code><\/pre><\/div><\/div>"}},{"id":1054723,"guid":"7281B2E2984545CCBBFB25FF2B5E96CC","order_id":2,"type_id":17,"title":"result","source":{"body":"<p> <\/p>\n<p>The execution result will be shown finally.<\/p>\n<p> <\/p>\n<p><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/4ix2r7n.jpg\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/4ix2r7n.jpg\" data-ofn=\"eva_result.JPG\" \/><\/p>\n<p> <\/p>"}}],"cases":null,"data":null,"section":null,"section_color":null}],"materials":[],"description":"<p>The early assessment of disease risk is an emerging topic in medical informatics. If diseases are detected at an early stage, prognosis can be improved and medical resources can be used more efficiently.\u00a0A number of recent studies have considered risk factor analysis approaches, such as association rule mining, sequential rule mining, regression, and medical expert advice.\u00a0<\/p>\n<p>In this study, for improving disease risk assessment, non-negative matrix factorization and support vector machine (SVM) were integrated to discover important and implicit risk factors.<\/p>\n<p>To make the method easy to follow, here we provide an experimental protocal.\u00a0This experimental protocal comprises three main stages: data preprocessing, risk factor optimization, and early disease risk assessment. To discover the optimized risk factors, the NMF algorithm with parameter optimization was used for constructing the NMF-based matrix. In the assessment model learning and early disease risk assessment stages, the machine learning classifier SVM was used for disease modeling with the NMF-based matrix, yielding the final disease risk assessment, which serves as an excellent reference for physicians and patients.<\/p>"}