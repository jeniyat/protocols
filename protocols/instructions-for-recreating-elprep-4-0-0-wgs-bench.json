{"id":19293,"title":"Instructions for recreating elPrep 4.0.0 WGS benchmarks","title_html":"Instructions for recreating elPrep 4.0.0 WGS benchmarks","image":{"source":"https:\/\/www.protocols.io\/img\/default_protocol.png","placeholder":"https:\/\/www.protocols.io\/img\/default_protocol.png"},"doi":"dx.doi.org\/10.17504\/protocols.io.w35fgq6","doi_status":2,"uri":"instructions-for-recreating-elprep-4-0-0-wgs-bench-w35fgq6","type_id":1,"published_on":1547642129,"version_id":0,"created_on":1547478019,"categories":null,"creator":{"name":"Charlotte Herzeel","affiliation":null,"username":"charlotte-herzeel","link":"https:\/\/www.biorxiv.org\/content\/early\/2018\/12\/10\/492249","image":{"source":"\/img\/avatars\/016.png","placeholder":"\/img\/avatars\/016.png"},"badges":[{"id":2,"image":{"source":"\/img\/badges\/bronze.svg","placeholder":"\/img\/badges\/bronze.svg"},"name":"Author"}],"research_interests":null},"journal":null,"journal_name":null,"journal_link":null,"public":1,"has_versions":0,"link":"https:\/\/www.biorxiv.org\/content\/early\/2018\/12\/10\/492249","number_of_steps":4,"authors":[{"name":"Charlotte Herzeel","affiliation":"ExaScience Life Lab, Imec, Leuven, Belgium","username":"charlotte-herzeel","link":null,"image":{"source":"\/img\/avatars\/016.png","placeholder":"\/img\/avatars\/016.png"},"badges":[],"research_interests":null}],"versions":[],"groups":[],"has_subprotocols":0,"is_subprotocol":0,"is_bookmarked":0,"forks_count":{"private":0,"public":0},"steps":[{"id":697566,"guid":"C2CD0B90180D11E98D8A217DA437A79E","previous_id":null,"previous_guid":null,"modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"EA81C25E5C774803854BECC63CBB609A","order_id":1,"type_id":6,"title":"Section","source":{"title":""}},{"id":1054723,"guid":"0D1DF9B8E5034ADC8D138684BBC80B43","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">Configuration<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">1.1 Hardware<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">1.2 Software<\/span><\/div><\/div>"}},{"id":1054723,"guid":"933BE8BE4E7448D0A0DF9E8BBD16BBE5","order_id":2,"type_id":26,"title":"notes","source":{"id":0,"parent_id":0,"uri":"","title":"","body":"<div class = \"text-blocks\"><div class = \"text-block\">These instructions have been tested with elPrep v.4.0.0. The following assumes that everything is performed from a working directory WORKDIR.<\/div><\/div>","created_on":0,"changed_on":0,"creator":{"name":" ","affiliation":"","username":"","link":null,"image":{"source":"","placeholder":""},"badges":[],"research_interests":null},"comments":[]}},{"id":1054723,"guid":"386C7592BF3F4466ADD62BC9070EAE05","order_id":3,"type_id":26,"title":"notes","source":{"id":0,"parent_id":0,"uri":"","title":"","body":"<div class = \"text-blocks\"><div class = \"text-block\">* 2x18-core Intel Xeon processor E5-2699v3 Haswell @ 2.3GHz<\/div><div class = \"text-block\">* 256 GB RAM<\/div><div class = \"text-block\">* 2x400 GB SSD<\/div><\/div>","created_on":0,"changed_on":0,"creator":{"name":" ","affiliation":"","username":"","link":null,"image":{"source":"","placeholder":""},"badges":[],"research_interests":null},"comments":[]}},{"id":1054723,"guid":"CD82C6F774694FE48EC54602363B80CB","order_id":4,"type_id":26,"title":"notes","source":{"id":0,"parent_id":0,"uri":"","title":"","body":"<div class = \"text-blocks\"><div class = \"text-block\">* Ubuntu 14.04.5 LTS<\/div><div class = \"text-block\">* elPrep 4.0.0<\/div><\/div>","created_on":0,"changed_on":0,"creator":{"name":" ","affiliation":"","username":"","link":null,"image":{"source":"","placeholder":""},"badges":[],"research_interests":null},"comments":[]}}],"cases":null,"data":null,"section":null,"section_color":null},{"id":697567,"guid":"2C5668E0180E11E98D8A217DA437A79E","previous_id":697566,"previous_guid":"C2CD0B90180D11E98D8A217DA437A79E","modified_on":1547641746,"protocol_id":0,"components":[{"id":1054723,"guid":"AD8C2D467D514EC4891689E44E1C310F","order_id":1,"type_id":6,"title":"Section","source":{"title":""}},{"id":1054723,"guid":"923BDA1B94404C0AB2D25E2E1806AC04","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">Installation<\/span><\/div><\/div>"}},{"id":1054723,"guid":"3AED26A0180E11E98D8A217DA437A79E","order_id":2,"type_id":8,"title":"software","source":{"name":"elPrep","developer":"imec","repository":"https:\/\/github.com\/ExaScience\/elprep","link":"https:\/\/github.com\/ExaScience\/elprep\/releases\/download\/v4.0.0\/elprep-v4.0.0.tar.gz","os_name":"Linux","os_version":""}},{"id":1054723,"guid":"156F4E381C8A4FB7B9FE97DF61D66EAE","order_id":3,"type_id":26,"title":"notes","source":{"id":0,"parent_id":0,"uri":"","title":"","body":"<div class = \"text-blocks\"><div class = \"text-block\">The following steps are required to run elPrep:<\/div><div class = \"text-block\">1. Download the elPrep binary distribution from https:\/\/github.com\/ExaScience\/elprep<\/div><div class = \"text-block\">Direct download link: https:\/\/github.com\/ExaScience\/elprep\/releases\/download\/v4.0.0\/elprep-v4.0.0.tar.gz  <\/div><div class = \"text-block\">2. mdkir elprep-v4.0.0 <\/div><div class = \"text-block\">3. mv elprep-v4.0.1.tar.gz elprep-v4.0.0<\/div><div class = \"text-block\">4. cd elprep-v4.0.0<\/div><div class = \"text-block\">5. tar xvf elprep-v4.0.0.tar.gz<\/div><div class = \"text-block\">6. PATH=$WORKDIR\/elprep-v4.0.0:$PATH<\/div><\/div>","created_on":0,"changed_on":0,"creator":{"name":" ","affiliation":"","username":"","link":null,"image":{"source":"","placeholder":""},"badges":[],"research_interests":null},"comments":[]}}],"cases":null,"data":null,"section":null,"section_color":null},{"id":697568,"guid":"74561C80180E11E98D8A217DA437A79E","previous_id":697567,"previous_guid":"2C5668E0180E11E98D8A217DA437A79E","modified_on":1547641971,"protocol_id":0,"components":[{"id":1054723,"guid":"F01A9AABD9024859B2BD8CF6B403BD97","order_id":1,"type_id":6,"title":"Section","source":{"title":""}},{"id":1054723,"guid":"AC1D7D97C8D44C38AE16FCAF0C781278","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">Data preparation<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">3.1 Required tools<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">3.2 Required data<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">3.3 Data preparation steps<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">3.3.1 Create the reference index<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">3.3.2 Clean up the FASTQ files<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">3.3.3 Align the FASTQ files to create a BAM file<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">3.3.4 Create the hg38 elfasta file<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">3.3.5 Create elsites files from vcf files<\/span><\/div><\/div>"}},{"id":1054723,"guid":"E4C27412DF334582AA705A292E1F6699","order_id":2,"type_id":26,"title":"notes","source":{"id":0,"parent_id":0,"uri":"","title":"","body":"<div class = \"text-blocks\"><div class = \"text-block\">Our WGS benchmark uses the public data provided by Illumina (https:\/\/www.illumina.com\/platinumgenomes.html). This data consists of unaligned FASTQ files, which can be downloaded from the European Nucleotide Archive (https:\/\/www.ebi.ac.uk\/ena\/data\/view\/PRJEB3381). The following steps describe how to download, prepare, and align the data using BWA mem (version 0.7.17). Similarly, our benchmark requires the reference genome and databases with known SNPs to be converted into elPrep-specific formats. The following steps also describe how to download the data from public repositories and creating the elPrep-specific conversions.<\/div><\/div>","created_on":0,"changed_on":0,"creator":{"name":" ","affiliation":"","username":"","link":null,"image":{"source":"","placeholder":""},"badges":[],"research_interests":null},"comments":[]}},{"id":1054723,"guid":"00546DE0180F11E98D8A217DA437A79E","order_id":3,"type_id":8,"title":"software","source":{"name":"BWA","developer":"Heng Li","repository":"https:\/\/github.com\/lh3\/bwa","link":"https:\/\/github.com\/lh3\/bwa","os_name":"Linux","os_version":""}},{"id":1054723,"guid":"607FBC910E324888BCFCDBE9C75C8485","order_id":4,"type_id":26,"title":"notes","source":{"id":0,"parent_id":0,"uri":"","title":"","body":"<div class = \"text-blocks\"><div class = \"text-block\">1. Ensure GCC installed (version 4.8.4 recommended)<\/div><div class = \"text-block\">2. Download BWA source code from https:\/\/github.com\/lh3\/bwa Direct link: https:\/\/github.com\/lh3\/bwa\/releases\/download\/v0.7.17\/bwa-0.7.17.tar.bz2<\/div><div class = \"text-block\">3. tar xvf bwa-0.7.17.tar.bz2<\/div><div class = \"text-block\">4. cd bwa-0.7.17<\/div><div class = \"text-block\">5. make<\/div><div class = \"text-block\">6. cd $WORKDIR<\/div><\/div>","created_on":0,"changed_on":0,"creator":{"name":" ","affiliation":"","username":"","link":null,"image":{"source":"","placeholder":""},"badges":[],"research_interests":null},"comments":[]}},{"id":1054723,"guid":"2842BFF0180F11E98D8A217DA437A79E","order_id":5,"type_id":8,"title":"software","source":{"name":"correct-platinum-fastq-sequence-identifier","developer":"imec","repository":"https:\/\/github.com\/ExaScience\/correct-platinum-fastq-sequence-identifier","link":"https:\/\/github.com\/ExaScience\/correct-platinum-fastq-sequence-identifier","os_name":"Linux","os_version":""}},{"id":1054723,"guid":"8C7E261FAC624EAABB113E3FA5C067AD","order_id":6,"type_id":26,"title":"notes","source":{"id":0,"parent_id":0,"uri":"","title":"","body":"<div class = \"text-blocks\"><div class = \"text-block\">The FASTQ files at the ENA provide the Illumina sequence identifiers only as comments, but for optical duplicate marking to be done properly in elPrep, Picard, and GATK, they need to be used as actual sequence identifiers in the FASTQ files before they are aligned with BWA mem. This can be arranged with a small tool we provide (https:\/\/github.com\/ExaScience\/correct-platinum-fastq-sequence-identifier) or another tool.<\/div><div class = \"text-block\">Download and install our tool for fixing FASTQ read names. These instructions assume you have a working Golang installation (see https:\/\/golang.org\/doc\/install):<\/div><div class = \"text-block\">1. go get github.com\/ExaScience\/correct-platinum-fastq-sequence-identifier<\/div><div class = \"text-block\">2. go build github.com\/ExaScience\/correct-platinum-fastq-sequence-identifier<\/div><\/div>","created_on":0,"changed_on":0,"creator":{"name":" ","affiliation":"","username":"","link":null,"image":{"source":"","placeholder":""},"badges":[],"research_interests":null},"comments":[]}},{"id":1054723,"guid":"588F463379504473AA8E0BFC35FA2583","order_id":7,"type_id":26,"title":"notes","source":{"id":0,"parent_id":0,"uri":"","title":"","body":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">FASTQ files<\/span><\/div><div class = \"text-block\">* Download Illumina Platinum whole-genome NA12878 FASTQ files from https:\/\/www.ebi.ac.uk\/ena\/data\/view\/PRJEB3381<\/div><div class = \"text-block\">Direct links: <\/div><div class = \"text-block\">ftp:\/\/ftp.sra.ebi.ac.uk\/vol1\/fastq\/ERR194\/ERR194147\/ERR194147_1.fastq.gz<\/div><div class = \"text-block\">ftp:\/\/ftp.sra.ebi.ac.uk\/vol1\/fastq\/ERR194\/ERR194147\/ERR194147_2.fastq.gz<\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">Reference files<\/span><\/div><div class = \"text-block\">* Download the hg38 reference files from http:\/\/lh3.github.io\/2017\/11\/13\/which-human-reference-genome-to-use<\/div><div class = \"text-block\">Direct link:<\/div><div class = \"text-block\">ftp:\/\/ftp.ncbi.nlm.nih.gov\/genomes\/all\/GCA\/000\/001\/405\/GCA_000001405.15_GRCh38\/seqs_for_alignment_pipelines.ucsc_ids\/GCA_000001405.15_GRCh38_no_alt_analysis_set.fna.gz\n<\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">Known variants<\/span><\/div><div class = \"text-block\">* Download the database with known SNPs from https:\/\/software.broadinstitute.org\/gatk\/download\/bundle<\/div><div class = \"text-block\">Direct links:<\/div><div class = \"text-block\">ftp:\/\/gsapubftp-anonymous@ftp.broadinstitute.org\/bundle\/hg38\/Mills_and_1000G_gold_standard.indels.hg38.vcf.gz<\/div><div class = \"text-block\">ftp:\/\/gsapubftp-anonymous@ftp.broadinstitute.org\/bundle\/hg38\/dbsnp_138.hg38.vcf.gz<\/div><div class = \"text-block\">When attempting a download, this may result in an error message that the login is incorrect. This is because the ftp site only allows a maximum of 25 users at the same time. If this happens, try again.<\/div><\/div>","created_on":0,"changed_on":0,"creator":{"name":" ","affiliation":"","username":"","link":null,"image":{"source":"","placeholder":""},"badges":[],"research_interests":null},"comments":[]}},{"id":1054723,"guid":"BD978270180F11E98D8A217DA437A79E","order_id":8,"type_id":15,"title":"command","source":{"name":"gunzip GCA_000001405.15_GRCh38_no_alt_analysis_set.fna.gz\nbwa-0.7.17\/bwa index GCA_000001405.15_GRCh38_no_alt_analysis_set.fna","command":"Required time: ca. 60 minutes\nResult: GCA_000001405.15_GRCh38_no_alt_analysis_set.fna.*","os_name":"","os_version":""}},{"id":1054723,"guid":"EF91DA00180F11E98D8A217DA437A79E","order_id":9,"type_id":15,"title":"command","source":{"name":".\/correct-platinum-fastq-sequence-identifier par ERR194147_1.fastq.gz ERR194147OPT_1.fastq.gz","command":"This invocation runs the tool in parallel.\nRequired time: ca. 3.5h\nResult: ERR194147OPT_1.fastq.gz","os_name":"","os_version":""}},{"id":1054723,"guid":"0E9B1A60181011E98D8A217DA437A79E","order_id":10,"type_id":15,"title":"command","source":{"name":".\/correct-platinum-fastq-sequence-identifier par ERR194147_2.fastq.gz ERR194147OPT_2.fastq.gz","command":"Required time: ca. 3.5h\nResult: ERR194147OPT_2.fastq.gz","os_name":"","os_version":""}},{"id":1054723,"guid":"2E3A5930181011E98D8A217DA437A79E","order_id":11,"type_id":15,"title":"command","source":{"name":"bwa-0.7.17\/ bwa mem -t 72 -R '@RG\\tID:Group1\\tLB:lib1\\tPL:illumina\\tSM:sample1' GCA_000001405.15_GRCh38_no_alt_analysis_set.fna ERR194147OPT_1.fastq.gz ERR194147OPT_2.fastq.gz | elprep filter \/dev\/stdin NA12878.bam","command":"Required time: 6h10m\nResult: NA12878.bam","os_name":"","os_version":""}},{"id":1054723,"guid":"51E97AF0181011E98D8A217DA437A79E","order_id":12,"type_id":15,"title":"command","source":{"name":"elprep fasta-to-elfasta GCA_000001405.15_GRCh38_no_alt_analysis_set.fna hg38.elfasta","command":"Required time: ca. 1 minute\nResult: hg38.elfasta","os_name":"","os_version":""}},{"id":1054723,"guid":"74BB3500181011E98D8A217DA437A79E","order_id":13,"type_id":15,"title":"command","source":{"name":"gunzip dbsnp_138.hg38.vcf.gz\nelprep vcf-to-elsites dbsnp_138.hg38.vcf dbsnp_138.hg38.elsites","command":"Required time: ca. 1 minute\nResult: dbsnp_138.hg38.elsites","os_name":"","os_version":""}},{"id":1054723,"guid":"86216670181011E98D8A217DA437A79E","order_id":14,"type_id":15,"title":"command","source":{"name":"gunzip Mills_and_1000G_gold_standard.indels.hg38.vcf\nelprep vcf-to-elsites Mills_and_1000G_gold_standard.indels.hg38.vcf Mills_and_1000G_gold_standard.indels.hg38.elsites","command":"Required time: ca. 10 seconds\nResult: Mills_and_1000G_gold_standard.indels.hg38.elsites","os_name":"","os_version":""}}],"cases":null,"data":null,"section":null,"section_color":null},{"id":697569,"guid":"DF60B0B0181011E98D8A217DA437A79E","previous_id":697568,"previous_guid":"74561C80180E11E98D8A217DA437A79E","modified_on":1547641746,"protocol_id":0,"components":[{"id":1054723,"guid":"06E6D804DE9B47C0BA528D60E02FAD3E","order_id":1,"type_id":6,"title":"Section","source":{"title":""}},{"id":1054723,"guid":"9142D92B307B48A8A14E46DB3D5F65A6","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">Benchmarking elPrep<\/span><\/div><\/div>"}},{"id":1054723,"guid":"8EC0DA05195F4304A85C4181C3EA2E43","order_id":2,"type_id":26,"title":"notes","source":{"id":0,"parent_id":0,"uri":"","title":"","body":"<div class = \"text-blocks\"><div class = \"text-block\">elPrep provides a lot of filtering options. The following benchmark implements a pipeline that executes the following four steps:<\/div><div class = \"text-block\">1. Sorting by coordinate order (equivalent to, for example https:\/\/software.broadinstitute.org\/gatk\/documentation\/tooldocs\/current\/picard_sam_SortSam.php)<\/div><div class = \"text-block\">2. Marking PCR and optical duplicates (equivalent to, for example, https:\/\/software.broadinstitute.org\/gatk\/documentation\/tooldocs\/current\/picard_sam_markduplicates_MarkDuplicates.php)<\/div><div class = \"text-block\">3. Base quality score recalibration (equivalent to, for example, https:\/\/software.broadinstitute.org\/gatk\/documentation\/tooldocs\/current\/org_broadinstitute_hellbender_tools_walkers_bqsr_BaseRecalibrator.php)<\/div><div class = \"text-block\">4. Applying base quality score recalibration (equivalent to, for example, https:\/\/software.broadinstitute.org\/gatk\/documentation\/tooldocs\/current\/org_broadinstitute_hellbender_tools_walkers_bqsr_ApplyBQSR.php)<\/div><div class = \"text-block\">Please see the elPrep documentation at https:\/\/github.com\/ExaScience\/elprep for further filtering options.<\/div><\/div>","created_on":0,"changed_on":0,"creator":{"name":" ","affiliation":"","username":"","link":null,"image":{"source":"","placeholder":""},"badges":[],"research_interests":null},"comments":[]}},{"id":1054723,"guid":"075DA8C0181111E98D8A217DA437A79E","order_id":3,"type_id":15,"title":"command","source":{"name":"elprep sfm NA12878.bam NA12878.sfm.bam --mark-duplicates --mark-optical-duplicates NA12878.sfm.metrics --sorting-order coordinate --bqsr NA12878.sfm.recal --known-sites dbsnp_138.hg38.elsites,Mills_and_1000G_gold_standard.indels.hg38.elsites --bqsr-reference hg38.elfasta","command":"Required time: 3h37m \nRequired RAM: 192GB\nResult: NA12878.sfm.bam, NA12878.sfm.metrics, NA12878.sfm.recal","os_name":"","os_version":""}}],"cases":null,"data":null,"section":null,"section_color":null}],"materials":[],"description":"<div class = \"text-blocks\"><div class = \"text-block\">Instructions for recreating the elPrep4.0.0 WGS benchmarks used in the following paper:<\/div><div class = \"text-block\">Herzeel C, Costanza P, Decap D, Fostier J, Verachtert W. elPrep: A multithreaded framework for sequence analysis. BioRxv https:\/\/doi.org\/10.1101\/492249  <\/div><\/div>","changed_on":1547642129}