{"id":23387,"title":"Instructional tutorial for using demuxlet","title_html":"Instructional tutorial for using <strong><em>demuxlet<\/em><\/strong>","image":{"source":"https:\/\/s3.amazonaws.com\/pr-journal\/bgywfw26.png","placeholder":"https:\/\/s3.amazonaws.com\/pr-journal\/bgywfw26.png"},"doi":"dx.doi.org\/10.17504\/protocols.io.233ggqn","doi_status":2,"uri":"instructional-tutorial-for-using-demuxlet-233ggqn","type_id":1,"published_on":1561570418,"parent_protocols":[],"parent_collections":[],"version_id":0,"created_on":1558466817,"categories":null,"creator":{"name":"Anton Ogorodnikov","affiliation":null,"affiliations":[],"username":"anton-ogorodnikov1","link":"https:\/\/github.com\/statgen\/demuxlet\/tree\/master\/tutorial","image":{"source":"\/img\/avatars\/009.png","placeholder":"\/img\/avatars\/009.png"},"badges":[{"id":2,"image":{"source":"\/img\/badges\/bronze.svg","placeholder":"\/img\/badges\/bronze.svg"},"name":"Author"}],"research_interests":null,"blocked_by_you":false,"blocked_you":false},"journal":null,"journal_name":null,"journal_link":null,"article_citation":null,"public":1,"has_versions":0,"link":"https:\/\/github.com\/statgen\/demuxlet\/tree\/master\/tutorial","total_collections":0,"number_of_steps":18,"authors":[{"name":"Hyun Min Kang","affiliation":"Department of Biostatistics and Center for Statistical Genetics, University of Michigan ","affiliations":[],"username":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"research_interests":null,"blocked_by_you":false,"blocked_you":false},{"name":"Meena Subramaniam","affiliation":"University of California, San Francisco","affiliations":[],"username":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"research_interests":null,"blocked_by_you":false,"blocked_you":false},{"name":"Sasha Targ","affiliation":"University of California, San Francisco","affiliations":[],"username":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"research_interests":null,"blocked_by_you":false,"blocked_you":false},{"name":"Michelle Nguyen","affiliation":"University of California, San Francisco","affiliations":[],"username":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"research_interests":null,"blocked_by_you":false,"blocked_you":false},{"name":"Lenka Maliskova","affiliation":"University of California, San Francisco","affiliations":[],"username":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"research_interests":null,"blocked_by_you":false,"blocked_you":false},{"name":"Elizabeth McCarthy","affiliation":"University of California, San Francisco","affiliations":[],"username":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"research_interests":null,"blocked_by_you":false,"blocked_you":false},{"name":"Eunice Wan","affiliation":"University of California, San Francisco","affiliations":[],"username":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"research_interests":null,"blocked_by_you":false,"blocked_you":false},{"name":"Simon Wong","affiliation":"University of California, San Francisco","affiliations":[],"username":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"research_interests":null,"blocked_by_you":false,"blocked_you":false},{"name":"Lauren Byrnes","affiliation":"University of California, San Francisco","affiliations":[],"username":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"research_interests":null,"blocked_by_you":false,"blocked_you":false},{"name":"Cristina M Lanata","affiliation":"University of California, San Francisco","affiliations":[],"username":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"research_interests":null,"blocked_by_you":false,"blocked_you":false},{"name":"Rachel E Gate","affiliation":"University of California, San Francisco","affiliations":[],"username":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"research_interests":null,"blocked_by_you":false,"blocked_you":false},{"name":"Sara Mostafavi","affiliation":"Department of Statistics, University of British Columbia","affiliations":[],"username":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"research_interests":null,"blocked_by_you":false,"blocked_you":false},{"name":"Alexander Marson","affiliation":"University of California, San Francisco","affiliations":[],"username":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"research_interests":null,"blocked_by_you":false,"blocked_you":false},{"name":"Noah Zaitlen","affiliation":"University of California, San Francisco","affiliations":[],"username":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"research_interests":null,"blocked_by_you":false,"blocked_you":false},{"name":"Lindsey A Criswell","affiliation":"University of California, San Francisco","affiliations":[],"username":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"research_interests":null,"blocked_by_you":false,"blocked_you":false},{"name":"Chun Jimmie Ye","affiliation":"University of California, San Francisco","affiliations":[],"username":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"research_interests":null,"blocked_by_you":false,"blocked_you":false}],"versions":[],"groups":[{"id":523,"uri":"hca","title":"Human Cell Atlas Method Development Community","image":{"source":"https:\/\/s3.amazonaws.com\/pr-journal\/psucz36.png","placeholder":"https:\/\/s3.amazonaws.com\/pr-journal\/psucz36.png"},"tech_support":{"email":null,"phone":null,"hide_contact":0,"use_email":0},"is_member":1,"request":{"id":523,"uri":"hca","title":"Human Cell Atlas Method Development Community","image":{"source":"https:\/\/s3.amazonaws.com\/pr-journal\/psucz36.png","placeholder":"https:\/\/s3.amazonaws.com\/pr-journal\/psucz36.png"},"tech_support":{"email":null,"phone":null,"hide_contact":0,"use_email":0},"is_member":1,"description":null,"research_interests":null,"website":null,"location":null,"affiliation":null,"status":{"is_visible":true,"access_level":0},"stats":{"files":[],"total_members":0,"total_followers":0,"total_child_groups":0,"total_parent_groups":0,"has_collaborations":0},"user_status":{"is_member":true,"is_confirmed":true,"is_invited":false,"is_owner":false,"is_admin":false,"is_following":false},"join_link":null,"token":null,"owner":{"name":" ","affiliation":null,"affiliations":[],"username":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"research_interests":null,"blocked_by_you":false,"blocked_you":false},"is_protocol_requested":0,"is_group_requested":0,"is_my":false,"is_request":false,"is_confirmed":1,"is_declined":0,"requester":{"name":" ","affiliation":null,"affiliation_url":null,"username":null,"link":null},"protocol":{"id":0,"title":"Instructional tutorial for using demuxlet","title_html":"Instructional tutorial for using demuxlet","image":{"source":null,"placeholder":null},"doi":null,"doi_status":0,"uri":"instructional-tutorial-for-using-demuxlet-233ggqn","type_id":1,"published_on":null,"stats":{"number_of_views":0,"number_of_steps":0,"number_of_bookmarks":0,"number_of_comments":0,"number_of_exports":0,"number_of_runs":0},"parent_protocols":[],"parent_collections":[]},"created_on":1561570416,"resolve_on":0,"resolved_user":{"name":" ","affiliation":null,"affiliations":[],"username":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"research_interests":null,"blocked_by_you":false,"blocked_you":false},"shared":false}}],"has_subprotocols":0,"is_subprotocol":0,"is_bookmarked":0,"can_be_copied":1,"can_remove_fork":1,"forks_count":{"private":0,"public":0},"access":{"can_view":1,"can_remove":0,"can_add":0,"can_edit":0,"can_publish":0,"can_get_doi":0,"can_share":1,"can_move":1,"can_move_outside":1,"can_transfer":1,"can_download":1,"is_locked":0},"steps":[{"id":744455,"guid":"CEACAFA2509A4894ABFB7DF2756FC598","previous_id":null,"previous_guid":null,"modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"F0CB038610B64B5C804EB673D2A19DBF","order_id":1,"type_id":6,"title":"Section","source":{"title":"Getting Started"}},{"id":1054724,"guid":"32FE3B6BBBEB46E78FE029241B5F7CDD","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Please select between the two following options: <\/div><div class = \"text-block\">1. Installating from Docker<\/div><div class = \"text-block\">2. Installing from source<\/div><\/div>"}},{"id":1054725,"guid":"8D57109C91C64AD29EFD90C572EAC726","order_id":2,"type_id":21,"title":"cases","source":{"cases":[{"title":"Installating from Docker","label":"<div class = \"text-blocks\"><div class = \"text-block\">Select this option for docker installation. <\/div><\/div>","step_id":null,"step_guid":"945070407BFE11E9A120558AE06F049B"},{"title":"Installing from source","label":"<div class = \"text-blocks\"><div class = \"text-block\">Select this option for installing demulex from source.<\/div><\/div>","step_id":null,"step_guid":"A900EAB07BFE11E9A120558AE06F049B"}]}}],"cases":null,"data":null,"section":null,"section_color":"#50e3c2","critical":null,"critical_id":null,"duration":0},{"id":744456,"guid":"2C5058D152BA4C77A532007D70CC1B7D","previous_id":744455,"previous_guid":"CEACAFA2509A4894ABFB7DF2756FC598","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"81AEA91E8B8D4F70BA9A3E231850C036","order_id":1,"type_id":6,"title":"Section","source":{"title":"Getting Started"}},{"id":1054724,"guid":"835B13B24B95490E946277BC10C58B0E","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">Running demuxlet from docker<\/span><\/div><div class = \"text-block\"><span>We have created a docker container at <\/span><span style = \"font-weight:bold;\">yimmieg\/demuxlet<\/span><span> to run demuxlet through docker.<\/span><\/div><div class = \"text-block\">You can run it with<\/div><div class = \"text-block\"><pre><code>$ docker run -v path\/to\/tutorial:\/data yimmieg\/demuxlet --sam \/data\/$bam --vcf \/data\/$vcf --field $(GT or GP or PL) --out \/data\/$filename\n<\/code><\/pre><\/div><div class = \"text-block\"><span>Add bam file name for <\/span><span style = \"font-weight:bold;\">$bam<\/span><span> and vcf file name for <\/span><span style = \"font-weight:bold;\">$vcf<\/span><span>. Use <\/span><span style = \"font-weight:bold;\"><(zcat $vcf)<\/span><span> or <\/span><span style = \"font-weight:bold;\"><(gzcat $vcf)<\/span><span> if vcf file is compressed.<\/span><\/div><div class = \"text-block\"><span>The options for <\/span><span style = \"font-weight:bold;\">--field <\/span><span>are individual genotypes (GT), posterior probability (GP), or genotype likelihood (PL). If using GT  <\/span><span style = \"font-weight:bold;\">--field <\/span><span>option for, you must include <\/span><span style = \"font-weight:bold;\">--geno-error<\/span><span>, which is the genotype error rate.<\/span><\/div><\/div>"}}],"cases":null,"data":null,"section":null,"section_color":null,"critical":null,"critical_id":null,"duration":0},{"id":744457,"guid":"F65C2FC37F3E4B7CA8AA8CAC43135403","previous_id":744456,"previous_guid":"2C5058D152BA4C77A532007D70CC1B7D","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"CD572382BEF848DA8998A3AB3D1CC157","order_id":1,"type_id":6,"title":"Section","source":{"title":"Getting Started"}},{"id":1054724,"guid":"B19FBF5F55ED4ED792E3F581826181D2","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">demuxlet output<\/span><\/div><div class = \"text-block\">The demuxlet software produces three output files.<\/div><div class = \"text-block\"><ol style = \"list-style-type: decimal;\"><li style = \"counter-reset:ol0;\"><span style = \"font-weight:bold;\">[prefix].best<\/span><span> The .best file contains the assignments of the best sample identity (singlet: <\/span><span style = \"font-weight:bold;\">SNG-<\/span><span>; doublet: <\/span><span style = \"font-weight:bold;\">DBL-<\/span><span>; ambiguous: <\/span><span style = \"font-weight:bold;\">AMB-< ><\/span><span>) in the <\/span><span style = \"font-weight:bold;\">BEST<\/span><span> column for each cell barcode identified in the <\/span><span style = \"font-weight:bold;\">BARCODE<\/span><span> column along with details of the statistics used to determine the best identity.<\/span><\/li><li style = \"counter-reset:ol0;\"><span>The <\/span><span style = \"font-weight:bold;\">[prefix].single<\/span><span> file contains the statistics for matching each cell with each possible sample<\/span><\/li><\/ol><\/div><div class = \"text-block\">For complete descriptions of the columns in each output file, please see the demuxlet README.<\/div><\/div>"}}],"cases":null,"data":null,"section":null,"section_color":null,"critical":null,"critical_id":null,"duration":0},{"id":744458,"guid":"CF6B677068C44DE9B431BC46CB9BBCE8","previous_id":744457,"previous_guid":"F65C2FC37F3E4B7CA8AA8CAC43135403","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"E5CED319DB9B45A4B1465F22D660E278","order_id":1,"type_id":6,"title":"Section","source":{"title":"Analyzing the sample dataset"}},{"id":1054724,"guid":"10264A00CA834A13984E1B4FE48F3FB9","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">Create directory and download datasets<\/span><\/div><div class = \"text-block\">Now, let's first download the data we need. We are now providing a one-stop-shop to download all of the data you need for the tutorial:<\/div><div class = \"text-block\"><a style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">https:\/\/ucsf.box.com\/s\/vg1bycvsjgyg63gkqsputprq5rxzjl6k<\/span><\/a><\/div><div class = \"text-block\"><span>. After downloading and unzipping (it's BIG), you should have a directory called <\/span><span style = \"font-weight:bold;\">demuxlet.tutorial<\/span><span style = \"font-weight:bold;\">.<\/span><\/div><\/div>"}}],"cases":null,"data":null,"section":null,"section_color":"#f15255","critical":null,"critical_id":null,"duration":0},{"id":744459,"guid":"44F3545A38AC4F5799C5F0F43335AFDA","previous_id":744458,"previous_guid":"CF6B677068C44DE9B431BC46CB9BBCE8","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"7526D313A86045AABA88B784E44B41FA","order_id":1,"type_id":6,"title":"Section","source":{"title":"Analyzing the sample dataset"}},{"id":1054724,"guid":"53A852D8232245B98606FC223D9351FC","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">Run demuxlet<\/span><\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">$ cd demuxlet.tutorial <\/div><div class = \"text-block\">$ docker run -v .\/:\/data yimmieg\/demuxlet --sam \/data\/jurkat_293t_downsampled_n500_full_bam.bam --vcf \/data\/jurkat_293t_exons_only.vcf --field GT --out data\/jurkat_293t_demuxlet<\/div><\/div><\/code><\/pre><\/div><\/div>"}}],"cases":null,"data":null,"section":null,"section_color":null,"critical":null,"critical_id":null,"duration":0},{"id":744460,"guid":"A66279A844E24FB68BAEE72A0B00C716","previous_id":744459,"previous_guid":"44F3545A38AC4F5799C5F0F43335AFDA","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"ABEDDC00D739450190E97CC89B970908","order_id":1,"type_id":6,"title":"Section","source":{"title":"Analyzing the sample dataset"}},{"id":1054724,"guid":"D6F15DD6F08B4F3C9D7A74C78EA49BC8","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">Compare the called genotypes vs transcriptome data<\/span><\/div><div class = \"text-block\">In this analysis, we will use R to produce a t-SNE (t-Distributed Stochastic Neighbor Embedding) plot of the cells from the 293T:Jurkat 10x experiment with the cells colored by the assignments from the demuxlet pipeline.<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">library(ggplot2); <\/div><div class = \"text-block\">library(data.table);  <\/div><div class = \"text-block\">## let's read in the barcodes <\/div><div class = \"text-block\">tsne <- fread(\"analysis_csv\/tsne\/projection.csv\"); <\/div><div class = \"text-block\">demuxlet <- fread(\"jurkat_293t_demuxlet.best\");  <\/div><div class = \"text-block\">## let's filter for the barcodes that we sampled  <\/div><div class = \"text-block\">df <- data.frame(tsne1=tsne$\"TSNE-1\"[na.omit(match(demuxlet$BARCODE,tsne$Barcode))], tsne2=tsne$\"TSNE-2\"[na.omit(match(demuxlet$BARCODE,tsne$Barcode))], doublet=sapply(demuxlet$BEST,function(x){strsplit(x,\"-\")[[1]][[1]]}), cell.type=sapply(demuxlet$BEST,function(x){strsplit(x,\"-\")[[1]][[2]]}))  <\/div><div class = \"text-block\">ggplot(aes(tsne1,tsne2,color=cell.type),data=df)+geom_point()<\/div><\/div><\/code><\/pre><\/div><\/div>"}},{"id":1054725,"guid":"E80725EE74844C5584D13A9083E37229","order_id":2,"type_id":17,"title":"result","source":{"body":"<div class = \"text-blocks\"><div class = \"text-block\">After this, you should get the following image:<\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/pr-journal\/bgyufw26.png\" \/><\/div><\/div>"}}],"cases":null,"data":null,"section":null,"section_color":null,"critical":null,"critical_id":null,"duration":0},{"id":744461,"guid":"1DD78DDFA11F46DC86E39C2939037FE8","previous_id":744460,"previous_guid":"A66279A844E24FB68BAEE72A0B00C716","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"503C794E3FA54A8D839FACFF408CC668","order_id":1,"type_id":6,"title":"Section","source":{"title":"Analyzing the sample dataset"}},{"id":1054724,"guid":"9AD23DFCE76C4F3AB266C816F356767F","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Let's also take a look at the doublets.<\/div><div class = \"text-block\"><pre><code>ggplot(aes(tsne1,tsne2,color=doublet),data=df)+geom_point()\n<\/code><\/pre><\/div><\/div>"}},{"id":1054725,"guid":"23909CCE1CF947E981A058482EDDBA9A","order_id":2,"type_id":17,"title":"result","source":{"body":"<div class = \"text-blocks\"><div class = \"text-block\">After that, you should get the following image:<\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/pr-journal\/bgyvfw26.png\" \/><\/div><\/div>"}}],"cases":null,"data":null,"section":null,"section_color":null,"critical":null,"critical_id":null,"duration":0},{"id":744462,"guid":"945070407BFE11E9A120558AE06F049B","previous_id":744455,"previous_guid":"CEACAFA2509A4894ABFB7DF2756FC598","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"E2D45CF26EE04FF89BB499F98B417E2F","order_id":1,"type_id":6,"title":"Section","source":{"title":"Getting Started"}},{"id":1054724,"guid":"491254829BB6476D84105B453262B0C1","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">Installing docker<\/span><\/div><div class = \"text-block\">First, get docker for whatever platform you feel comfortable with: <\/div><div class = \"text-block\"><a style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">https:\/\/www.docker.com\/get-started<\/span><\/a><\/div><\/div>"}}],"cases":null,"data":null,"section":null,"section_color":null,"critical":null,"critical_id":null,"duration":0},{"id":744463,"guid":"A900EAB07BFE11E9A120558AE06F049B","previous_id":744455,"previous_guid":"CEACAFA2509A4894ABFB7DF2756FC598","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"EF3877EEC2464F91A83AE8F9E65B2A47","order_id":1,"type_id":6,"title":"Section","source":{"title":"Getting Started"}},{"id":1054724,"guid":"211B915608C44996978AEA05829BE15D","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Before installing demuxlet, you need to install <\/div><div class = \"text-block\"><a style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">htslib<\/span><\/a><\/div><div class = \"text-block\"> in the same directory you want to install demuxlet (i.e. demuxlet and htslib should be siblings).<\/div><div class = \"text-block\">After installing htslib, you can clone the current snapshot of this repository to install as well<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">$ git clone https:\/\/github.com\/statgen\/demuxlet.git <\/div><div class = \"text-block\">$ cd demuxlet <\/div><div class = \"text-block\">$ autoreconf -vfi <\/div><div class = \"text-block\">$ .\/configure  (with additional options such as --prefix) <\/div><div class = \"text-block\">$ make <\/div><div class = \"text-block\">$ make install (may require root privilege)<\/div><\/div><\/code><\/pre><\/div><\/div>"}},{"id":1054725,"guid":"2159D2EFD5D94DCDB8F96EA1532DE325","order_id":2,"type_id":26,"title":"notes","source":{"id":0,"parent_id":0,"uri":"","title":"","body":"<div class = \"text-blocks\"><div class = \"text-block\">Remember to add demuxlet to $PATH <\/div><\/div>","created_on":0,"changed_on":0,"creator":{"name":" ","affiliation":"","affiliations":[],"username":"","link":null,"image":{"source":"","placeholder":""},"badges":[],"research_interests":null,"blocked_by_you":false,"blocked_you":false},"comments":[]}}],"cases":null,"data":null,"section":null,"section_color":null,"critical":null,"critical_id":null,"duration":0},{"id":744464,"guid":"D9E31B807BFE11E9A120558AE06F049B","previous_id":744463,"previous_guid":"A900EAB07BFE11E9A120558AE06F049B","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"6770436B46A04C75BFF21429258DB1EC","order_id":1,"type_id":6,"title":"Section","source":{"title":"Analyzing the sample dataset"}},{"id":1054724,"guid":"DF00C7902D6A44D2B6C1E48241E4A194","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">Create directory and download datasets<\/span><\/div><div class = \"text-block\">Now, let's first download the data we need. We are now providing a one-stop-shop to download all of the data you need for the tutorial: <\/div><div class = \"text-block\"><a style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">https:\/\/ucsf.box.com\/s\/vg1bycvsjgyg63gkqsputprq5rxzjl6k<\/span><\/a><\/div><div class = \"text-block\"><span>. After downloading and unzipping (it's BIG), you should have a directory called <\/span><span style = \"font-weight:bold;\">demuxlet.tutorial<\/span><span style = \"font-weight:bold;\">.<\/span><\/div><\/div>"}}],"cases":null,"data":null,"section":null,"section_color":"#d0021b","critical":null,"critical_id":null,"duration":0},{"id":744467,"guid":"40A2D1807BFF11E9A120558AE06F049B","previous_id":744464,"previous_guid":"D9E31B807BFE11E9A120558AE06F049B","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"0425EA28C07044CCBF59F61AEB9D584E","order_id":1,"type_id":6,"title":"Section","source":{"title":"Analyzing the sample dataset"}},{"id":1054724,"guid":"FE627B933C6841CCB6158BAF942FE037","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">Run demuxlet<\/span><\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">$ cd demuxlet.tutorial <\/div><div class = \"text-block\">$ demuxlet --sam \/data\/jurkat_293t_downsampled_n500_full_bam.bam --vcf \/data\/jurkat_293t_exons_only.vcf --field GT --out data\/jurkat_293t_demuxlet<\/div><\/div><\/code><\/pre><\/div><\/div>"}}],"cases":null,"data":null,"section":null,"section_color":null,"critical":null,"critical_id":null,"duration":0},{"id":744469,"guid":"47B323307BFF11E9A120558AE06F049B","previous_id":744467,"previous_guid":"40A2D1807BFF11E9A120558AE06F049B","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"EB4207CC1B9B4B738EBB3D192E93464C","order_id":1,"type_id":6,"title":"Section","source":{"title":"Analyzing the sample dataset"}},{"id":1054724,"guid":"756C7702E7FD40E593AAE0BB53F1239F","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">Compare the called genotypes vs transcriptome data<\/span><\/div><div class = \"text-block\">In this analysis, we will use R to produce a t-SNE (t-Distributed Stochastic Neighbor Embedding) plot of the cells from the 293T:Jurkat 10x experiment with the cells colored by the assignments from the demuxlet pipeline.<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">library(ggplot2); <\/div><div class = \"text-block\">library(data.table);  <\/div><div class = \"text-block\">## let's read in the barcodes <\/div><div class = \"text-block\">tsne <- fread(\"analysis_csv\/tsne\/projection.csv\"); <\/div><div class = \"text-block\">demuxlet <- fread(\"jurkat_293t_demuxlet.best\");  <\/div><div class = \"text-block\">## let's filter for the barcodes that we sampled  <\/div><div class = \"text-block\">df <- data.frame(tsne1=tsne$\"TSNE-1\"[na.omit(match(demuxlet$BARCODE,tsne$Barcode))], tsne2=tsne$\"TSNE-2\"[na.omit(match(demuxlet$BARCODE,tsne$Barcode))], doublet=sapply(demuxlet$BEST,function(x){strsplit(x,\"-\")[[1]][[1]]}), cell.type=sapply(demuxlet$BEST,function(x){strsplit(x,\"-\")[[1]][[2]]}))  <\/div><div class = \"text-block\">ggplot(aes(tsne1,tsne2,color=cell.type),data=df)+geom_point()<\/div><\/div><\/code><\/pre><\/div><\/div>"}},{"id":1054725,"guid":"1D0DC813CAFD4ED6B294DD45A3FC2B1E","order_id":2,"type_id":17,"title":"result","source":{"body":"<div class = \"text-blocks\"><div class = \"text-block\">After this, you should get the following image:<\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/pr-journal\/bgyufw26.png\" \/><\/div><\/div>"}}],"cases":null,"data":null,"section":null,"section_color":null,"critical":null,"critical_id":null,"duration":0},{"id":744478,"guid":"796240F07BFF11E9A120558AE06F049B","previous_id":744469,"previous_guid":"47B323307BFF11E9A120558AE06F049B","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"D840D121C6EB48C086CF99840CA3CC23","order_id":1,"type_id":6,"title":"Section","source":{"title":"Analyzing the sample dataset"}},{"id":1054724,"guid":"6313E9D9B61145B99160C666AA9014C8","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Let's also take a look at the doublets.<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">ggplot(aes(tsne1,tsne2,color=doublet),data=df)+geom_point()<\/div><\/div><\/code><\/pre><\/div><\/div>"}},{"id":1054725,"guid":"652509A18293427A8B06F10145825A98","order_id":2,"type_id":17,"title":"result","source":{"body":"<div class = \"text-blocks\"><div class = \"text-block\">After that, you should get the following image:<\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/pr-journal\/bhjjfw26.png\" \/><\/div><\/div>"}}],"cases":null,"data":null,"section":null,"section_color":null,"critical":null,"critical_id":null,"duration":0},{"id":744508,"guid":"2BD0AC007C0411E9AC033D24916B3EAA","previous_id":744512,"previous_guid":"885D9AA07C0411E9AC033D24916B3EAA","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"93B56A82D32F4C41A59D33CE378ECE56","order_id":1,"type_id":6,"title":"Section","source":{"title":"Analyzing the sample dataset"}},{"id":1054724,"guid":"5C449C5035104183BF5A892C5AC9A3A9","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">Create directory and download datasets<\/span><\/div><div class = \"text-block\">Now, let's first download the data we need. We are now providing a one-stop-shop to download all of the data you need for the tutorial: <\/div><div class = \"text-block\"><a style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">https:\/\/ucsf.box.com\/s\/vg1bycvsjgyg63gkqsputprq5rxzjl6k<\/span><\/a><\/div><div class = \"text-block\"><span>. After downloading and unzipping (it's BIG), you should have a directory called <\/span><span style = \"font-weight:bold;\">demuxlet.tutorial<\/span><span style = \"font-weight:bold;\">.<\/span><\/div><\/div>"}}],"cases":null,"data":null,"section":null,"section_color":"#d0021b","critical":null,"critical_id":null,"duration":0},{"id":744509,"guid":"2BD0FA207C0411E9AC033D24916B3EAA","previous_id":744508,"previous_guid":"2BD0AC007C0411E9AC033D24916B3EAA","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"2DC983D5D0494BEFB1B04039634F414C","order_id":1,"type_id":6,"title":"Section","source":{"title":"Analyzing the sample dataset"}},{"id":1054724,"guid":"B63F72C9A589441F870AFA4D1BC15556","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">Run demuxlet<\/span><\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">$ cd demuxlet.tutorial <\/div><div class = \"text-block\">$ docker run -v .\/:\/data yimmieg\/demuxlet --sam \/data\/jurkat_293t_downsampled_n500_full_bam.bam --vcf \/data\/jurkat_293t_exons_only.vcf --field GT --out data\/jurkat_293t_demuxlet<\/div><\/div><\/code><\/pre><\/div><\/div>"}}],"cases":null,"data":null,"section":null,"section_color":null,"critical":null,"critical_id":null,"duration":0},{"id":744510,"guid":"2BD0FA217C0411E9AC033D24916B3EAA","previous_id":744509,"previous_guid":"2BD0FA207C0411E9AC033D24916B3EAA","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"62DBD7ED2A0D49A4929D80DC2804E9FB","order_id":1,"type_id":6,"title":"Section","source":{"title":"Analyzing the sample dataset"}},{"id":1054724,"guid":"A8C4FFE4B86C4CC895D2CDB566F10E3D","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">Compare the called genotypes vs transcriptome data<\/span><\/div><div class = \"text-block\">In this analysis, we will use R to produce a t-SNE (t-Distributed Stochastic Neighbor Embedding) plot of the cells from the 293T:Jurkat 10x experiment with the cells colored by the assignments from the demuxlet pipeline.<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">library(ggplot2); <\/div><div class = \"text-block\">library(data.table);  <\/div><div class = \"text-block\">## let's read in the barcodes <\/div><div class = \"text-block\">tsne <- fread(\"analysis_csv\/tsne\/projection.csv\"); <\/div><div class = \"text-block\">demuxlet <- fread(\"jurkat_293t_demuxlet.best\");  <\/div><div class = \"text-block\">## let's filter for the barcodes that we sampled  <\/div><div class = \"text-block\">df <- data.frame(tsne1=tsne$\"TSNE-1\"[na.omit(match(demuxlet$BARCODE,tsne$Barcode))], tsne2=tsne$\"TSNE-2\"[na.omit(match(demuxlet$BARCODE,tsne$Barcode))], doublet=sapply(demuxlet$BEST,function(x){strsplit(x,\"-\")[[1]][[1]]}), cell.type=sapply(demuxlet$BEST,function(x){strsplit(x,\"-\")[[1]][[2]]}))  <\/div><div class = \"text-block\">ggplot(aes(tsne1,tsne2,color=cell.type),data=df)+geom_point()<\/div><\/div><\/code><\/pre><\/div><\/div>"}},{"id":1054725,"guid":"24A700F67727434F9F0DF27423CD758C","order_id":2,"type_id":17,"title":"result","source":{"body":"<div class = \"text-blocks\"><div class = \"text-block\">After this, you should get the following image:<\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/pr-journal\/bgyufw26.png\" \/><\/div><\/div>"}}],"cases":null,"data":null,"section":null,"section_color":null,"critical":null,"critical_id":null,"duration":0},{"id":744511,"guid":"2BD121307C0411E9AC033D24916B3EAA","previous_id":744510,"previous_guid":"2BD0FA217C0411E9AC033D24916B3EAA","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"5666F239656745E999D89B408C5E87B4","order_id":1,"type_id":6,"title":"Section","source":{"title":"Analyzing the sample dataset"}},{"id":1054724,"guid":"19F77FDA3B7949908D1D0A12E11D8DD9","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Let's also take a look at the doublets.<\/div><div class = \"text-block\"><pre><code>ggplot(aes(tsne1,tsne2,color=doublet),data=df)+geom_point()\n<\/code><\/pre><\/div><\/div>"}},{"id":1054725,"guid":"91054131B9584774B8D8E191E22BADC9","order_id":2,"type_id":17,"title":"result","source":{"body":"<div class = \"text-blocks\"><div class = \"text-block\">After that, you should get the following image:<\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/pr-journal\/bgyvfw26.png\" \/><\/div><\/div>"}}],"cases":null,"data":null,"section":null,"section_color":null,"critical":null,"critical_id":null,"duration":0},{"id":744512,"guid":"885D9AA07C0411E9AC033D24916B3EAA","previous_id":744462,"previous_guid":"945070407BFE11E9A120558AE06F049B","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"797886DC74164D6395C38CCADAB3B9EC","order_id":1,"type_id":6,"title":"Section","source":{"title":"Getting Started"}},{"id":1054724,"guid":"A918CB664D834EEEA68F10F56C73B76B","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">Running demuxlet from docker<\/span><\/div><div class = \"text-block\"><span>We have created a docker container at <\/span><span style = \"font-weight:bold;\">yimmieg\/demuxlet<\/span><span> to run demuxlet through docker.<\/span><\/div><div class = \"text-block\">You can run it with<\/div><div class = \"text-block\"><pre><code>$ docker run -v path\/to\/tutorial:\/data yimmieg\/demuxlet --sam \/data\/$bam --vcf \/data\/$vcf --field $(GT or GP or PL) --out \/data\/$filename\n<\/code><\/pre><\/div><\/div>"}}],"cases":null,"data":null,"section":null,"section_color":null,"critical":null,"critical_id":null,"duration":0}],"materials":[],"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">Genetic multiplexing of barcoded single cell RNA-seq<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">Introduction<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;font-style:italic;\">demuxlet <\/span><span>is a software tool to deconvolute sample identity and identify multiplets when multiple samples are pooled by barcoded single cell sequencing.<\/span><span style = \"font-weight:bold;font-style:italic;\">demuxlet <\/span><span>takes (1) a SAM\/BAM\/CRAM file produced by the standard 10x sequencing platform, or any other barcoded single cell RNA-seq (with proper --tag-UMI and --tag-group) options (2) a VCF\/BCF file containing the genotype (GT), posterior probability (GP), or genotype likelihood (GL) to assign each barcode to a specific sample (or a pair of samples) in the VCF file.<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">Tutorial for demuxlet<\/span><\/div><div class = \"text-block\"><span>This tutorial provides streamlined instructions for using the tool <\/span><span style = \"font-weight:bold;\">demuxlet<\/span><span>. For a more detailed description of all of the options available to use with <\/span><span style = \"font-weight:bold;\">demuxlet<\/span><span>, please refer to the README (attached in .zip file). <\/span><span style = \"font-weight:bold;\">demuxlet <\/span><span>has several dependencies and this tutorial provides steps to use a docker instance to minimize compatibility issues and an alternative of installing demuxlet from source. <\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">demuxlet <\/span><span>is a software tool to deconvolute sample identity and identify multiplets when multiple samples are pooled by barcoded single cell sequencing. <\/span><span style = \"font-weight:bold;\">demuxlet <\/span><span>requires the following input files:<\/span><\/div><div class = \"text-block\"><ol style = \"list-style-type: decimal;\"><li style = \"counter-reset:ol0;\"><span>a SAM\/BAM\/CRAM file produced by the standard 10x sequencing platform, or any other barcoded single cell RNA-seq (with proper <\/span><span style = \"font-weight:bold;\">--tag-UMI <\/span><span>and <\/span><span style = \"font-weight:bold;\">--tag-group<\/span><span>) options.<\/span><\/li><li style = \"counter-reset:ol0;\">a VCF\/BCF file containing the genotype (GT), posterior probability (GP), or genotype likelihood (GL) to assign each barcode to a specific sample (or a pair of samples) in the VCF file.<\/li><\/ol><\/div><\/div>","changed_on":1561570418}