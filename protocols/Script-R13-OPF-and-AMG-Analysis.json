{"uri":"Script-R13-OPF-and-AMG-Analysis-ejkbckw","version_id":"0","protocol_name":"Script R13: OPF and AMG Analysis","protocol_name_html":"Script R13: OPF and AMG Analysis","is_prepublished":"0","can_edit":"0","parent_id":null,"api_version":"2","is_new_mode":"1","last_modified":"1510247633","type_id":"1","link":"http:\/\/mbio.asm.org\/content\/6\/5\/e01578-15.full","fork_id":"","public_fork_note":"","number_of_steps":"13","has_versions":"0","first_published_date":"1457616457","publish_date":"2016-03-11 03:00:28","documents":null,"have_protocol_in_step":"0","is_protocol_in_step":"0","vendor_name":"Contributed by users","vendor_link":"https:\/\/www.protocols.io","vendor_logo":"\/img\/vendors\/1.png","mod_mins":"-45","mod_secs":"1","description":"This protocols\u00a0outlines our definitions of core operational protein families (OPFs), potential auxiliary metabolic genes (AMGs), sharing of genes across anatomical sites, and Bray-Curtis dissimilarity of the OPFs by anatomical site. Based on methods from the following publication:<br \/><br \/>Hannigan, Geoffrey D., et al. \"The Human Skin Double-Stranded DNA Virome: Topographical and Temporal Diversity, Genetic Enrichment, and Dynamic Associations with the Host Microbiome.\"\u00a0<em>mBio<\/em>\u00a06.5 (2015): e01578-15.<br \/><br \/><br \/>","is_bookmarked":"0","can_reassign":"1","before_start":"Supplemental information available at:<br \/><br \/><a href=\"https:\/\/figshare.com\/articles\/The_Human_Skin_dsDNA_Virome_Topographical_and_Temporal_Diversity_Genetic_Enrichment_and_Dynamic_Associations_with_the_Host_Microbiome\/1281248\" target=\"_blank\">https:\/\/figshare.com\/articles\/The_Human_Skin_dsDNA_Virome_Topographical_and_Temporal_Diversity_Genetic_Enrichment_and_Dynamic_Associations_with_the_Host_Microbiome\/1281248<\/a>","has_guidelines":"1","materials":[],"warning":"","version_class":"2380","public":"1","is_owner":"1","is_original_owner":"1","created_on":"1455655023","protocol_affiliation":"DEPARTMENT OF DERMATOLOGY UNIVERSITY OF PENNSYLVANIA","affiliation":"Merck Research Labs","doi":"dx.doi.org\/10.17504\/protocols.io.ejkbckw","doi_status":"2","changed_fork_steps":null,"profile_url":"Geoffrey-w2y254v2q2","protocol_img":"https:\/\/www.protocols.io\/img\/default_protocol.png","profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/cpedy2n.jpg","full_name":"Geoffrey Hannigan","created_by":"Geoffrey Hannigan","private_link":"DA3E7307E9A71BA11EA6A966E5C6F307","original_img":"1","username":"geoffrey-hannigan","is_retracted":"0","retraction_reason":null,"plos_id":null,"manuscript_citation":null,"journal_name":null,"is_donations_disabled":"0","is_donations_disabled_by_user":"9","item_record_id":226794,"fork_info":[],"compare_forks":[],"protocols":[],"groups":[{"group_id":"45","group_uri":"verve-net","group_name":"VERVE Net","group_logo":"https:\/\/s3.amazonaws.com\/pr-journal\/cdqcwwe.png","requested_uid":null,"request_flag":null,"my_request":"1"},{"group_id":"138","group_uri":"club-grice","group_name":"Club Grice","group_logo":"https:\/\/s3.amazonaws.com\/pr-journal\/cp7dzme.png","requested_uid":null,"request_flag":null,"my_request":"1"}],"number_of_shared_runs":[],"ownership_history":[],"keywords":"","transfer_to_user":[],"sub_transfer":false,"is_transfer_pending":false,"number_of_bookmarks":"0","collections":[{"protocol_name":"The Human Skin dsDNA Virome: Topographical and Temporal Diversity, Genetic Enrichment, and its Dynamic Associations with the Host Microbiome","protocol_name_html":"The Human Skin dsDNA Virome: Topographical and Temporal Diversity, Genetic Enrichment, and its Dynamic Associations with the Host Microbiome","uri":"The-Human-Skin-dsDNA-Virome-Topographical-and-Temp-ekubcww","username":"geoffrey-hannigan","profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/cpedy2n.jpg","protocol_img":"https:\/\/www.protocols.io\/img\/default_protocol.png","full_name":"Geoffrey Hannigan"}],"tags":[],"archived":0,"sub_authors":[],"sub_protocols_number":0,"can_edit_shared":0,"shared_runs":[],"is_shared_run":0,"is_shared":1,"banner":null,"contact_badges":[{"badge_id":"4","badge_image":"\/img\/badges\/gold.svg","badge_description":"Gold power author!"},{"badge_id":"5","badge_image":"\/img\/badges\/earlyadopter.svg","badge_description":"Early adopter"},{"badge_id":"6","badge_image":"\/img\/badges\/socialbutterfly.svg","badge_description":"Social butterfly"}],"number_of_comments":0,"is_locked":0,"is_locked_by":false,"authors":"HANNIGAN GD, GRICE EA, ET AL.","authors_list":[{"name":"HANNIGAN GD","affiliation":"DEPARTMENT OF DERMATOLOGY UNIVERSITY OF PENNSYLVANIA","username":null,"profile_image":null},{"name":" GRICE EA","affiliation":"DEPARTMENT OF DERMATOLOGY UNIVERSITY OF PENNSYLVANIA","username":null,"profile_image":null},{"name":" ET AL.","affiliation":"DEPARTMENT OF DERMATOLOGY UNIVERSITY OF PENNSYLVANIA","username":null,"profile_image":null}],"user":{"profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/cpedy2n.jpg","username":"geoffrey-hannigan","full_name":"Geoffrey Hannigan","created_by":"Geoffrey Hannigan"},"access":{"can_view":"1","can_remove":"0","can_add":"0","can_edit":0,"can_publish":0,"can_get_doi":0,"can_share":"0","can_move":"1","can_transfer":"1","can_download":"1","is_locked":"0"},"is_contact_suspended":0,"guidelines":"<span class=\"identifier\">sessionInfo<\/span><span class=\"paren\">(<\/span><span class=\"paren\">)<br \/><br \/>## R version 3.2.0 (2015-04-16) <br \/>## Platform: x86_64-apple-darwin13.4.0 (64-bit) <br \/>## Running under: OS X 10.10.4 (Yosemite) <br \/>## ## locale: <br \/>## [1] en_US.UTF-8\/en_US.UTF-8\/en_US.UTF-8\/C\/en_US.UTF-8\/en_US.UTF-8 <br \/>## <br \/>## attached base packages: <br \/>## [1] stats graphics grDevices utils datasets methods base <br \/>## <br \/>## loaded via a namespace (and not attached): <br \/>## [1] magrittr_1.5 \u00a0 \u00a0formatR_1.2 \u00a0 \u00a0tools_3.2.0 \u00a0 \u00a0htmltools_0.2.6 <br \/>## [5] yaml_2.1.13 \u00a0 \u00a0stringi_0.4-1 \u00a0 \u00a0rmarkdown_0.7 \u00a0 \u00a0knitr_1.10.5 <br \/>## [9] stringr_1.0.0 \u00a0 \u00a0digest_0.6.8 \u00a0 \u00a0evaluate_0.7<\/span>","status_id":"1","is_research":"1","status_info":null,"steps":[{"id":"142885","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"318F19D58B244C3790BC46FDFC448AA4","previous_guid":null,"previous_id":"0","last_modified":"1502718730","components":[{"component_id":"978132","previous_id":0,"original_id":"0","guid":"81598FFC5B1943BFBAC08B2A9C18BAFB","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"150882","previous_id":"978132","original_id":"0","guid":"AC94F40CDEA24A7DA899DBCE6D813955","previous_guid":"81598FFC5B1943BFBAC08B2A9C18BAFB","component_type_id":"1","data_id":"0","data":"Load the required R packages.","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Load the required R packages."},"is_project":0},{"component_id":"150883","previous_id":"150882","original_id":"0","guid":"27D378BEADB94A5B8D41E109E052F122","previous_guid":"AC94F40CDEA24A7DA899DBCE6D813955","component_type_id":"15","data_id":"940","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"library(ggplot2)\npackageVersion(\"ggplot2\")\n\nlibrary(vegan)\npackageVersion(\"vegan\")\n\nlibrary(ggplot2)\npackageVersion(\"ggplot2\")\n\nlibrary(scatterplot3d)\npackageVersion(\"scatterplot3d\")","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0},{"component_id":"150884","previous_id":"150883","original_id":"0","guid":"2AC2E6D35929459799441C45E60E2519","previous_guid":"27D378BEADB94A5B8D41E109E052F122","component_type_id":"17","data_id":"198","data":"<pre><code>## [1] '1.0.1'<\/code><\/pre>\n<pre class=\"r\">\u00a0<\/pre>","order_id":"3","name":"Expected result","data_by_id":"1","type_id":"17","source_data":{"result":"<pre><code>## [1] '1.0.1'<\/code><\/pre>\n<pre class=\"r\">\u00a0<\/pre>"},"is_project":0},{"component_id":"150885","previous_id":"150884","original_id":"0","guid":"8AB276D1D0614EF6A6D6FD59F0E291AA","previous_guid":"2AC2E6D35929459799441C45E60E2519","component_type_id":"17","data_id":"199","data":"<pre><code>## [1] '2.3.0'<\/code><\/pre>\n<pre class=\"r\">\u00a0<\/pre>","order_id":"4","name":"Expected result","data_by_id":"1","type_id":"17","source_data":{"result":"<pre><code>## [1] '2.3.0'<\/code><\/pre>\n<pre class=\"r\">\u00a0<\/pre>"},"is_project":0},{"component_id":"150886","previous_id":"150885","original_id":"0","guid":"61D5F0D972E54216BE9C796E67BD60CE","previous_guid":"8AB276D1D0614EF6A6D6FD59F0E291AA","component_type_id":"17","data_id":"200","data":"<pre><code>## [1] '1.0.1'<\/code><\/pre>\n<pre class=\"r\">\u00a0<\/pre>","order_id":"5","name":"Expected result","data_by_id":"1","type_id":"17","source_data":{"result":"<pre><code>## [1] '1.0.1'<\/code><\/pre>\n<pre class=\"r\">\u00a0<\/pre>"},"is_project":0},{"component_id":"150887","previous_id":"150886","original_id":"0","guid":"89059A5D07D44B7DB078DDD40CBADFFD","previous_guid":"61D5F0D972E54216BE9C796E67BD60CE","component_type_id":"17","data_id":"201","data":"<pre><code>## [1] '0.3.35'<\/code><\/pre>","order_id":"6","name":"Expected result","data_by_id":"1","type_id":"17","source_data":{"result":"<pre><code>## [1] '0.3.35'<\/code><\/pre>"},"is_project":0}]},{"id":"142896","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"9F203DE80DCA4D92B971C478EED348DE","previous_guid":"318F19D58B244C3790BC46FDFC448AA4","previous_id":"142885","last_modified":"1502718730","components":[{"component_id":"978141","previous_id":0,"original_id":"0","guid":"7861B2D1B3684E0891B0125B48E30613","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"150915","previous_id":"978141","original_id":"0","guid":"49965EB2283640D3BF65662E6829D7FE","previous_guid":"7861B2D1B3684E0891B0125B48E30613","component_type_id":"1","data_id":"0","data":"<p>Import the needed data files and quantify the number of core operational protein families. Also write the names of the core OPFs so that I can query them and identify them after subsetting the input files.<\/p>\n<pre class=\"r\">\u00a0<\/pre>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Import the needed data files and quantify the number of core operational protein families. Also write the names of the core OPFs so that I can query them and identify them after subsetting the input files.<\/p>\n<pre class=\"r\">\u00a0<\/pre>"},"is_project":0},{"component_id":"150916","previous_id":"150915","original_id":"0","guid":"B8625028198842FE85A5BB72AD357943","previous_guid":"49965EB2283640D3BF65662E6829D7FE","component_type_id":"15","data_id":"941","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"# Import the protein cluster relative abundance data frame\nINPUT <- read.delim(\"..\/..\/IntermediateOutput\/AuxilaryMetabolicGenes\/contig_otu_table.txt\", sep=\"\\t\", header=TRUE)\nMAP <- read.delim(\"..\/..\/IntermediateOutput\/Mapping_files\/SkinMet_and_Virome_001_metadata.tsv\", sep=\"\\t\", header=TRUE)\nMAP_ORDER <- MAP[order(MAP$NexteraXT_Virome_SampleID),]\nMAP_SUBSET <- MAP_ORDER[-which(MAP_ORDER$TimePoint %in% 1), ]\nMAP_SUBSET <- MAP_SUBSET[-which(MAP_SUBSET$NexteraXT_Virome_SampleID %in% NA), ]\nMAP_SUBSET <- MAP_SUBSET[-which(MAP_SUBSET$Site_Symbol %in% c(\"Ba\",\"Ph\",\"Vf\",\"Neg\")), ]\nMAP_SUBSET <- MAP_SUBSET[-which(MAP_SUBSET$SubjectID %in% c(2,3,9,11)), ]","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"142897","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"F25B412EC6864766B63CB8924F78878D","previous_guid":"9F203DE80DCA4D92B971C478EED348DE","previous_id":"142896","last_modified":"1502718730","components":[{"component_id":"978142","previous_id":0,"original_id":"0","guid":"4B7D71DDB827482B8783DB9DA6E66CBC","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"150917","previous_id":"978142","original_id":"0","guid":"1E49EBCEED87411F9D0D77288A6C1DD1","previous_guid":"4B7D71DDB827482B8783DB9DA6E66CBC","component_type_id":"1","data_id":"0","data":"Keep only those columns with values matching these found in the mapping file subset. This will get rid of the locations we are not evaluating.","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Keep only those columns with values matching these found in the mapping file subset. This will get rid of the locations we are not evaluating."},"is_project":0},{"component_id":"150918","previous_id":"150917","original_id":"0","guid":"A06DB34C65CD413CA54F58FA9CC136E7","previous_guid":"1E49EBCEED87411F9D0D77288A6C1DD1","component_type_id":"15","data_id":"942","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"InputSubset <- INPUT[,which(colnames(INPUT) %in% MAP_SUBSET$NexteraXT_Virome_SampleID)]\nInputSubsetWithNames <- INPUT[,c(1,which(colnames(INPUT) %in% MAP_SUBSET$NexteraXT_Virome_SampleID))]\nrownames(InputSubsetWithNames) <- c(as.character(InputSubsetWithNames[,1]))\nInputSubsetWithNames <- InputSubsetWithNames[,-1]","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"142898","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"5B92AAC0A14D47FBBACDE005DD762BA0","previous_guid":"F25B412EC6864766B63CB8924F78878D","previous_id":"142897","last_modified":"1502718730","components":[{"component_id":"978143","previous_id":0,"original_id":"0","guid":"C90AAF5C38514F7681397526EE2DF9A6","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"150919","previous_id":"978143","original_id":"0","guid":"960F1072489442BCB124AC897DC148B0","previous_guid":"C90AAF5C38514F7681397526EE2DF9A6","component_type_id":"1","data_id":"0","data":"From here you can go to the diversity calculations below.","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"From here you can go to the diversity calculations below."},"is_project":0},{"component_id":"150920","previous_id":"150919","original_id":"0","guid":"1DD5ADC323274D6BB07D5BE7C25744F4","previous_guid":"960F1072489442BCB124AC897DC148B0","component_type_id":"15","data_id":"943","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"TotalOrfs <- length(InputSubsetWithNames[,1])\n# Remove the rows with any fields having a relative abundance of zero (gene not present)\n# First go through and see what rows have zero values; see http:\/\/stackoverflow.com\/questions\/9977686\/how-to-remove-rows-with-a-zero-value-in-r\nRowSubset <- apply(InputSubsetWithNames, 1, function(row) all(row !=0 ))\nCoreAMG <- InputSubsetWithNames[RowSubset,]\nTotalCoreOrfs <- length(CoreAMG[,1])","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"142899","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"87A107F5D4C8431F82553A6A9B090173","previous_guid":"5B92AAC0A14D47FBBACDE005DD762BA0","previous_id":"142898","last_modified":"1502718730","components":[{"component_id":"978144","previous_id":0,"original_id":"0","guid":"FDC0F3D2902E416E84E25BD04FAAB34A","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"150921","previous_id":"978144","original_id":"0","guid":"E1640DAA94A84FA7B1672066D3A4C51A","previous_guid":"FDC0F3D2902E416E84E25BD04FAAB34A","component_type_id":"1","data_id":"0","data":"Write the names of the core protein clusters so that I can pull out the fasta sequences and query them against UniProt.","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Write the names of the core protein clusters so that I can pull out the fasta sequences and query them against UniProt."},"is_project":0},{"component_id":"150922","previous_id":"150921","original_id":"0","guid":"31FB608A1745435F95793FFD13381C60","previous_guid":"E1640DAA94A84FA7B1672066D3A4C51A","component_type_id":"15","data_id":"944","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"write.table(rownames(CoreAMG), file=\"..\/..\/IntermediateOutput\/AuxilaryMetabolicGenes\/CoreAmgOrfIds.tsv\", quote=FALSE, sep='\\t', col.names=FALSE, row.names=FALSE)","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"142900","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"17EAA3FD54B04E9CAEB1EB5531771DBC","previous_guid":"87A107F5D4C8431F82553A6A9B090173","previous_id":"142899","last_modified":"1502718730","components":[{"component_id":"978145","previous_id":0,"original_id":"0","guid":"4767B07D989B4F5A99DE3E5121C38CB5","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"150923","previous_id":"978145","original_id":"0","guid":"AB9F93A89D03462CB9FCCEE980F42029","previous_guid":"4767B07D989B4F5A99DE3E5121C38CB5","component_type_id":"1","data_id":"0","data":"Determine how many genes are core to sites by location type.","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Determine how many genes are core to sites by location type."},"is_project":0},{"component_id":"150924","previous_id":"150923","original_id":"0","guid":"2E50255A6B18491382FB3EDBB3F2E7DF","previous_guid":"AB9F93A89D03462CB9FCCEE980F42029","component_type_id":"15","data_id":"945","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"UniqSiteTypes <- factor(unique(MAP_SUBSET$Site_Categories))\n\nfor(x in UniqSiteTypes)\n{\n  MapSebaceous <- MAP_SUBSET[which(MAP_SUBSET$Site_Categories %in% x), ]\n  InputSebaceous <- InputSubset[,which(colnames(InputSubset) %in% MapSebaceous$NexteraXT_Virome_SampleID)]\n  RowSubset <- apply(InputSebaceous, 1, function(row) all(row !=0 ))\n  SebaceousAMG <- InputSebaceous[RowSubset,]\n  print(x)\n  print(length(SebaceousAMG[,1]))\n}","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0},{"component_id":"150925","previous_id":"150924","original_id":"0","guid":"637A220289E04A7FBBE19855A6BB138C","previous_guid":"2E50255A6B18491382FB3EDBB3F2E7DF","component_type_id":"17","data_id":"202","data":"## [1] \"Sebaceous\" <br \/>## [1] 25 <br \/>## [1] \"Moist\" <br \/>## [1] 15 <br \/>## [1] \"Intermittently_Moist\" <br \/>## [1] 38","order_id":"3","name":"Expected result","data_by_id":"1","type_id":"17","source_data":{"result":"## [1] \"Sebaceous\" <br \/>## [1] 25 <br \/>## [1] \"Moist\" <br \/>## [1] 15 <br \/>## [1] \"Intermittently_Moist\" <br \/>## [1] 38"},"is_project":0}]},{"id":"142901","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"DAD8AF9044104B798CDD779B4BA1567B","previous_guid":"17EAA3FD54B04E9CAEB1EB5531771DBC","previous_id":"142900","last_modified":"1502718730","components":[{"component_id":"978146","previous_id":0,"original_id":"0","guid":"0B5818451F7642F194B6C9FDF1B5F16E","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"150926","previous_id":"978146","original_id":"0","guid":"675A419183154392867E81D09E69BF6A","previous_guid":"0B5818451F7642F194B6C9FDF1B5F16E","component_type_id":"1","data_id":"0","data":"See number of core protein clusters by site.","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"See number of core protein clusters by site."},"is_project":0},{"component_id":"150927","previous_id":"150926","original_id":"0","guid":"1741BDE07AB840A7A93AA5D22E79F321","previous_guid":"675A419183154392867E81D09E69BF6A","component_type_id":"15","data_id":"946","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"UniqOcc <- factor(unique(MAP_SUBSET$Occlusion))\nfor(x in UniqOcc)\n{\n  MapSebaceous <- MAP_SUBSET[which(MAP_SUBSET$Occlusion %in% x), ]\n  InputSebaceous <- InputSubset[,which(colnames(InputSubset) %in% MapSebaceous$NexteraXT_Virome_SampleID)]\n  RowSubset <- apply(InputSebaceous, 1, function(row) all(row !=0 ))\n  SebaceousAMG <- InputSebaceous[RowSubset,]\n  print(x)\n  print(length(SebaceousAMG[,1]))\n}","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0},{"component_id":"150928","previous_id":"150927","original_id":"0","guid":"39C7E55429C14C2081963841EB58F99C","previous_guid":"1741BDE07AB840A7A93AA5D22E79F321","component_type_id":"17","data_id":"203","data":"## [1] \"Occluded\" <br \/>## [1] 15 <br \/>## [1] \"Exposed\" <br \/>## [1] 24 <br \/>## [1] \"Intermittently_Occluded\" <br \/>## [1] 174","order_id":"3","name":"Expected result","data_by_id":"1","type_id":"17","source_data":{"result":"## [1] \"Occluded\" <br \/>## [1] 15 <br \/>## [1] \"Exposed\" <br \/>## [1] 24 <br \/>## [1] \"Intermittently_Occluded\" <br \/>## [1] 174"},"is_project":0}]},{"id":"142902","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"9D27D671EACD4CD1A3434E6D61C7DB72","previous_guid":"DAD8AF9044104B798CDD779B4BA1567B","previous_id":"142901","last_modified":"1502718730","components":[{"component_id":"978147","previous_id":0,"original_id":"0","guid":"6AABBAC3157A493CB26C141A755FC920","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"150929","previous_id":"978147","original_id":"0","guid":"7A00B5D3C7CB4BB09139BC6FEDDB590E","previous_guid":"6AABBAC3157A493CB26C141A755FC920","component_type_id":"1","data_id":"0","data":"Try again for all of the different anatomical groups for plotting.","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Try again for all of the different anatomical groups for plotting."},"is_project":0},{"component_id":"150930","previous_id":"150929","original_id":"0","guid":"65493683DDF54ADFB699B40AC56B738C","previous_guid":"7A00B5D3C7CB4BB09139BC6FEDDB590E","component_type_id":"15","data_id":"947","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"UniqSites <- factor(unique(MAP_SUBSET$Site_Symbol))\nanatomicalSiteDF <- c()\nfor(x in UniqSites) {\n  MapSebaceous <- MAP_SUBSET[which(MAP_SUBSET$Site_Symbol %in% x), ]\n  InputSebaceous <- InputSubset[,which(colnames(InputSubset) %in% MapSebaceous$NexteraXT_Virome_SampleID)]\n  RowSubset <- apply(InputSebaceous, 1, function(row) all(row !=0 ))\n  SebaceousAMG <- InputSebaceous[RowSubset,]\n  anatomicalSiteDF <- rbind(anatomicalSiteDF,c(x,length(SebaceousAMG[,1])))\n}\nanatomicalSiteDF <- as.data.frame(anatomicalSiteDF)\nas.numeric(as.character(anatomicalSiteDF[,2]))","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0},{"component_id":"150931","previous_id":"150930","original_id":"0","guid":"6E9064E42AD8447E8FDB8519E9E4DCD7","previous_guid":"65493683DDF54ADFB699B40AC56B738C","component_type_id":"17","data_id":"204","data":"<pre><code>## [1]  72 114  64 494  41  15  45 174<\/code><\/pre>\n<pre class=\"r\">\u00a0<\/pre>","order_id":"3","name":"Expected result","data_by_id":"1","type_id":"17","source_data":{"result":"<pre><code>## [1]  72 114  64 494  41  15  45 174<\/code><\/pre>\n<pre class=\"r\">\u00a0<\/pre>"},"is_project":0}]},{"id":"142903","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"4FC923F50FBA4039B065C60537ED0D93","previous_guid":"9D27D671EACD4CD1A3434E6D61C7DB72","previous_id":"142902","last_modified":"1502718730","components":[{"component_id":"978148","previous_id":0,"original_id":"0","guid":"668B9484B6AE4C4AB4088CAAB884FA7D","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"150932","previous_id":"978148","original_id":"0","guid":"AF0592D6410542F3BE6F238532DF9AF2","previous_guid":"668B9484B6AE4C4AB4088CAAB884FA7D","component_type_id":"1","data_id":"0","data":"Plot the protein cluster count.","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Plot the protein cluster count."},"is_project":0},{"component_id":"150933","previous_id":"150932","original_id":"0","guid":"50F06AD1D0EF43608D6A610365D910C3","previous_guid":"AF0592D6410542F3BE6F238532DF9AF2","component_type_id":"15","data_id":"948","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"AmgSitePlot <- ggplot(anatomicalSiteDF, aes(x=V1, y=as.numeric(as.character(V2)))) + theme_bw() + geom_bar(stat=\"identity\") + xlab(\"Anatomical Site\") + ylab(\"Core Protein Cluster Count\")\nAmgSitePlot","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0},{"component_id":"150934","previous_id":"150933","original_id":"0","guid":"4D4E019FAD574ACC87CE3069503FFB61","previous_guid":"50F06AD1D0EF43608D6A610365D910C3","component_type_id":"17","data_id":"205","data":"<img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/chvc2w6.png\" alt=\"\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/chuc2w6.png\" data-ofn=\"r13_cluster.png\" \/>","order_id":"3","name":"Expected result","data_by_id":"1","type_id":"17","source_data":{"result":"<img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/chvc2w6.png\" alt=\"\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/chuc2w6.png\" data-ofn=\"r13_cluster.png\" \/>"},"is_project":0}]},{"id":"142904","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"755AB4AFA809492BA192821D183469AD","previous_guid":"4FC923F50FBA4039B065C60537ED0D93","previous_id":"142903","last_modified":"1502718730","components":[{"component_id":"978149","previous_id":0,"original_id":"0","guid":"562C00652553438AA282792EC1330A92","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"150935","previous_id":"978149","original_id":"0","guid":"FD03AFAAF7B14931B69C1619CAABEC19","previous_guid":"562C00652553438AA282792EC1330A92","component_type_id":"1","data_id":"0","data":"Finally we calculated the diversity of ORFs by different anatomical sites. Transpose the input file.","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Finally we calculated the diversity of ORFs by different anatomical sites. Transpose the input file."},"is_project":0},{"component_id":"150936","previous_id":"150935","original_id":"0","guid":"E4199F6BF0EC440D8C0E3C13D1E1DDCC","previous_guid":"FD03AFAAF7B14931B69C1619CAABEC19","component_type_id":"15","data_id":"949","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"InputT <- data.frame(t(InputSubset))\nINPUT_SUBSET_DIST_MATRIX <- vegdist(InputT, method = \"bray\")","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"142905","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"EDC19A290D214F6EBABDC47175F21275","previous_guid":"755AB4AFA809492BA192821D183469AD","previous_id":"142904","last_modified":"1502718730","components":[{"component_id":"978150","previous_id":0,"original_id":"0","guid":"8CA27765EEE74FE2B0CF7047BE8C41E5","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"150937","previous_id":"978150","original_id":"0","guid":"D2C261195EF041B195C9D27F6CDD56CA","previous_guid":"8CA27765EEE74FE2B0CF7047BE8C41E5","component_type_id":"1","data_id":"0","data":"Visualize the distance matrix using NMDS.","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Visualize the distance matrix using NMDS."},"is_project":0},{"component_id":"150938","previous_id":"150937","original_id":"0","guid":"99BC4D58E59A41D3BEA2E2112940EAA8","previous_guid":"D2C261195EF041B195C9D27F6CDD56CA","component_type_id":"15","data_id":"950","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"BRAY_ORD_NMDS <- metaMDS(INPUT_SUBSET_DIST_MATRIX,k=3)\n\nBRAY_ORD_FIT = data.frame(MDS1 = BRAY_ORD_NMDS$points[,1], MDS2 = BRAY_ORD_NMDS$points[,2], MDS3 = BRAY_ORD_NMDS$points[,3])\n#Record the stress value\nBRAY_ORD_NMDS$stress\n\nBRAY_ORD_FIT$SampleID <- rownames(BRAY_ORD_FIT)\nNMDS_AND_MAP <- merge(BRAY_ORD_FIT, MAP_SUBSET, by.x=\"SampleID\", by.y=\"NexteraXT_Virome_SampleID\")","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0},{"component_id":"150939","previous_id":"150938","original_id":"0","guid":"1D87AB9F98ED40988FB431F93D7CD685","previous_guid":"99BC4D58E59A41D3BEA2E2112940EAA8","component_type_id":"17","data_id":"206","data":"## Run 0 stress 0.142143 <br \/>## Run 1 stress 0.1460666 <br \/>## Run 2 stress 0.1438215 <br \/>## Run 3 stress 0.1435173 <br \/>## Run 4 stress 0.1408786 <br \/>## ... New best solution <br \/>## ... procrustes: rmse 0.03486057 max resid 0.3573651 <br \/>## Run 5 stress 0.1429197 <br \/>## Run 6 stress 0.1436577 <br \/>## Run 7 stress 0.1439074 <br \/>## Run 8 stress 0.1473716 <br \/>## Run 9 stress 0.1443224 <br \/>## Run 10 stress 0.1431153 <br \/>## Run 11 stress 0.147699 <br \/>## Run 12 stress 0.1447852 <br \/>## Run 13 stress 0.1427725 <br \/>## Run 14 stress 0.1455643 <br \/>## Run 15 stress 0.1470337 <br \/>## Run 16 stress 0.1446069 <br \/>## Run 17 stress 0.1431871 <br \/>## Run 18 stress 0.1442179 <br \/>## Run 19 stress 0.146792 <br \/>## Run 20 stress 0.1463412","order_id":"3","name":"Expected result","data_by_id":"1","type_id":"17","source_data":{"result":"## Run 0 stress 0.142143 <br \/>## Run 1 stress 0.1460666 <br \/>## Run 2 stress 0.1438215 <br \/>## Run 3 stress 0.1435173 <br \/>## Run 4 stress 0.1408786 <br \/>## ... New best solution <br \/>## ... procrustes: rmse 0.03486057 max resid 0.3573651 <br \/>## Run 5 stress 0.1429197 <br \/>## Run 6 stress 0.1436577 <br \/>## Run 7 stress 0.1439074 <br \/>## Run 8 stress 0.1473716 <br \/>## Run 9 stress 0.1443224 <br \/>## Run 10 stress 0.1431153 <br \/>## Run 11 stress 0.147699 <br \/>## Run 12 stress 0.1447852 <br \/>## Run 13 stress 0.1427725 <br \/>## Run 14 stress 0.1455643 <br \/>## Run 15 stress 0.1470337 <br \/>## Run 16 stress 0.1446069 <br \/>## Run 17 stress 0.1431871 <br \/>## Run 18 stress 0.1442179 <br \/>## Run 19 stress 0.146792 <br \/>## Run 20 stress 0.1463412"},"is_project":0},{"component_id":"150940","previous_id":"150939","original_id":"0","guid":"F20D0A8F7D5343C9AB7E2F868101FE11","previous_guid":"1D87AB9F98ED40988FB431F93D7CD685","component_type_id":"17","data_id":"207","data":"<pre><code>## [1] 0.1408786<\/code><\/pre>\n<pre class=\"r\">\u00a0<\/pre>","order_id":"4","name":"Expected result","data_by_id":"1","type_id":"17","source_data":{"result":"<pre><code>## [1] 0.1408786<\/code><\/pre>\n<pre class=\"r\">\u00a0<\/pre>"},"is_project":0}]},{"id":"142906","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"56258ED48B774B7DAAD6EBFD5A27009A","previous_guid":"EDC19A290D214F6EBABDC47175F21275","previous_id":"142905","last_modified":"1502718730","components":[{"component_id":"978151","previous_id":0,"original_id":"0","guid":"5AEFA5192E124ABDAD9E446C2FD9059B","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"150941","previous_id":"978151","original_id":"0","guid":"9F9AA054CDAB4760A584AD1F7D1AEEBB","previous_guid":"5AEFA5192E124ABDAD9E446C2FD9059B","component_type_id":"1","data_id":"0","data":"Plot the data.","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Plot the data."},"is_project":0},{"component_id":"150942","previous_id":"150941","original_id":"0","guid":"D27AF3DDA7794A3EA4FF3E72A441AE9F","previous_guid":"9F9AA054CDAB4760A584AD1F7D1AEEBB","component_type_id":"15","data_id":"951","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"s3d <- scatterplot3d(NMDS_AND_MAP$MDS1,NMDS_AND_MAP$MDS2,NMDS_AND_MAP$MDS3, pch=16, color=as.integer(factor(NMDS_AND_MAP$Site_Categories)), type=\"h\")\nlegend('right', pch = 16,legend = levels(factor(NMDS_AND_MAP$Site_Categories)),  col = seq_along(levels(NMDS_AND_MAP$Site_Categories)), inset=c(0.1,0))\n\nadonis(INPUT_SUBSET_DIST_MATRIX ~ factor(NMDS_AND_MAP$Site_Categories), perm=999, strata = factor(NMDS_AND_MAP$SubjectID))","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0},{"component_id":"150943","previous_id":"150942","original_id":"0","guid":"E52893DD4C3E4DE78BAD02053FBB31A2","previous_guid":"D27AF3DDA7794A3EA4FF3E72A441AE9F","component_type_id":"17","data_id":"208","data":"<img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/chyc2w6.png\" alt=\"\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/chxc2w6.png\" data-ofn=\"r13_plot.png\" \/>","order_id":"3","name":"Expected result","data_by_id":"1","type_id":"17","source_data":{"result":"<img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/chyc2w6.png\" alt=\"\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/chxc2w6.png\" data-ofn=\"r13_plot.png\" \/>"},"is_project":0}]},{"id":"142907","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"62C9F43BE4BF48E7997524D569664D89","previous_guid":"56258ED48B774B7DAAD6EBFD5A27009A","previous_id":"142906","last_modified":"1502718730","components":[{"component_id":"978152","previous_id":0,"original_id":"0","guid":"25CED1999F9646649AE1BDA7DC46FA43","previous_guid":null,"component_type_id":"6","data_id":null,"data":null,"order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":null},"is_project":0},{"component_id":"150944","previous_id":"978152","original_id":"0","guid":"0A5BF2B9C71647229ACAEACF90EF666A","previous_guid":"25CED1999F9646649AE1BDA7DC46FA43","component_type_id":"1","data_id":"0","data":"Plot by occlusion site status.","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Plot by occlusion site status."},"is_project":0},{"component_id":"150945","previous_id":"150944","original_id":"0","guid":"ADB5D6DCFC534FB6B61A159DC1AA4BE1","previous_guid":"0A5BF2B9C71647229ACAEACF90EF666A","component_type_id":"15","data_id":"952","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"s3d <- scatterplot3d(NMDS_AND_MAP$MDS1,NMDS_AND_MAP$MDS2,NMDS_AND_MAP$MDS3, pch=16, color=as.integer(factor(NMDS_AND_MAP$Occlusion)), type=\"h\")\nlegend('right', pch = 16,legend = levels(factor(NMDS_AND_MAP$Occlusion)),  col = seq_along(levels(NMDS_AND_MAP$Occlusion)), inset=c(0.1,0))\n\nadonis(INPUT_SUBSET_DIST_MATRIX ~ factor(NMDS_AND_MAP$Occlusion), perm=999, strata = factor(NMDS_AND_MAP$SubjectID))","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0},{"component_id":"150946","previous_id":"150945","original_id":"0","guid":"0923415274834EC6B15B0C2253DC6BE5","previous_guid":"ADB5D6DCFC534FB6B61A159DC1AA4BE1","component_type_id":"17","data_id":"209","data":"<img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/ch2c2w6.png\" alt=\"\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/chzc2w6.png\" data-ofn=\"r13_occlus.png\" \/>","order_id":"3","name":"Expected result","data_by_id":"1","type_id":"17","source_data":{"result":"<img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/ch2c2w6.png\" alt=\"\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/chzc2w6.png\" data-ofn=\"r13_occlus.png\" \/>"},"is_project":0}]}]}