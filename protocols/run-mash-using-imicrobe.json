{"uri":"run-mash-using-imicrobe-s9ueh6w","version_id":"0","protocol_name":"Run MASH using iMicrobe","protocol_name_html":"Run MASH using iMicrobe","is_retracted":"0","is_prepublished":"0","can_edit":"0","parent_id":null,"api_version":"1","is_new_mode":"0","last_modified":"1536757783","type_id":"1","link":"https:\/\/www.imicrobe.us\/#\/apps\/76","fork_id":"","public_fork_note":"","number_of_steps":"1","has_versions":"0","first_published_date":"1536757783","publish_date":"2018-09-12 13:09:43","documents":null,"have_protocol_in_step":"0","is_protocol_in_step":"0","vendor_name":"Contributed by users","vendor_link":"https:\/\/www.protocols.io","vendor_logo":"\/img\/vendors\/1.png","mod_mins":"-37","mod_secs":"25","description":"<p>How to run\u00a0MASH\u00a0 version\u00a0(<a href=\"https:\/\/genomebiology.biomedcentral.com\/articles\/10.1186\/s13059-016-0997-x\" target=\"_blank\" rel=\"noopener noreferrer\">Ondov <em>et al.<\/em> 2016<\/a>)\u00a0through the\u00a0<a href=\"https:\/\/www.imicrobe.us\/\" target=\"_blank\" rel=\"noopener noreferrer\">iMicrobe<\/a>\u00a0plaform.<\/p>\n<p>\u00a0<\/p>\n<p>MASH is a\u00a0 kmer-based sample-comparison tool using the MinHash algorithm to reduce the sample dimensionality and calculating a distance\u00a0betwwen sample.<\/p>\n<p>\u00a0<\/p>\n<p>More informations about MASH can be found here : <a href=\"https:\/\/mash.readthedocs.io\/en\/latest\/\" target=\"_blank\" rel=\"noopener noreferrer\">https:\/\/mash.readthedocs.io\/en\/latest\/<\/a><\/p>","is_bookmarked":"0","can_reassign":"1","before_start":"<ul>\n<li>You need a working Cyverse account to connect to iMicrobe.To explore how to log into iMicrobe, read\u00a0<a href=\"https:\/\/www.protocols.io\/view\/logging-into-imicrobe-us-rmmd446\" target=\"_blank\" rel=\"noopener noreferrer\">the dedicated protocol<\/a>.\u00a0<br \/><br \/><\/li>\n<li>Your dataset of interest should be metagenomic reads, in a fasta or fastq format.<br \/><br \/><\/li>\n<li>In iMicrobe, there is several ways to run an app on a dataset (from the cart, from your personnal datastore and form an URL). If you need more information on how to run an app,\u00a0<a href=\"https:\/\/www.protocols.io\/view\/running-an-app-on-imicrobe-r9jd94n\" target=\"_blank\" rel=\"noopener noreferrer\">read the protocol associated<\/a>.<\/li>\n<\/ul>","has_guidelines":"1","materials":[],"warning":null,"version_class":"15380","public":"1","is_owner":"1","is_original_owner":"1","created_on":"1536156941","protocol_affiliation":"University of Arizona","affiliation":"University of Arizona","doi":"dx.doi.org\/10.17504\/protocols.io.s9ueh6w","doi_status":"2","changed_fork_steps":null,"profile_url":"AlisePonsero-432394v2x2","protocol_img":"https:\/\/s3.amazonaws.com\/pr-journal\/6wu2kge.gif","profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/4uh2kge.jpg","full_name":"Alise Ponsero","created_by":"Alise Ponsero","private_link":"01710CFB746BEF215F00CBEC9F3A1F5E","original_img":"1","username":"alise-ponsero","retraction_reason":null,"plos_id":null,"manuscript_citation":null,"journal_name":null,"is_donations_disabled":"0","is_donations_disabled_by_user":"9","item_record_id":352265,"fork_info":[],"compare_forks":[],"protocols":[],"groups":[{"group_id":"167","group_uri":"imicrobe","group_name":"iMicrobe","group_logo":"https:\/\/s3.amazonaws.com\/pr-journal\/degbvtw.png","requested_uid":null,"request_flag":null,"my_request":"0"}],"number_of_shared_runs":[],"ownership_history":[],"keywords":"","transfer_to_user":[],"sub_transfer":false,"is_transfer_pending":false,"number_of_bookmarks":"0","collections":[],"tags":[{"tag_id":"106","tag_name":"metagenomics"},{"tag_id":"144","tag_name":"kmer"}],"archived":0,"sub_authors":[],"sub_protocols_number":0,"can_edit_shared":0,"shared_runs":[],"is_shared_run":0,"is_shared":1,"banner":null,"contact_badges":[{"badge_id":"3","badge_image":"\/img\/badges\/silver.svg","badge_description":"Power author!"}],"number_of_comments":0,"is_locked":0,"is_locked_by":false,"authors":"Alise Ponsero","authors_list":[{"name":"Alise Ponsero","affiliation":"University of Arizona","username":"alise-ponsero","profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/4uh2kge.jpg"}],"user":{"profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/4uh2kge.jpg","username":"alise-ponsero","full_name":"Alise Ponsero","created_by":"Alise Ponsero"},"access":{"can_view":"1","can_remove":"0","can_add":"0","can_edit":0,"can_publish":0,"can_get_doi":0,"can_share":"0","can_move":"1","can_transfer":"1","can_download":"1","is_locked":"0"},"is_contact_suspended":0,"guidelines":"<p><strong>More informations and details about MASH can be found there :\u00a0<a href=\"https:\/\/mash.readthedocs.io\/en\/latest\/\" target=\"_blank\" rel=\"noopener noreferrer\">https:\/\/mash.readthedocs.io\/en\/latest\/<\/a><\/strong><\/p>\n<p>\u00a0<\/p>\n<p>\u00a0<\/p>\n<p><strong>Several parameters are available to the user through the iMicrobe app.<\/strong>\u00a0<\/p>\n<ul>\n<li><strong>kmer size :<\/strong><br \/>As in any k-mer based method, larger k-mers will provide more specificity, while smaller k-mers will provide more sensitivity. Larger genomes will also require larger k-mers to avoid k-mers that are shared by chance. The k-mer size can be tuned by the iMicrobe user using the \"kmer size\" parameter. The default setting is 21bp.<\/li>\n<li><strong>Sketch size :<\/strong>For sequences to be compared with <span style=\"font-family: monospace;\">MASH<\/span>, they must first be\u00a0<cite>sketched<\/cite>, which creates vastly reduced representations of them.\u00a0Sketch size corresponds to the number of (non-redundant) min-hashes that are kept. Larger sketches will better represent the sequence, but at the cost of larger sketch files and longer comparison times. The sketch size can be tuned by the iMicrobe user using the \"Sketch size\" parameter. The default setting is 1000.<\/li>\n<\/ul>","status_id":"1","is_research":"0","status_info":"We use this protocol in our group and it is working","steps":[{"id":"661064","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"34D05B5A22784EBBB4AD3426E2B5C494","previous_guid":null,"previous_id":"0","last_modified":"1536757551","components":[{"component_id":"1191539","previous_id":0,"original_id":"0","guid":"89AF51EE59FF43C2B23301B80C7A3BD9","previous_guid":null,"component_type_id":"6","data_id":"0","data":"Run MASH on iMicrobe","order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Run MASH on iMicrobe"},"is_project":0},{"component_id":"1191538","previous_id":"1191539","original_id":"0","guid":"FF6983DD01EC4BE58B0C3D8D092CD69E","previous_guid":"89AF51EE59FF43C2B23301B80C7A3BD9","component_type_id":"1","data_id":null,"data":"<p><em>\u00a0Note :This protocol uses\u00a0<a href=\"https:\/\/www.imicrobe.us\/#\/projects\/265\" target=\"_blank\" rel=\"noopener noreferrer\">mock communities available on iMicrobe<\/a>. These mock communities are artificially generated 454 reads (10 million reads per file) using\u00a0<a href=\"https:\/\/bmcgenomics.biomedcentral.com\/articles\/10.1186\/1471-2164-13-74\" target=\"_blank\" rel=\"noopener noreferrer\">GemSim<\/a>, from known composition profiles.<\/em><\/p>\n<p>\u00a0<\/p>\n<p>In the iMicrobe sample search page, select the mock communities to add them in your cart. In the 'tools' dropdown menu, select 'Apps'. You are presented the list of apps currently available on iMicrobe. Click on\u00a0<a href=\"https:\/\/www.imicrobe.us\/#\/apps\/76\" target=\"_blank\" rel=\"noopener noreferrer\">mash-all-vs-all-0.0.5u1<\/a><\/p>\n<p>\u00a0<\/p>\n<p>In the page app,\u00a0provide the input files using the cart. Choose the following parameters :<\/p>\n<ul>\n<li><strong>kmer size\u00a0:<\/strong>\u00a0by default set as 21bp<\/li>\n<li><strong>sketch size<\/strong> : by default set as 1000.<\/li>\n<\/ul>\n<p><em>Note : for more details on the app parameters, please read the 'Guidelines' section of this protocol.<\/em><\/p>\n<p>\u00a0<\/p>\n<p>\u00a0<video style=\"display: block; margin-left: auto; margin-right: auto;\" controls=\"controls\" width=\"300\" height=\"150\"><source type=\"video\/mp4\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/6xf2kge.mp4\" \/><\/video><\/p>\n<p>\u00a0<\/p>\n<p>After the job is effectively ran, you can access your results using the drop-down menu 'Tools' and selecting 'Jobs'. Select the job corresponding to your centrifuge run, and go to the section 'Outputs'.<\/p>\n<p>The\u00a0mash output files are now in your cyverse datastore. Click on 'Browse and view output files in the CyVerse Datastore'.<\/p>\n<p>\u00a0<\/p>\n<p>\u00a0<video style=\"display: block; margin-left: auto; margin-right: auto;\" controls=\"controls\" width=\"300\" height=\"150\"><source type=\"video\/mp4\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/6yt2kge.mp4\" \/><\/video><\/p>\n<p>\u00a0<\/p>\n<p>In the job folder created in the CyVerse datastore, the input fasta\/fastq files are copied, along with the logs of the job (*.err and *.out). In order to retrieve your results go to the mash-out folder. It contains two folders :\u00a0<\/p>\n<p>\u00a0<\/p>\n<ul>\n<li><strong><em>sketches<\/em><\/strong><br \/>This folder contains the mash sketches index for the input files. These files have a *.msh extension.<br \/><br \/><\/li>\n<li><strong><em>figures<\/em><\/strong><br \/>This folder contains the MASH final outputs.\u00a0<br \/>\n<ul>\n<li><strong>distance.txt<\/strong><br \/>This txt file contains the standard matrix output of MASH. This matrix contains the all versus all distance computation of MASH in a tabular table.<\/li>\n<\/ul>\n<\/li>\n<li>In addition to this standard output, the iMicrobe app offers the user with some quick vizualization of their data:\n<ul>\n<li><strong>dendrogram.png<\/strong><br \/>This data vizualization uses the hclust R function and a ward clustering method.<\/li>\n<li><strong>dendrogram_fan.png<\/strong><br \/>Fan dendrogram of a Newick tree.<\/li>\n<li><strong>heatmap.png<\/strong><br \/>Heatmap of the distance matrix. No clustering method is applied. The scale range from 0 (white) to 1 (dark blue).<\/li>\n<li><strong>pcoa.pdf<\/strong><br \/>PCOA applied on the dataset.<\/li>\n<li><strong>tree.newick<br \/><\/strong>Newick tree used for the dendrogram_fan vizualization.<\/li>\n<\/ul>\n<\/li>\n<\/ul>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p><em>\u00a0Note :This protocol uses\u00a0<a href=\"https:\/\/www.imicrobe.us\/#\/projects\/265\" target=\"_blank\" rel=\"noopener noreferrer\">mock communities available on iMicrobe<\/a>. These mock communities are artificially generated 454 reads (10 million reads per file) using\u00a0<a href=\"https:\/\/bmcgenomics.biomedcentral.com\/articles\/10.1186\/1471-2164-13-74\" target=\"_blank\" rel=\"noopener noreferrer\">GemSim<\/a>, from known composition profiles.<\/em><\/p>\n<p>\u00a0<\/p>\n<p>In the iMicrobe sample search page, select the mock communities to add them in your cart. In the 'tools' dropdown menu, select 'Apps'. You are presented the list of apps currently available on iMicrobe. Click on\u00a0<a href=\"https:\/\/www.imicrobe.us\/#\/apps\/76\" target=\"_blank\" rel=\"noopener noreferrer\">mash-all-vs-all-0.0.5u1<\/a><\/p>\n<p>\u00a0<\/p>\n<p>In the page app,\u00a0provide the input files using the cart. Choose the following parameters :<\/p>\n<ul>\n<li><strong>kmer size\u00a0:<\/strong>\u00a0by default set as 21bp<\/li>\n<li><strong>sketch size<\/strong> : by default set as 1000.<\/li>\n<\/ul>\n<p><em>Note : for more details on the app parameters, please read the 'Guidelines' section of this protocol.<\/em><\/p>\n<p>\u00a0<\/p>\n<p>\u00a0<video style=\"display: block; margin-left: auto; margin-right: auto;\" controls=\"controls\" width=\"300\" height=\"150\"><source type=\"video\/mp4\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/6xf2kge.mp4\" \/><\/video><\/p>\n<p>\u00a0<\/p>\n<p>After the job is effectively ran, you can access your results using the drop-down menu 'Tools' and selecting 'Jobs'. Select the job corresponding to your centrifuge run, and go to the section 'Outputs'.<\/p>\n<p>The\u00a0mash output files are now in your cyverse datastore. Click on 'Browse and view output files in the CyVerse Datastore'.<\/p>\n<p>\u00a0<\/p>\n<p>\u00a0<video style=\"display: block; margin-left: auto; margin-right: auto;\" controls=\"controls\" width=\"300\" height=\"150\"><source type=\"video\/mp4\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/6yt2kge.mp4\" \/><\/video><\/p>\n<p>\u00a0<\/p>\n<p>In the job folder created in the CyVerse datastore, the input fasta\/fastq files are copied, along with the logs of the job (*.err and *.out). In order to retrieve your results go to the mash-out folder. It contains two folders :\u00a0<\/p>\n<p>\u00a0<\/p>\n<ul>\n<li><strong><em>sketches<\/em><\/strong><br \/>This folder contains the mash sketches index for the input files. These files have a *.msh extension.<br \/><br \/><\/li>\n<li><strong><em>figures<\/em><\/strong><br \/>This folder contains the MASH final outputs.\u00a0<br \/>\n<ul>\n<li><strong>distance.txt<\/strong><br \/>This txt file contains the standard matrix output of MASH. This matrix contains the all versus all distance computation of MASH in a tabular table.<\/li>\n<\/ul>\n<\/li>\n<li>In addition to this standard output, the iMicrobe app offers the user with some quick vizualization of their data:\n<ul>\n<li><strong>dendrogram.png<\/strong><br \/>This data vizualization uses the hclust R function and a ward clustering method.<\/li>\n<li><strong>dendrogram_fan.png<\/strong><br \/>Fan dendrogram of a Newick tree.<\/li>\n<li><strong>heatmap.png<\/strong><br \/>Heatmap of the distance matrix. No clustering method is applied. The scale range from 0 (white) to 1 (dark blue).<\/li>\n<li><strong>pcoa.pdf<\/strong><br \/>PCOA applied on the dataset.<\/li>\n<li><strong>tree.newick<br \/><\/strong>Newick tree used for the dendrogram_fan vizualization.<\/li>\n<\/ul>\n<\/li>\n<\/ul>"},"is_project":0},{"component_id":"1192926","previous_id":"1191538","original_id":"0","guid":"E725BB5A86FC4F499A0FD278084FD4E3","previous_guid":"FF6983DD01EC4BE58B0C3D8D092CD69E","component_type_id":"17","data_id":"1828","data":"<p><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/6yv2kge.png\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/6yu2kge.png\" data-ofn=\"mash_res.png\" \/><\/p>","order_id":"2","name":"Expected result","data_by_id":"1","type_id":"17","source_data":{"result":"<p><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/6yv2kge.png\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/6yu2kge.png\" data-ofn=\"mash_res.png\" \/><\/p>"},"is_project":0}]}]}