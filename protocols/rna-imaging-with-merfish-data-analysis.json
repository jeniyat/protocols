{"uri":"rna-imaging-with-merfish-data-analysis-metc3en","version_id":"0","protocol_name":"RNA Imaging with MERFISH - Data Analysis","protocol_name_html":"RNA Imaging with MERFISH - Data Analysis","is_prepublished":"0","can_edit":"0","parent_id":null,"api_version":"1","is_new_mode":"0","last_modified":"1522317320","type_id":"1","link":"https:\/\/www.ncbi.nlm.nih.gov\/pubmed\/27241748","fork_id":"","public_fork_note":"","number_of_steps":"15","has_versions":"0","first_published_date":"1522317320","publish_date":"2018-03-29 09:55:20","documents":"[{\"url\":\"https:\/\/s3.amazonaws.com\/pr-journal\/rv9fw26.pdf\",\"file_id\":\"15999\",\"thumb_url\":\"\/img\/extensions\/pdf.png\",\"ofn\":\"merFISH.pdf\"}]","have_protocol_in_step":"0","is_protocol_in_step":"0","vendor_name":"Contributed by users","vendor_link":"https:\/\/www.protocols.io","vendor_logo":"\/img\/vendors\/1.png","mod_mins":"-45","mod_secs":"1","description":"<p>The basic decoding of MERFISH data\u2014the identification of specific RNA species for each spot in the sample\u2014consists of three basic steps. First, fluorescent spots must be identified in all images. Second, slight changes in the stage position between images of the same region from different hybridization rounds must be corrected. Finally, sets of fluorescent spots that occupy the same location in the sample must be decoded into binary barcodes, which, in turn, are decoded into the specific RNA species. After these RNAs have been decoded, there are a series of simple calculations that can often be performed on the measured barcodes to determine important parameters associated with the performance of the measurements, such as estimates of the binary errors made at each bit or the relative confidence that can be ascribed to the counts for each RNA species. In this section, we provide protocols for performing these basic computational tasks. Example software and data can be found at:<\/p>\n<p>\u00a0<a href=\"http:\/\/zhuang.harvard.edu\/merfish\/ \" target=\"_blank\">http:\/\/zhuang.harvard.edu\/merfish\/<\/a>.<\/p>","is_bookmarked":"0","can_reassign":"1","before_start":null,"has_guidelines":"1","materials":[],"warning":null,"version_class":"9395","public":"1","is_owner":"1","is_original_owner":"1","created_on":"1514462900","protocol_affiliation":"Harvard University, Cambridge, Massachusetts, 02138 USA","affiliation":null,"doi":"dx.doi.org\/10.17504\/protocols.io.metc3en","doi_status":"2","changed_fork_steps":null,"profile_url":"y2v274y2s2","protocol_img":"https:\/\/s3.amazonaws.com\/pr-journal\/rv8fw26.png","profile_image":"\/img\/avatars\/011.png","full_name":"Max Brown","created_by":"Max Brown","private_link":"B25DF52E400CE6E37DD8EB5A9E74C5E5","original_img":"1","username":"max-brown","is_retracted":"0","retraction_reason":null,"plos_id":null,"manuscript_citation":"<p><strong>Jeffrey R. Moffitt, Xiaowei Zhuang.\u00a0<\/strong>RNA Imaging with Multiplexed Error Robust Fluorescence in situ Hybridization.<strong>\u00a0<\/strong><em>Methods Enzymol<\/em>. 2016; 572: 1\u201349.\u00a0doi:\u00a0<a href=\"https:\/\/www.ncbi.nlm.nih.gov\/pubmed\/27241748\" target=\"_blank\">10.1016\/bs.mie.2016.03.020<\/a><\/p>","journal_name":null,"is_donations_disabled":"0","is_donations_disabled_by_user":"9","item_record_id":0,"fork_info":[],"compare_forks":[],"protocols":[],"groups":[{"group_id":"523","group_uri":"hca","group_name":"Human Cell Atlas Method Development Community","group_logo":"https:\/\/s3.amazonaws.com\/pr-journal\/psucz36.png","requested_uid":null,"request_flag":null,"my_request":"1"}],"number_of_shared_runs":[],"ownership_history":[{"created_on":"2017-12-28 12:08:20","change_time":"2017-12-28 12:08:20","username":"anita-brllochs","full_name":"Anita Br\u00f6llochs","profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/p28fw26.png","affiliation":"Friedrich-Alexander-Universit\u00e4t in Erlangen, Germany"},{"created_on":"2018-03-22 22:26:51","change_time":"2018-03-22 22:26:51","username":"max-brown","profile_image":"\/img\/avatars\/011.png","full_name":"Max Brown","affiliation":null}],"keywords":"In situ hybridization, RNA, Single cells, Single molecules, Single-molecule imaging, Transcriptomics","transfer_to_user":{"username":"jonah-cool","first_name":"Jonah","last_name":"Cool","full_name":null,"profile_url":"y2v27423q2","profile_image":"\/img\/avatars\/010.png","email":"jcool@chanzuckerberg.com","is_target_user":"0","transfer_id":"522629"},"sub_transfer":false,"is_transfer_pending":true,"number_of_bookmarks":"0","collections":[{"protocol_name":"RNA Imaging with Multiplexed Error Robust Fluorescence in situ Hybridization","protocol_name_html":"RNA Imaging with Multiplexed Error Robust Fluorescence in situ Hybridization","uri":"rna-imaging-with-multiplexed-error-robust-fluoresc-mepc3dn","username":"max-brown","profile_image":"\/img\/avatars\/011.png","protocol_img":"https:\/\/s3.amazonaws.com\/pr-journal\/ruhfw26.png","full_name":"Max Brown"}],"tags":[],"archived":0,"sub_authors":[],"sub_protocols_number":0,"can_edit_shared":0,"shared_runs":[],"is_shared_run":0,"is_shared":1,"banner":null,"contact_badges":[{"badge_id":"4","badge_image":"\/img\/badges\/gold.svg","badge_description":"Gold power author!"},{"badge_id":"5","badge_image":"\/img\/badges\/earlyadopter.svg","badge_description":"Early adopter"},{"badge_id":"6","badge_image":"\/img\/badges\/socialbutterfly.svg","badge_description":"Social butterfly"}],"number_of_comments":0,"big_protocol_img":"https:\/\/s3.amazonaws.com\/pr-journal\/rv7fw26.png","big_protocol_img_ofn":"ruffw26.png","is_locked":0,"is_locked_by":false,"authors":"Jeffrey R. Moffitt,Xiaowei Zhuang","authors_list":[{"name":"Jeffrey R. Moffitt","affiliation":"Harvard University, Cambridge, Massachusetts, 02138 USA","username":null,"profile_image":null},{"name":"Xiaowei Zhuang","affiliation":"Harvard University, Cambridge, Massachusetts, 02138 USA","username":null,"profile_image":null}],"user":{"profile_image":"\/img\/avatars\/011.png","username":"max-brown","full_name":"Max Brown","created_by":"Max Brown"},"access":{"can_view":null,"can_remove":null,"can_add":null,"can_edit":0,"can_publish":0,"can_get_doi":0,"can_share":null,"can_move":null,"can_transfer":null,"can_download":null,"is_locked":null},"is_contact_suspended":0,"guidelines":"<p style=\"text-align: justify;\"><strong>Identification of Fluorescent Spots<\/strong><\/p>\n<p style=\"text-align: justify;\">\u00a0<\/p>\n<p style=\"text-align: justify;\">There are a variety of software packages and approaches to identifying the location and brightness of fluorescent spots in images. In principle, any of these approaches should work reasonably well for this initial stage of the analysis of MERFISH data. However, some of the more advanced algorithms for the identification of fluorescent spots have been developed in the context of localization-based super-resolution microscopy. In these measurements, there is a desire to be able to properly localize molecules that are close enough together that their fluorescent spots partially overlap. Depending on the local density of RNAs within the cell, the signal from different RNAs does occasionally overlap, necessitating the use of these more advanced spot finders. The algorithm we use\u20143D-daoSTORM\u2014was developed in our laboratory (Babcock et al., 2012) and is an extension of the daoPHOT algorithm original developed for the analysis of astronomy data (Holden et al., 2011). 3D-daoSTORM is open source and can be found with documentation here:<\/p>\n<p style=\"text-align: justify;\"><a href=\"https:\/\/github.com\/ZhuangLab\/stormanalysis\" target=\"_blank\">https:\/\/github.com\/ZhuangLab\/stormanalysis<\/a>.<\/p>\n<p style=\"text-align: justify;\">In this Section, we describe the basic steps for the use of this software for finding fluorescent spots in MERFISH data.<\/p>\n<p style=\"text-align: justify;\">\u00a0<\/p>\n<p style=\"text-align: justify;\">\u00a0<\/p>\n<p style=\"text-align: justify;\"><strong>Correction of Image Offsets<\/strong><\/p>\n<p style=\"text-align: justify;\">\u00a0<\/p>\n<p style=\"text-align: justify;\">Every time the microscopy stage returns to a given location there will be a slight offset, often no more than a single pixel or two. Nonetheless, this small offset can significantly degrade the ability to align fluorescent spots within images of the same sample stained with different readout probes. For this reason, in each round of hybridization, we collect an image of small fluorescent beads stuck to the surface of the sample. Because the location of these beads are fixed with respect to the sample, apparent differences between the position of these beads between different rounds of hybridization can be used to correct these small stage offsets. We perform this correction by using the positions of these beads to create affine transformations that map the position of each spot in each round of hybridization back to the coordinate system defined by the image collected in the first round of hybridization.<\/p>\n<p style=\"text-align: justify;\">\u00a0<\/p>\n<p style=\"text-align: justify;\">\u00a0<\/p>\n<p style=\"text-align: justify;\"><strong>Decoding Barcodes<\/strong><\/p>\n<p style=\"text-align: justify;\">\u00a0<\/p>\n<p style=\"text-align: justify;\">Once all spots have been transformed to the same coordinate system, spots in different rounds of hybridization that occupy the same or similar physical locations within the sample should be associated to create the specific binary barcode associated with the putative RNA at that location in the cell. We have explored several different approaches to performing this association. Here we present the algorithm that has performed best in our hands. One advantage of this algorithm is that it requires only one parameter: the maximum distance between spots in different rounds of hybridization. Figure 3A\u2013C illustrates the decoding of an example MERFISH data set.<\/p>\n<p style=\"text-align: justify;\">\u00a0<\/p>\n<p style=\"text-align: center;\"><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/rxbfw26.png\" width=\"581\" height=\"326\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/rxafw26.png\" data-ofn=\"Screen Shot 2017-12-29 at 5.49.59 PM.png\" \/><\/p>\n<p style=\"text-align: justify;\">\u00a0<\/p>\n<p style=\"text-align: justify;\">\u00a0<\/p>\n<p style=\"text-align: justify;\"><strong>Calculate MERFISH Performance<\/strong><\/p>\n<p style=\"text-align: justify;\">\u00a0<\/p>\n<p style=\"text-align: justify;\">The basic performance of a MERFISH measurement can be quickly assessed from several quantities that can be calculated from the barcodes decoded in the Decoding Barcodes Section. Here we describe the calculation of these quantities and their interpretation.<\/p>\n<p style=\"text-align: justify;\">\u00a0<\/p>\n<p style=\"text-align: justify;\"><strong>The Per-Bit Error Rate<\/strong>\u2014If the encoding scheme has the capacity to correct errors, then it will also have the ability to determine the bit at which the corrected errors occurred. Using this ability, it is possible to compute the average `1'\u2794`0' or `0'\u2794`1' error rates associated with each round of hybridization. These quantities can be very useful in diagnosing the performance of a MERFISH run. For example, a high `1'\u2794`0' error rate for one round of hybridization may indicate poor staining in that round or perhaps an inappropriately high threshold for spot fitting. Alternatively, a high `0'\u2794`1' error rate may suggest that the spot fitting threshold is too low for that round of hybridization. To calculate this quantity, compute the number of times each RNA species was measured correctly N<sub>C\u00a0<\/sub>and the number of times it was measured with a word that contains a single-bit error at each possible position N<span style=\"font-size: 10.8333px;\">i<\/span>. Figure 5A illustrates these counts for two example barcodes. These two quantities can then be used to estimate the probability of flipping the ith bit via N<sub>i<\/sub>\/(N<sub>i<\/sub> + N<sub>C<\/sub>). (See the Materials and Methods of Chen et al. for a derivation of this expression.) Once the probability of flipping each bit is calculated for each RNA, an estimate of the bit flipping probability for each round is calculated from the average across all genes. See Figure 5B for an example of these per-bit error rates.<\/p>\n<p style=\"text-align: justify;\">\u00a0<\/p>\n<p style=\"text-align: center;\"><img id=\"s-mce-img\" class=\"s-mce-img\" src=\"https:\/\/s3.amazonaws.com\/pr-journal\/rw9fw26.png\" width=\"511\" height=\"335\" data-src=\"https:\/\/s3.amazonaws.com\/pr-journal\/rw8fw26.png\" data-ofn=\"Screen Shot 2017-12-29 at 5.41.19 PM.png\" \/><\/p>\n<p style=\"text-align: justify;\">\u00a0<\/p>\n<p style=\"text-align: justify;\"><strong>Background Counts and the Confidence Ratio<\/strong>\u2014We recommend leaving a few percent of the possible barcodes unassigned. Measurements of these `blank' or `control' barcodes can then serve as a simple measure of the background count rate in MERFISH and can be used to assign a qualitative degree of confidence to the observed counts for different RNAs.<\/p>\n<p style=\"text-align: justify;\">\u00a0<\/p>\n<p style=\"text-align: justify;\">Perhaps the most obvious use of these `blank' barcodes is to set a lower limit on the number of counts that can be trusted. For example, if an RNA-encoding barcode is counted fewer times than a `blank' barcode, then it might be reasonable to assume that the counts for this RNA are dominated by background counts and should not be trusted. However, this use of the `blank' barcodes provides an overly cautious measure of the rate of background counts because it does not properly take into consideration the way in which different binary barcodes are related to one another. For example, imagine that one `blank' word is counted more frequently than a barcode representing a low abundance RNA. If these two barcodes are separated by a large HD, i.e. these barcodes have very few `1' bits in common, then it is possible that the errors that produced observations of this `blank' barcode may not be relevant for the measurement of the barcode associated with the low abundance RNA.<\/p>\n<p style=\"text-align: justify;\">\u00a0<\/p>\n<p style=\"text-align: justify;\">To partially capture the relationship between different barcodes and improve estimates of the accuracy of different barcode measurements, we have developed a metric that we term the confidence ratio. This ratio is defined as the number of measured binary barcodes that exactly match the binary barcode for a given RNA over the sum of this number and the number of counts for all binary words that differ from this barcode in only one bit, i.e. the ratio of the blue bars to the sum of the blue bar and all red bars in Figure 5A. For an errorcorrecting encoding scheme, this quantity is simply the ratio of the number of times an RNA was observed without the application of error correction to the number that was observed with error correction applied. However, error-correction is not required to compute the confidence ratio. All that is required is that all barcodes are separated by at least a HD of 2.<\/p>\n<p style=\"text-align: justify;\">\u00a0<\/p>\n<p style=\"text-align: justify;\">To illustrate the usefulness of this ratio, consider the following scenario. Imagine that one specific hybridization round is particularly problematic, and the `1'\u2794 `0' error rate for that round is higher than others. (As Figure 5B illustrates, there can be variation between errors rates in different rounds of hybridization). Then RNAs encoded with binary barcodes that contain a `1' in that bit will tend to have more single-bit errors. This will decrease the confidence ratio for these words by generating a larger proportion of counts for these singlebit errors. However, RNAs encoded with binary words that do not contain a `1' in that bit will not see an increase in the number of single-bit errors in this round, and the confidence ratio for these RNAs will not be lowered.<\/p>\n<p style=\"text-align: justify;\">\u00a0<\/p>\n<p style=\"text-align: justify;\">Finally, a word of caution: the confidence ratio does not imply a quantitative level of confidence in the counts for a RNA. For example, a ratio of 0.3 does not imply that 30% of the measured counts are correct. The proper interpretation of this ratio is more qualitative: one should trust the counts for a RNA with a confidence ratio of 0.5 more than those for a value of 0.3. To provide a heuristic cut-off on the confidence ratio, we use the measured confidence ratios for the `blank' barcodes. If an RNA-encoding barcode has a confidence ratio larger than the largest confidence ratio observed for the `blank' barcodes then we generally trust the counts associated with this RNA. See Figure 5C. Of course, this cut-off is still somewhat arbitrary, and we only recommend using it as a rule of thumb. The confidence ratio is one of the simplest quantities one could compute in an effort to exploit the natural geometric connectivity of the different measured binary barcodes. In the future, we expect that more complicated calculations could be performed to exploit this connectivity and further improve both the accuracy of the measured counts with MERFISH and our metrics of the performance of a given measurement.<\/p>\n<p style=\"text-align: justify;\">\u00a0<\/p>\n<p style=\"text-align: justify;\">\u00a0<\/p>\n<p style=\"text-align: justify;\"><strong>(Optional) Iterative Identification of Optimal Thresholds<\/strong><\/p>\n<p style=\"text-align: justify;\">\u00a0<\/p>\n<p style=\"text-align: justify;\">As discussed in the Section of Identification of Fluorescent Spots, we observe that different rounds of hybridization produce somewhat different levels of background and spot brightness. Thus, it is typically advisable to tune the spot-finding threshold for each round of hybridization. To further improve this process, it is possible to automate this threshold search by using some of the performance metrics discussed in the Section of Calculate MERFISH Performance to determine the optimal threshold for each hybridization round.<\/p>","status_id":"1","is_research":"1","status_info":"We use this protocol in our group and it is working","steps":[{"id":"600888","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"30ED25E2119F426588D46C5CD986223A","previous_guid":null,"previous_id":"0","last_modified":"1514468547","components":[{"component_id":"1037417","previous_id":0,"original_id":"0","guid":"1951F772E2264B17AAEAE8FB3BBB1B37","previous_guid":null,"component_type_id":"6","data_id":"0","data":"Identification of Fluorescent Spots","order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Identification of Fluorescent Spots"},"is_project":0},{"component_id":"1037416","previous_id":"1037417","original_id":"0","guid":"6ACDF8B4A9D24534866F6DCCB509A633","previous_guid":"1951F772E2264B17AAEAE8FB3BBB1B37","component_type_id":"1","data_id":null,"data":"<p>Data conversion. The first challenge associated with any analysis software will be to insure that the image data is in an appropriate format. Our data is typically stored in a custom file format. While conversion to this format is possible, we instead recommend converting data to the more commonly used tif format, which the 3D daoSTORM algorithm can process. Many microscopes can already save images as tif format, so conversion may not be necessary.<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Data conversion. The first challenge associated with any analysis software will be to insure that the image data is in an appropriate format. Our data is typically stored in a custom file format. While conversion to this format is possible, we instead recommend converting data to the more commonly used tif format, which the 3D daoSTORM algorithm can process. Many microscopes can already save images as tif format, so conversion may not be necessary.<\/p>"},"is_project":0}]},{"id":"600889","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"17000F2EEE0147F693F2D4E69790060F","previous_guid":"30ED25E2119F426588D46C5CD986223A","previous_id":"600888","last_modified":"1514463342","components":[{"component_id":"1037419","previous_id":0,"original_id":"0","guid":"DB87933E9E3D43F5BB9CC1940B70AAA8","previous_guid":null,"component_type_id":"6","data_id":"0","data":"Identification of Fluorescent Spots","order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Identification of Fluorescent Spots"},"is_project":0},{"component_id":"1037418","previous_id":"1037419","original_id":"0","guid":"E9538F13C6CF4CC18DFC4291C434AD63","previous_guid":"DB87933E9E3D43F5BB9CC1940B70AAA8","component_type_id":"1","data_id":null,"data":"<p>Determine the appropriate intensity threshold for spot finding. The daoSTORM algorithm requires that a threshold be selected to determine whether a spot is bright enough to fit or not. It is useful to first run spot finding software for a range of thresholds to determine which value performs the best at discriminating between bright spots and low intensity spots, which are likely due to off-target binding of encoding or readout probes. The brightness of spots can differ between different hybridization rounds, so it is often worthwhile to explore different thresholds for different readout probes.\u00a0<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Determine the appropriate intensity threshold for spot finding. The daoSTORM algorithm requires that a threshold be selected to determine whether a spot is bright enough to fit or not. It is useful to first run spot finding software for a range of thresholds to determine which value performs the best at discriminating between bright spots and low intensity spots, which are likely due to off-target binding of encoding or readout probes. The brightness of spots can differ between different hybridization rounds, so it is often worthwhile to explore different thresholds for different readout probes.\u00a0<\/p>"},"is_project":0},{"component_id":"1037422","previous_id":"1037418","original_id":"0","guid":"FE1247EC32B6420C9A580873C0A1A368","previous_guid":"E9538F13C6CF4CC18DFC4291C434AD63","component_type_id":"26","data_id":"17060","data":"","order_id":"2","name":"Note","data_by_id":"1","type_id":"26","source_data":{"annotation_id":"17060","thread_id":"17060","id":"17060","thread_title":"Comment on step 2 of RNA Imaging with MERFISH - Data Analysis","uri":"comment-on-step-2-of-rna-imaging-with-merfish-data","thread_uri":"comment-on-step-2-of-rna-imaging-with-merfish-data","step_id":"600889","protocol_uri":"rna-imaging-with-merfish-data-analysis-metc3en","protocol_name":"RNA Imaging with MERFISH - Data Analysis","protocol_name_html":"RNA Imaging with MERFISH - Data Analysis","annotation":"<p>In practice, it may be difficult to determine the optimal threshold for discriminating background spots and spots that correspond to RNAs by simple visual inspection. Thus, we recommend analyzing data with a range of thresholds and using an iterative approach to select the threshold that produces the best decoding of MERFISH data. This process is discussed in detail in Section Iterative Identification of Optimal Thresholds.<\/p>","thread_text":"<p>In practice, it may be difficult to determine the optimal threshold for discriminating background spots and spots that correspond to RNAs by simple visual inspection. Thus, we recommend analyzing data with a range of thresholds and using an iterative approach to select the threshold that produces the best decoding of MERFISH data. This process is discussed in detail in Section Iterative Identification of Optimal Thresholds.<\/p>","body":"<p>In practice, it may be difficult to determine the optimal threshold for discriminating background spots and spots that correspond to RNAs by simple visual inspection. Thus, we recommend analyzing data with a range of thresholds and using an iterative approach to select the threshold that produces the best decoding of MERFISH data. This process is discussed in detail in Section Iterative Identification of Optimal Thresholds.<\/p>","is_private":"0","public_protocol":"1","can_edit":0,"can_delete":"0","show_name":"0","created_date":"1514463341","created_on":"1514463341","modified_on":"1521830162","last_updated":"1521830162","profile_image":"\/img\/avatars\/011.png","full_name":"Max Brown","affiliation":null,"username":"max-brown","email":"mbrown@chanzuckerberg.com","pa_useranme":"max-brown","comments":[]},"is_project":0}]},{"id":"600890","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"96CBCCFB187C424A92C1DA049084A3E2","previous_guid":"17000F2EEE0147F693F2D4E69790060F","previous_id":"600889","last_modified":"1514463370","components":[{"component_id":"1037421","previous_id":0,"original_id":"0","guid":"63EFF10476A148DDA3A9DBB64384F0AB","previous_guid":null,"component_type_id":"6","data_id":"0","data":"Identification of Fluorescent Spots","order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Identification of Fluorescent Spots"},"is_project":0},{"component_id":"1037420","previous_id":"1037421","original_id":"0","guid":"63BEBA5F82284E3AABB9534713E63361","previous_guid":"63EFF10476A148DDA3A9DBB64384F0AB","component_type_id":"1","data_id":null,"data":"<p>Batch analyze the data. Once an appropriate threshold has been selected, use this software to identify the location of potential molecules in both the smFISH images and the images of fiducial beads.<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Batch analyze the data. Once an appropriate threshold has been selected, use this software to identify the location of potential molecules in both the smFISH images and the images of fiducial beads.<\/p>"},"is_project":0}]},{"id":"600891","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"63504C1A83EA4BF4BA001765A5320EC4","previous_guid":"96CBCCFB187C424A92C1DA049084A3E2","previous_id":"600890","last_modified":"1514463469","components":[{"component_id":"1037424","previous_id":0,"original_id":"0","guid":"71688B3CBCF546E5AD8EFA9E88A0E5CA","previous_guid":null,"component_type_id":"6","data_id":"0","data":"Correction of Image Offsets","order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Correction of Image Offsets"},"is_project":0},{"component_id":"1037423","previous_id":"1037424","original_id":"0","guid":"57FA2B7ECEDC40C28101B5BCECF0BD73","previous_guid":"71688B3CBCF546E5AD8EFA9E88A0E5CA","component_type_id":"1","data_id":null,"data":"<p>Find fiducial bead centroids. We utilize the same spot fitting approach described in the Section of Identification of Fluorescent Spots to determine the location of the fiducial beads in the images of these beads corresponding to each round of hybridization.<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Find fiducial bead centroids. We utilize the same spot fitting approach described in the Section of Identification of Fluorescent Spots to determine the location of the fiducial beads in the images of these beads corresponding to each round of hybridization.<\/p>"},"is_project":0}]},{"id":"600892","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"72BEEB19538A4704BC7FCD69F4BFB4B5","previous_guid":"63504C1A83EA4BF4BA001765A5320EC4","previous_id":"600891","last_modified":"1514463526","components":[{"component_id":"1037426","previous_id":0,"original_id":"0","guid":"61E61F58F4964933BE7B6D28A2020095","previous_guid":null,"component_type_id":"6","data_id":"0","data":"Correction of Image Offsets","order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Correction of Image Offsets"},"is_project":0},{"component_id":"1037425","previous_id":"1037426","original_id":"0","guid":"FAD4F4AE3E684320A870280B8AA138A5","previous_guid":"61E61F58F4964933BE7B6D28A2020095","component_type_id":"1","data_id":null,"data":"<p>Create the affine transformations. For each field of view, load the locations of the fiducial beads in each round of hybridization. To use these beads as control points in the construction of affine transformation, each bead in one image must be associated with beads in another image. This can be accomplished by associating each bead with its nearest neighbor in the other image. However, this simple approach will fail if the offset between images is substantially larger than the average distance between beads within a single field of view since the nearest neighbor between images would likely correspond to a different bead. In this case, an initial crude offset can be found by using image cross correlation either with the original bead images or with a lower resolution image created from the 2D histogram of the bead positions. This crude offset can be used to correct the positions of these beads to sufficient accuracy to allow simple association of nearest neighbors, which then allows the construction of the final affine transformation. Using this approach, we can re-register different frames with a residual error of roughly 20 nm, much better than a single pixel.<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Create the affine transformations. For each field of view, load the locations of the fiducial beads in each round of hybridization. To use these beads as control points in the construction of affine transformation, each bead in one image must be associated with beads in another image. This can be accomplished by associating each bead with its nearest neighbor in the other image. However, this simple approach will fail if the offset between images is substantially larger than the average distance between beads within a single field of view since the nearest neighbor between images would likely correspond to a different bead. In this case, an initial crude offset can be found by using image cross correlation either with the original bead images or with a lower resolution image created from the 2D histogram of the bead positions. This crude offset can be used to correct the positions of these beads to sufficient accuracy to allow simple association of nearest neighbors, which then allows the construction of the final affine transformation. Using this approach, we can re-register different frames with a residual error of roughly 20 nm, much better than a single pixel.<\/p>"},"is_project":0}]},{"id":"600893","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"FD101AF0710B4B559E4E974C6AB24203","previous_guid":"72BEEB19538A4704BC7FCD69F4BFB4B5","previous_id":"600892","last_modified":"1514463545","components":[{"component_id":"1037428","previous_id":0,"original_id":"0","guid":"3B455FDA7A3848E2AD509E355CDA7512","previous_guid":null,"component_type_id":"6","data_id":"0","data":"Correction of Image Offsets","order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Correction of Image Offsets"},"is_project":0},{"component_id":"1037427","previous_id":"1037428","original_id":"0","guid":"F9B498F1589F40C9885E369AF08E9B58","previous_guid":"3B455FDA7A3848E2AD509E355CDA7512","component_type_id":"1","data_id":null,"data":"<p>Correct the location of fluorescent spots. Once the affine transformations are calculated, apply these transformations to the locations of all found fluorescent spots in each smFISH image and save the revised locations.<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Correct the location of fluorescent spots. Once the affine transformations are calculated, apply these transformations to the locations of all found fluorescent spots in each smFISH image and save the revised locations.<\/p>"},"is_project":0}]},{"id":"600894","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"793B56FD1B3547A7830657971F7A0B57","previous_guid":"FD101AF0710B4B559E4E974C6AB24203","previous_id":"600893","last_modified":"1514463645","components":[{"component_id":"1037430","previous_id":0,"original_id":"0","guid":"D8F6B87198AE4A2DA131D0D152448827","previous_guid":null,"component_type_id":"6","data_id":"0","data":"Decoding Barcodes","order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Decoding Barcodes"},"is_project":0},{"component_id":"1037429","previous_id":"1037430","original_id":"0","guid":"54A119E0F87248EBAA0186C6511A265C","previous_guid":"D8F6B87198AE4A2DA131D0D152448827","component_type_id":"1","data_id":null,"data":"<p>Create a list of all found spots. For a single field of view, create a list of the location of all spots in all rounds of hybridization. This algorithm will create an N -bit binary barcode for each of these spots.<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Create a list of all found spots. For a single field of view, create a list of the location of all spots in all rounds of hybridization. This algorithm will create an N -bit binary barcode for each of these spots.<\/p>"},"is_project":0}]},{"id":"600895","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"D06BAE0F057A42E9AEEFBDF4B2A960B8","previous_guid":"793B56FD1B3547A7830657971F7A0B57","previous_id":"600894","last_modified":"1514463802","components":[{"component_id":"1037432","previous_id":0,"original_id":"0","guid":"80B1A5D323C74B499A5721B8E5E81B08","previous_guid":null,"component_type_id":"6","data_id":"0","data":"Decoding Barcodes","order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Decoding Barcodes"},"is_project":0},{"component_id":"1037431","previous_id":"1037432","original_id":"0","guid":"0F13486DE05F468CB954AE9ABD7474DE","previous_guid":"80B1A5D323C74B499A5721B8E5E81B08","component_type_id":"1","data_id":null,"data":"<p>Construct a barcode for each found spot. For each spot in the list created in Step 7, compute the distance to the nearest spot in each round of hybridization. This will create a vector of N distances. To convert this vector into a binary barcode, compare the ith distance to the maximum allowed distance (a parameter of this algorithm). If this distance is less than or equal to this maximum distance, assign a `1' to the ith bit of the barcode for this spot. Otherwise, assign a `0' to that bit.\u00a0<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Construct a barcode for each found spot. For each spot in the list created in Step 7, compute the distance to the nearest spot in each round of hybridization. This will create a vector of N distances. To convert this vector into a binary barcode, compare the ith distance to the maximum allowed distance (a parameter of this algorithm). If this distance is less than or equal to this maximum distance, assign a `1' to the ith bit of the barcode for this spot. Otherwise, assign a `0' to that bit.\u00a0<\/p>"},"is_project":0},{"component_id":"1037433","previous_id":"1037431","original_id":"0","guid":"2AF38AFEAF29423CA22C86B83F2B314D","previous_guid":"0F13486DE05F468CB954AE9ABD7474DE","component_type_id":"26","data_id":"17061","data":"","order_id":"2","name":"Note","data_by_id":"1","type_id":"26","source_data":{"annotation_id":"17061","thread_id":"17061","id":"17061","thread_title":"Comment on step 8 of RNA Imaging with MERFISH - Data Analysis","uri":"comment-on-step-8-of-rna-imaging-with-merfish-data","thread_uri":"comment-on-step-8-of-rna-imaging-with-merfish-data","step_id":"600895","protocol_uri":"rna-imaging-with-merfish-data-analysis-metc3en","protocol_name":"RNA Imaging with MERFISH - Data Analysis","protocol_name_html":"RNA Imaging with MERFISH - Data Analysis","annotation":"<p>We use a maximum distance of 160 nm, i.e. one camera pixel. Practically, we found that a smaller maximum distance between spots tends to discard more real barcodes than false barcodes, despite the fact that we can resolve the centroid of each RNA spot to better than 160 nm. This observation may be due to the fact that the position of the centroid for the observed spot for a single RNA varies on average by ~100 nm between different rounds of hybridization\u2014an effect that may be due to the finite cellular volume occupied by each RNA.<\/p>","thread_text":"<p>We use a maximum distance of 160 nm, i.e. one camera pixel. Practically, we found that a smaller maximum distance between spots tends to discard more real barcodes than false barcodes, despite the fact that we can resolve the centroid of each RNA spot to better than 160 nm. This observation may be due to the fact that the position of the centroid for the observed spot for a single RNA varies on average by ~100 nm between different rounds of hybridization\u2014an effect that may be due to the finite cellular volume occupied by each RNA.<\/p>","body":"<p>We use a maximum distance of 160 nm, i.e. one camera pixel. Practically, we found that a smaller maximum distance between spots tends to discard more real barcodes than false barcodes, despite the fact that we can resolve the centroid of each RNA spot to better than 160 nm. This observation may be due to the fact that the position of the centroid for the observed spot for a single RNA varies on average by ~100 nm between different rounds of hybridization\u2014an effect that may be due to the finite cellular volume occupied by each RNA.<\/p>","is_private":"0","public_protocol":"1","can_edit":0,"can_delete":"0","show_name":"0","created_date":"1514463801","created_on":"1514463801","modified_on":"1521830162","last_updated":"1521830162","profile_image":"\/img\/avatars\/011.png","full_name":"Max Brown","affiliation":null,"username":"max-brown","email":"mbrown@chanzuckerberg.com","pa_useranme":"max-brown","comments":[]},"is_project":0}]},{"id":"600896","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"7FB32A697604473BB41BF6C3C6F96F06","previous_guid":"D06BAE0F057A42E9AEEFBDF4B2A960B8","previous_id":"600895","last_modified":"1514463866","components":[{"component_id":"1037435","previous_id":0,"original_id":"0","guid":"9BA330A825864EFE85C7B4B204AF6D8C","previous_guid":null,"component_type_id":"6","data_id":"0","data":"Decoding Barcodes","order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Decoding Barcodes"},"is_project":0},{"component_id":"1037434","previous_id":"1037435","original_id":"0","guid":"23CDB31E110E4A43B7D52F9DE8B34FAD","previous_guid":"9BA330A825864EFE85C7B4B204AF6D8C","component_type_id":"1","data_id":null,"data":"<p>Remove redundant barcodes. This algorithm creates a barcode for all spots in all rounds of hybridization, ignoring the fact that spots in different rounds will be combined to form individual barcodes. Thus, each barcode may be replicated in the results returned by Step 8. Redundant barcodes will share the same set of spots, and, thus, the average centroid of the spots that form a barcode will be unique for each barcode. Thus, to remove these redundant barcodes, we compute the average centroid of all spots that comprise each barcode and remove extra copies of barcodes that share the same centroid.\u00a0<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Remove redundant barcodes. This algorithm creates a barcode for all spots in all rounds of hybridization, ignoring the fact that spots in different rounds will be combined to form individual barcodes. Thus, each barcode may be replicated in the results returned by Step 8. Redundant barcodes will share the same set of spots, and, thus, the average centroid of the spots that form a barcode will be unique for each barcode. Thus, to remove these redundant barcodes, we compute the average centroid of all spots that comprise each barcode and remove extra copies of barcodes that share the same centroid.\u00a0<\/p>"},"is_project":0},{"component_id":"1037436","previous_id":"1037434","original_id":"0","guid":"19A2A4C6FB434962A7EF06345342FBA9","previous_guid":"23CDB31E110E4A43B7D52F9DE8B34FAD","component_type_id":"26","data_id":"17062","data":"","order_id":"2","name":"Note","data_by_id":"1","type_id":"26","source_data":{"annotation_id":"17062","thread_id":"17062","id":"17062","thread_title":"Comment on step 9 of RNA Imaging with MERFISH - Data Analysis","uri":"comment-on-step-9-of-rna-imaging-with-merfish-data","thread_uri":"comment-on-step-9-of-rna-imaging-with-merfish-data","step_id":"600896","protocol_uri":"rna-imaging-with-merfish-data-analysis-metc3en","protocol_name":"RNA Imaging with MERFISH - Data Analysis","protocol_name_html":"RNA Imaging with MERFISH - Data Analysis","annotation":"<p>We perform this step because it is computationally faster to create redundant barcodes and then remove them in this fashion than to identify such barcodes as they are created.<\/p>","thread_text":"<p>We perform this step because it is computationally faster to create redundant barcodes and then remove them in this fashion than to identify such barcodes as they are created.<\/p>","body":"<p>We perform this step because it is computationally faster to create redundant barcodes and then remove them in this fashion than to identify such barcodes as they are created.<\/p>","is_private":"0","public_protocol":"1","can_edit":0,"can_delete":"0","show_name":"0","created_date":"1514463865","created_on":"1514463865","modified_on":"1521830162","last_updated":"1521830162","profile_image":"\/img\/avatars\/011.png","full_name":"Max Brown","affiliation":null,"username":"max-brown","email":"mbrown@chanzuckerberg.com","pa_useranme":"max-brown","comments":[]},"is_project":0}]},{"id":"600897","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"2494CF36C64D4D208D28046282C2991E","previous_guid":"7FB32A697604473BB41BF6C3C6F96F06","previous_id":"600896","last_modified":"1514464087","components":[{"component_id":"1037438","previous_id":0,"original_id":"0","guid":"15D49EDB751D480293A519B244E314C8","previous_guid":null,"component_type_id":"6","data_id":"0","data":"Decoding Barcodes","order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Decoding Barcodes"},"is_project":0},{"component_id":"1037437","previous_id":"1037438","original_id":"0","guid":"1102C3D8FC7D4F2E8803A7C1AAF80511","previous_guid":"15D49EDB751D480293A519B244E314C8","component_type_id":"1","data_id":null,"data":"<p>Associate each binary barcode with the RNA it encodes. Using the codebook designed in\u00a0 <a href=\"https:\/\/www.protocols.io\/view\/rna-imaging-with-merfish-design-of-oligonucleotide-menc3de\" target=\"_blank\">Design of the Codebook<\/a> create a look-up table that associates each encoded RNA with all binary barcodes that encode it. If the encoding scheme is not capable of error correction, then there will only be one binary barcode for each RNA. If, on the other hand, the encoding scheme allows error correction, then each RNA will have multiple binary barcodes that correspond to that word. For the purposes of calculating several properties associated with the basic performance of MERFISH, it is useful to create two look up tables: one that corresponds to the correct binary barcodes and one that corresponds to all binary barcodes that can be matched to an RNA after error correction. The use of two look up tables will allow each decoded RNA to be marked as an exact match, i.e. no error correction was applied, or an error corrected match.<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Associate each binary barcode with the RNA it encodes. Using the codebook designed in\u00a0 <a href=\"https:\/\/www.protocols.io\/view\/rna-imaging-with-merfish-design-of-oligonucleotide-menc3de\" target=\"_blank\">Design of the Codebook<\/a> create a look-up table that associates each encoded RNA with all binary barcodes that encode it. If the encoding scheme is not capable of error correction, then there will only be one binary barcode for each RNA. If, on the other hand, the encoding scheme allows error correction, then each RNA will have multiple binary barcodes that correspond to that word. For the purposes of calculating several properties associated with the basic performance of MERFISH, it is useful to create two look up tables: one that corresponds to the correct binary barcodes and one that corresponds to all binary barcodes that can be matched to an RNA after error correction. The use of two look up tables will allow each decoded RNA to be marked as an exact match, i.e. no error correction was applied, or an error corrected match.<\/p>"},"is_project":0}]},{"id":"600898","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"6FA2D37FFA5F4F64B033BB54E7BC8213","previous_guid":"2494CF36C64D4D208D28046282C2991E","previous_id":"600897","last_modified":"1514464158","components":[{"component_id":"1037440","previous_id":0,"original_id":"0","guid":"52C1CE28449D4291B87AE9E9F67ADE07","previous_guid":null,"component_type_id":"6","data_id":"0","data":"Calculate MERFISH Performance","order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Calculate MERFISH Performance"},"is_project":0},{"component_id":"1037439","previous_id":"1037440","original_id":"0","guid":"7A3FF45E87AB4FCDAD8C96D3F9754883","previous_guid":"52C1CE28449D4291B87AE9E9F67ADE07","component_type_id":"1","data_id":null,"data":"<p>Please see Guidelines for Calculating MERFISH Performance protocol.\u00a0<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Please see Guidelines for Calculating MERFISH Performance protocol.\u00a0<\/p>"},"is_project":0}]},{"id":"600899","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"F2EA737754054E63BE68D81716ECE025","previous_guid":"6FA2D37FFA5F4F64B033BB54E7BC8213","previous_id":"600898","last_modified":"1514464685","components":[{"component_id":"1037442","previous_id":0,"original_id":"0","guid":"E4874209D1DB48B8B285903FB9EA0313","previous_guid":null,"component_type_id":"6","data_id":"0","data":"(Optional) Iterative Identification of Optimal Thresholds","order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"(Optional) Iterative Identification of Optimal Thresholds"},"is_project":0},{"component_id":"1037441","previous_id":"1037442","original_id":"0","guid":"211B11D574F149DE935FFD26AB94D261","previous_guid":"E4874209D1DB48B8B285903FB9EA0313","component_type_id":"1","data_id":null,"data":"<p>Run the spot-fitting algorithm for a range of spot-brightness thresholds. We analyze each MERFISH data set with 10-20 thresholds spanning a range set by examining these data by hand.<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Run the spot-fitting algorithm for a range of spot-brightness thresholds. We analyze each MERFISH data set with 10-20 thresholds spanning a range set by examining these data by hand.<\/p>"},"is_project":0}]},{"id":"600900","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"FEAA2634F91444CE91F44F88A6D22861","previous_guid":"F2EA737754054E63BE68D81716ECE025","previous_id":"600899","last_modified":"1514464729","components":[{"component_id":"1037444","previous_id":0,"original_id":"0","guid":"15A585C9E9EE4A09BF40C6C38DA065AE","previous_guid":null,"component_type_id":"6","data_id":"0","data":"(Optional) Iterative Identification of Optimal Thresholds","order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"(Optional) Iterative Identification of Optimal Thresholds"},"is_project":0},{"component_id":"1037443","previous_id":"1037444","original_id":"0","guid":"60F6C270875E49D39286D9BC8AD5AABD","previous_guid":"15A585C9E9EE4A09BF40C6C38DA065AE","component_type_id":"1","data_id":null,"data":"<p>Select a starting set of thresholds and decode barcodes using these found spots. The initial thresholds can be selected at random or one can start at one limit\u2014i.e. all thresholds are the lowest or highest possible values. With these found spots, run the decoding algorithm discussed in the Section of Decoding Barcodes.<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Select a starting set of thresholds and decode barcodes using these found spots. The initial thresholds can be selected at random or one can start at one limit\u2014i.e. all thresholds are the lowest or highest possible values. With these found spots, run the decoding algorithm discussed in the Section of Decoding Barcodes.<\/p>"},"is_project":0}]},{"id":"600901","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"1551D216379247AFAC23C8BA846C57BA","previous_guid":"FEAA2634F91444CE91F44F88A6D22861","previous_id":"600900","last_modified":"1514464755","components":[{"component_id":"1037446","previous_id":0,"original_id":"0","guid":"EEB28F9157DF42CF987D4FE196F92BB3","previous_guid":null,"component_type_id":"6","data_id":"0","data":"(Optional) Iterative Identification of Optimal Thresholds","order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"(Optional) Iterative Identification of Optimal Thresholds"},"is_project":0},{"component_id":"1037445","previous_id":"1037446","original_id":"0","guid":"C55449D37C7C4CF0A912101A426B764F","previous_guid":"EEB28F9157DF42CF987D4FE196F92BB3","component_type_id":"1","data_id":null,"data":"<p>Compute a quality metric. For the MHD4 code, where it is possible to calculate the per-bit error rates, we calculate the geometric mean of all `1'\u2794 `0' and `0'\u2794 `1' error rates. For the MHD2 code which does not have the ability to correct errors and calculate these perbit error rates, we utilize the ratio of the number of barcodes with four `1' bits to those measured with three or five `1' bits, i.e. the average confidence ratio.<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Compute a quality metric. For the MHD4 code, where it is possible to calculate the per-bit error rates, we calculate the geometric mean of all `1'\u2794 `0' and `0'\u2794 `1' error rates. For the MHD2 code which does not have the ability to correct errors and calculate these perbit error rates, we utilize the ratio of the number of barcodes with four `1' bits to those measured with three or five `1' bits, i.e. the average confidence ratio.<\/p>"},"is_project":0}]},{"id":"600902","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"CF685F16569F40E38CCB5A58E96EAC0D","previous_guid":"1551D216379247AFAC23C8BA846C57BA","previous_id":"600901","last_modified":"1514468610","components":[{"component_id":"1037448","previous_id":0,"original_id":"0","guid":"C8D11DCDC6AB4DCC8EF218E4C9EDA7E0","previous_guid":null,"component_type_id":"6","data_id":"0","data":"(Optional) Iterative Identification of Optimal Thresholds","order_id":"0","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"(Optional) Iterative Identification of Optimal Thresholds"},"is_project":0},{"component_id":"1037447","previous_id":"1037448","original_id":"0","guid":"B1D296CA6B38490BA7B70CCF847D125B","previous_guid":"C8D11DCDC6AB4DCC8EF218E4C9EDA7E0","component_type_id":"1","data_id":null,"data":"<p>Iterate. Repeat Steps\u00a013 and\u00a014 for a variety of threshold combinations, and select the threshold combination that maximizes the selected quality metric. Typically, we change our threshold combinations during each iteration round by selecting one hybridization round, fixing the threshold for all other rounds, and screening through all possible threshold values for this round.\u00a0<\/p>","order_id":"1","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"<p>Iterate. Repeat Steps\u00a013 and\u00a014 for a variety of threshold combinations, and select the threshold combination that maximizes the selected quality metric. Typically, we change our threshold combinations during each iteration round by selecting one hybridization round, fixing the threshold for all other rounds, and screening through all possible threshold values for this round.\u00a0<\/p>"},"is_project":0},{"component_id":"1037449","previous_id":"1037447","original_id":"0","guid":"8C1371EFB7704C6A847A939DD6F3230D","previous_guid":"B1D296CA6B38490BA7B70CCF847D125B","component_type_id":"26","data_id":"17063","data":"","order_id":"2","name":"Note","data_by_id":"1","type_id":"26","source_data":{"annotation_id":"17063","thread_id":"17063","id":"17063","thread_title":"Comment on step 15 of RNA Imaging with MERFISH - Data Analysis","uri":"comment-on-step-15-of-rna-imaging-with-merfish-data","thread_uri":"comment-on-step-15-of-rna-imaging-with-merfish-data","step_id":"600902","protocol_uri":"rna-imaging-with-merfish-data-analysis-metc3en","protocol_name":"RNA Imaging with MERFISH - Data Analysis","protocol_name_html":"RNA Imaging with MERFISH - Data Analysis","annotation":"<p>Once all thresholds have been screened for this round, we select the threshold value for that round that produces the highest quality metric and then\u00a0fix\u00a0this threshold value for this hybridization round for subsequent iterations. We then repeat this process for each subsequent hybridization round. Once we have screened the thresholds for all hybridization rounds in this fashion, we repeat this process, often for a total of three times. We find that both quality metrics that we have used typically converge with only a few iterations through all hybridization rounds. More complicated search strategies are also possible.<\/p>","thread_text":"<p>Once all thresholds have been screened for this round, we select the threshold value for that round that produces the highest quality metric and then\u00a0fix\u00a0this threshold value for this hybridization round for subsequent iterations. We then repeat this process for each subsequent hybridization round. Once we have screened the thresholds for all hybridization rounds in this fashion, we repeat this process, often for a total of three times. We find that both quality metrics that we have used typically converge with only a few iterations through all hybridization rounds. More complicated search strategies are also possible.<\/p>","body":"<p>Once all thresholds have been screened for this round, we select the threshold value for that round that produces the highest quality metric and then\u00a0fix\u00a0this threshold value for this hybridization round for subsequent iterations. We then repeat this process for each subsequent hybridization round. Once we have screened the thresholds for all hybridization rounds in this fashion, we repeat this process, often for a total of three times. We find that both quality metrics that we have used typically converge with only a few iterations through all hybridization rounds. More complicated search strategies are also possible.<\/p>","is_private":"0","public_protocol":"1","can_edit":0,"can_delete":"0","show_name":"0","created_date":"1514468609","created_on":"1514468609","modified_on":"1521830162","last_updated":"1521830162","profile_image":"\/img\/avatars\/011.png","full_name":"Max Brown","affiliation":null,"username":"max-brown","email":"mbrown@chanzuckerberg.com","pa_useranme":"max-brown","comments":[]},"is_project":0}]}]}