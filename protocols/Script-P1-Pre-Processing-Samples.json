{"uri":"Script-P1-Pre-Processing-Samples-edrba56","version_id":"0","protocol_name":"Script P1: Pre-Processing Samples","protocol_name_html":"Script P1: Pre-Processing Samples","is_prepublished":"0","can_edit":"0","parent_id":null,"api_version":"2","is_new_mode":"1","last_modified":"1519452001","type_id":"1","link":"http:\/\/mbio.asm.org\/content\/6\/5\/e01578-15.full","fork_id":"","public_fork_note":"","number_of_steps":"70","has_versions":"0","first_published_date":"1457615916","publish_date":"2016-03-10 13:18:36","documents":"null","have_protocol_in_step":"0","is_protocol_in_step":"0","vendor_name":"Contributed by users","vendor_link":"https:\/\/www.protocols.io","vendor_logo":"\/img\/vendors\/1.png","mod_mins":"-45","mod_secs":"1","description":"This protocol provides methods for quality control of metagenomic data. Included is adapter trimming, quality trimming, decontamination, negative control removal, and pre-processing results. Based on the methods found in the following publication:<br \/><br \/>Hannigan, Geoffrey D., et al. \"The Human Skin Double-Stranded DNA Virome: Topographical and Temporal Diversity, Genetic Enrichment, and Dynamic Associations with the Host Microbiome.\"\u00a0<em>mBio<\/em>\u00a06.5 (2015): e01578-15.","is_bookmarked":"0","can_reassign":"1","before_start":"Perl scripts and other supplementary information available at:<br \/><br \/><a href=\"https:\/\/figshare.com\/articles\/The_Human_Skin_dsDNA_Virome_Topographical_and_Temporal_Diversity_Genetic_Enrichment_and_Dynamic_Associations_with_the_Host_Microbiome\/1281248\" target=\"_blank\">https:\/\/figshare.com\/articles\/The_Human_Skin_dsDNA_Virome_Topographical_and_Temporal_Diversity_Genetic_Enrichment_and_Dynamic_Associations_with_the_Host_Microbiome\/1281248<\/a>","has_guidelines":"1","materials":[],"warning":"","version_class":"2193","public":"1","is_owner":"1","is_original_owner":"1","created_on":"1452199189","protocol_affiliation":"Grice Lab, Department of Dermatology University of Pennsylvania","affiliation":"Merck Research Labs","doi":"dx.doi.org\/10.17504\/protocols.io.edrba56","doi_status":"2","changed_fork_steps":null,"profile_url":"Geoffrey-w2y254v2q2","protocol_img":"https:\/\/www.protocols.io\/img\/default_protocol.png","profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/cpedy2n.jpg","full_name":"Geoffrey Hannigan","created_by":"Geoffrey Hannigan","private_link":"FCA5FCB863E5DBBA9FC970E704B91C45","original_img":"1","username":"geoffrey-hannigan","is_retracted":"0","retraction_reason":null,"plos_id":null,"manuscript_citation":null,"journal_name":null,"is_donations_disabled":"0","is_donations_disabled_by_user":"9","item_record_id":226770,"fork_info":[],"compare_forks":[],"protocols":[],"groups":[{"group_id":"45","group_uri":"verve-net","group_name":"VERVE Net","group_logo":"https:\/\/s3.amazonaws.com\/pr-journal\/cdqcwwe.png","requested_uid":null,"request_flag":null,"my_request":"1"},{"group_id":"138","group_uri":"club-grice","group_name":"Club Grice","group_logo":"https:\/\/s3.amazonaws.com\/pr-journal\/cp7dzme.png","requested_uid":null,"request_flag":null,"my_request":"1"}],"number_of_shared_runs":[],"ownership_history":[],"keywords":"","transfer_to_user":[],"sub_transfer":false,"is_transfer_pending":false,"number_of_bookmarks":"0","collections":[{"protocol_name":"The Human Skin dsDNA Virome: Topographical and Temporal Diversity, Genetic Enrichment, and its Dynamic Associations with the Host Microbiome","protocol_name_html":"The Human Skin dsDNA Virome: Topographical and Temporal Diversity, Genetic Enrichment, and its Dynamic Associations with the Host Microbiome","uri":"The-Human-Skin-dsDNA-Virome-Topographical-and-Temp-ekubcww","username":"geoffrey-hannigan","profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/cpedy2n.jpg","protocol_img":"https:\/\/www.protocols.io\/img\/default_protocol.png","full_name":"Geoffrey Hannigan"}],"tags":[{"tag_id":"57","tag_name":"VERVE"}],"archived":0,"sub_authors":[],"sub_protocols_number":0,"can_edit_shared":0,"shared_runs":[],"is_shared_run":0,"is_shared":1,"banner":null,"contact_badges":[{"badge_id":"4","badge_image":"\/img\/badges\/gold.svg","badge_description":"Gold power author!"},{"badge_id":"5","badge_image":"\/img\/badges\/earlyadopter.svg","badge_description":"Early adopter"},{"badge_id":"6","badge_image":"\/img\/badges\/socialbutterfly.svg","badge_description":"Social butterfly"}],"number_of_comments":0,"is_locked":0,"is_locked_by":false,"authors":"Hannigan GD, Grice EA, et al.","authors_list":[{"name":"Hannigan GD","affiliation":"Grice Lab, Department of Dermatology University of Pennsylvania","username":null,"profile_image":null},{"name":" Grice EA","affiliation":"Grice Lab, Department of Dermatology University of Pennsylvania","username":null,"profile_image":null},{"name":" et al.","affiliation":"Grice Lab, Department of Dermatology University of Pennsylvania","username":null,"profile_image":null}],"user":{"profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/cpedy2n.jpg","username":"geoffrey-hannigan","full_name":"Geoffrey Hannigan","created_by":"Geoffrey Hannigan"},"access":{"can_view":"1","can_remove":"0","can_add":"0","can_edit":0,"can_publish":0,"can_get_doi":0,"can_share":"0","can_move":"1","can_transfer":"1","can_download":"1","is_locked":"0"},"is_contact_suspended":0,"guidelines":"<strong>Required Software:<br \/><\/strong>\n<ul>\n<li>cutadapt-1.4.1<\/li>\n<\/ul>\n<ul>\n<li>fastx_toolkit-0.0.14<\/li>\n<li>NCBI's BLAST+ v2.2.0<\/li>\n<li>bwa-0.5.9<\/li>\n<\/ul>\n<ul>\n<li>deconseq-standalone-0.4.3<\/li>\n<\/ul>\n<strong><br \/>Relevant Files<br \/><br \/><\/strong>Output:<br \/>\n<ul>\n<li>Virome_Sequence_Counts<\/li>\n<li>Whole_Microbiome_Sequence_Counts<\/li>\n<\/ul>\nPerl Scripts:<br \/>\n<ul>\n<li>calculate_fasta_median_length.pl<\/li>\n<li>calculate_fastq_median_length.pl<\/li>\n<\/ul>\nR Scripts:<br \/>\n<ul>\n<li><a href=\"https:\/\/www.protocols.io\/view\/Script-R1-Virome-Contig-and-Sequencing-Statistics-eh5bb86?step=undefined\" target=\"_blank\">R1<\/a>, <a href=\"https:\/\/www.protocols.io\/view\/Script-R2-Whole-Metagenome-Contig-and-Sequencing-S-eh6bb9e\" target=\"_blank\">R2<\/a>, and <a href=\"https:\/\/www.protocols.io\/view\/Script-R3-Quality-Control-Statistics-eh9bb96\" target=\"_blank\">R3<\/a><\/li>\n<\/ul>\n<ul>\n<li>human_decontamination_stats.R<\/li>\n<\/ul>","status_id":"1","is_research":"1","status_info":null,"steps":[{"id":"139708","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"F7CEB53651F04935AAD0D9DCABD51CA0","previous_guid":null,"previous_id":"0","last_modified":"1457560315","components":[{"component_id":"144483","previous_id":0,"original_id":"0","guid":"1340218F3970402FBE1C43ACEC5D8590","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Make directory for the output.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Make directory for the output."},"is_project":0},{"component_id":"144494","previous_id":"144483","original_id":"0","guid":"E749C40D965F4389AF0A5666FF1C25DC","previous_guid":"1340218F3970402FBE1C43ACEC5D8590","component_type_id":"6","data_id":"0","data":"Adapter Trimming","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Adapter Trimming"},"is_project":0},{"component_id":"144495","previous_id":"144494","original_id":"0","guid":"2DB5949AF0EB43118F3DCE515EFFBB3D","previous_guid":"E749C40D965F4389AF0A5666FF1C25DC","component_type_id":"15","data_id":"287","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir .\/fastq_trimmed_adapters\nmkdir .\/fastq_trimmed_adapters_STDERR","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139717","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"9534AAA1F15D4555946B604914509CA7","previous_guid":"F7CEB53651F04935AAD0D9DCABD51CA0","previous_id":"139708","last_modified":"1457560315","components":[{"component_id":"144497","previous_id":0,"original_id":"0","guid":"915731233A554AAFB6682FB899F035A4","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Write function to trim adapters.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Write function to trim adapters."},"is_project":0},{"component_id":"144498","previous_id":"144497","original_id":"0","guid":"89E2F243EA57437380A0F07F70036E71","previous_guid":"915731233A554AAFB6682FB899F035A4","component_type_id":"6","data_id":"0","data":"Adapter Trimming","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Adapter Trimming"},"is_project":0},{"component_id":"144499","previous_id":"144498","original_id":"0","guid":"719C630A9CBE4632A40F2F2D60BEFFB0","previous_guid":"89E2F243EA57437380A0F07F70036E71","component_type_id":"8","data_id":"18","data":null,"order_id":"2","name":"Software package","data_by_id":"1","type_id":"8","source_data":{"id":"18","name":"cutadapt","developer":"Marcel Martin","repository":"https:\/\/github.com\/marcelm\/cutadapt\/tree\/25fa1e828b0f737dc43b7aec9f29582fbcb0245e\/cutadapt","link":"https:\/\/cutadapt.readthedocs.org\/en\/stable\/","os_name":"Unix","os_version":"","version":"1.4.1","can_edit":"0"},"is_project":0},{"component_id":"144500","previous_id":"144499","original_id":"0","guid":"91B6D5FEE999415BACE8FDA4500BDA35","previous_guid":"719C630A9CBE4632A40F2F2D60BEFFB0","component_type_id":"15","data_id":"288","data":null,"order_id":"3","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"runCutadaptWithMap() {\n\techo Input fastq = ${1} #1 = full path to fastq file to be trimmed\n\techo Mapping file = ${2} #2 = full path to mapping file mapping file\n\techo Output file = ${3} #3 = full path for output directory\n\techo STDERR file = ${4} #4 = full path to sterr result directory\n\texport SAMPLEID=$(echo ${1} | sed 's\/^.*\\\/\/\/g' | sed 's\/_R.*$\/\/')\n\texport THREEPRIME=$(awk --assign sampleid=$SAMPLEID '$1 == sampleid { print $13 }' ${2})\n\texport FIVEPRIME=$(awk --assign sampleid=$SAMPLEID '$1 == sampleid { print $12 }' ${2})\n\t\/data\/apps\/bin\/cutadapt --error-rate=0.1 --overlap=10 -a $THREEPRIME -a $FIVEPRIME ${1} > ${3} 2> ${4}\n\tgzip ${3}\n}","description":"This function will remove adapters with an error rate of 0.1 and overlap of 10.","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139718","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"D2F3C41DB6B74D4A90D1B589A3C393AE","previous_guid":"9534AAA1F15D4555946B604914509CA7","previous_id":"139717","last_modified":"1457560315","components":[{"component_id":"144501","previous_id":0,"original_id":"0","guid":"6E5C9201846C41B4A4296630D1258092","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Set the function to be used in loops.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Set the function to be used in loops."},"is_project":0},{"component_id":"144502","previous_id":"144501","original_id":"0","guid":"E6C2A61A9BDA497E8878EFEF61297901","previous_guid":"6E5C9201846C41B4A4296630D1258092","component_type_id":"6","data_id":"0","data":"Adapter Trimming","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Adapter Trimming"},"is_project":0},{"component_id":"144503","previous_id":"144502","original_id":"0","guid":"E160E391175040ECAF4B299DF7B86788","previous_guid":"E6C2A61A9BDA497E8878EFEF61297901","component_type_id":"15","data_id":"289","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"export -f runCutadaptWithMap","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139719","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"718339BEC147475C9616FBBEC22CEF15","previous_guid":"D2F3C41DB6B74D4A90D1B589A3C393AE","previous_id":"139718","last_modified":"1457560315","components":[{"component_id":"144504","previous_id":0,"original_id":"0","guid":"A75C57D305B244EAA62BB5938338A030","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Trim the adapters from the fastq files of interest.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Trim the adapters from the fastq files of interest."},"is_project":0},{"component_id":"144505","previous_id":"144504","original_id":"0","guid":"28E21DCAF8E04928BE8A9C9C08583AFC","previous_guid":"A75C57D305B244EAA62BB5938338A030","component_type_id":"6","data_id":"0","data":"Adapter Trimming","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Adapter Trimming"},"is_project":0},{"component_id":"144506","previous_id":"144505","original_id":"0","guid":"66FFE725E6CD4C009F570C131D56755C","previous_guid":"28E21DCAF8E04928BE8A9C9C08583AFC","component_type_id":"15","data_id":"290","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"ls .\/raw_fastq\/ | xargs -I {} --max-procs=8 sh -c 'runCutadaptWithMap .\/raw_fastq\/{} SkinMet_Virome_metadata.tsv .\/fastq_trimmed_adapters\/{} .\/fastq_trimmed_adapters_STDERR\/{}'","description":"raw_fastq is the directory name where the fastq files are found. Rename as needed.","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139720","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"B0E7DF6DC3734FCFABEF003228CE018C","previous_guid":"718339BEC147475C9616FBBEC22CEF15","previous_id":"139719","last_modified":"1457560315","components":[{"component_id":"144507","previous_id":0,"original_id":"0","guid":"C6C1CD1D447A468AB444FAB9799D1A3F","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Remove sequences with a quality score &lt; 33 from the adapter trimmed sequences using the fastx toolkit.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Remove sequences with a quality score &lt; 33 from the adapter trimmed sequences using the fastx toolkit."},"is_project":0},{"component_id":"144508","previous_id":"144507","original_id":"0","guid":"A7D371BEF38244E6880373A76E2AF0AE","previous_guid":"C6C1CD1D447A468AB444FAB9799D1A3F","component_type_id":"6","data_id":"0","data":"Quality Trimming ","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Quality Trimming "},"is_project":0},{"component_id":"144509","previous_id":"144508","original_id":"0","guid":"3D3A82B433904624B4226F92FCC70D5A","previous_guid":"A7D371BEF38244E6880373A76E2AF0AE","component_type_id":"8","data_id":"19","data":null,"order_id":"2","name":"Software package","data_by_id":"1","type_id":"8","source_data":{"id":"19","name":"FASTX Toolkit","developer":"Hannon Lab","repository":"https:\/\/github.com\/agordon\/fastx_toolkit","link":"http:\/\/hannonlab.cshl.edu\/fastx_toolkit\/","os_name":"Unix","os_version":"","version":"0.0.14","can_edit":"0"},"is_project":0},{"component_id":"144510","previous_id":"144509","original_id":"0","guid":"75E9452120154EF2993CFA0600F6EFC9","previous_guid":"3D3A82B433904624B4226F92FCC70D5A","component_type_id":"15","data_id":"291","data":null,"order_id":"3","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir .\/trimmed_fastq\/\nls .\/fastq_trimmed_adapters\/* | sed -e 's\/^.*\\\/.*\\\/\/\/g' | xargs -I {} --max-procs=18 fastq_quality_trimmer -t 33 -Q 33 -i .\/fastq_trimmed_adapters\/{} -o .\/trimmed_fastq\/{}","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139721","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"841F33CA247544BBB1E77BA677AD266C","previous_guid":"B0E7DF6DC3734FCFABEF003228CE018C","previous_id":"139720","last_modified":"1457560315","components":[{"component_id":"144511","previous_id":0,"original_id":"0","guid":"908C008075844D6BABC9C5C908AB1A02","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Remove sequencing mapping to the human genome using the DeconSeq toolkit with default parameters and the human reference GRCh37.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Remove sequencing mapping to the human genome using the DeconSeq toolkit with default parameters and the human reference GRCh37."},"is_project":0},{"component_id":"144512","previous_id":"144511","original_id":"0","guid":"6D72C987955A4022AE9C3530679C996B","previous_guid":"908C008075844D6BABC9C5C908AB1A02","component_type_id":"6","data_id":"0","data":"Decontamination","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Decontamination"},"is_project":0},{"component_id":"144513","previous_id":"144512","original_id":"0","guid":"4AC964A66642452B9EB7407B88C45E28","previous_guid":"6D72C987955A4022AE9C3530679C996B","component_type_id":"8","data_id":"20","data":null,"order_id":"2","name":"Software package","data_by_id":"1","type_id":"8","source_data":{"id":"20","name":"DeconSeq toolkit","developer":"Schmieder R and Edwards R","repository":"http:\/\/sourceforge.net\/projects\/deconseq\/files\/","link":"http:\/\/deconseq.sourceforge.net\/","os_name":"Unix","os_version":"","version":"0.4.3","can_edit":"0"},"is_project":0},{"component_id":"144514","previous_id":"144513","original_id":"0","guid":"AE06DFDA2A894A81B5ED498969C9643F","previous_guid":"4AC964A66642452B9EB7407B88C45E28","component_type_id":"15","data_id":"292","data":null,"order_id":"3","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir .\/deconseq_fastq\nls .\/trimmed_fastq\/* | sed -e 's\/^.*\\\/.*\\\/\/\/g' | xargs -I {} --max-procs=128 perl deconseq-standalone-0.4.3\/deconseq.pl -f .\/trimmed_fastq\/${} -dbs hsref -out_dir .\/deconseq_fastq\/${}\nwait","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139722","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"3547DFE97F0542DBAD2241F45DD7A77F","previous_guid":"841F33CA247544BBB1E77BA677AD266C","previous_id":"139721","last_modified":"1457560315","components":[{"component_id":"144515","previous_id":0,"original_id":"0","guid":"F78E70AF7A20480C994F8E33FDC75007","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Automatically rename the output files so that they are specific for each sample.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Automatically rename the output files so that they are specific for each sample."},"is_project":0},{"component_id":"144516","previous_id":"144515","original_id":"0","guid":"DEB18261D4084BBD81A9A7391DF61983","previous_guid":"F78E70AF7A20480C994F8E33FDC75007","component_type_id":"6","data_id":"0","data":"Decontamination","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Decontamination"},"is_project":0},{"component_id":"144517","previous_id":"144516","original_id":"0","guid":"A408E3D2865D4E2D86DBB8348C6A8CCB","previous_guid":"DEB18261D4084BBD81A9A7391DF61983","component_type_id":"15","data_id":"293","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir .\/clean_fastq\nmkdir .\/cont_fastq\n\nls -d .\/deconseq_fastq\/* | sed 's\/^.*\\\/\/\/g' | xargs -I {} --max-procs=1 sh -c 'cp .\/deconseq_fastq\/{}\/*_clean.fq .\/clean_fastq\/{}'\nls -d .\/deconseq_fastq\/* | sed 's\/^.*\\\/\/\/g' | xargs -I {} --max-procs=1 sh -c 'cp .\/deconseq_fastq\/{}\/*_cont.fq .\/cont_fastq\/{}'","description":"Here we only rename the 'clean' files because those are the ones we will continue to work with downstream.","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139723","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"C20E234BCC9C4FC98A7FB00C70DA91E9","previous_guid":"3547DFE97F0542DBAD2241F45DD7A77F","previous_id":"139722","last_modified":"1457560315","components":[{"component_id":"144518","previous_id":0,"original_id":"0","guid":"02A3530D74E7449D8279883D50CEBF9D","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Since a 1% spike-in of PhiX Control was added to the Illumina sequencing runs for quality control purposes, any sequences mapping to the PhiX174 genome (NCBI Accession: NC_001422) are\u00a0also removed using DeconSeq, but only for the whole metagenome samples (virome samples were subjected to further background removal).","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Since a 1% spike-in of PhiX Control was added to the Illumina sequencing runs for quality control purposes, any sequences mapping to the PhiX174 genome (NCBI Accession: NC_001422) are\u00a0also removed using DeconSeq, but only for the whole metagenome samples (virome samples were subjected to further background removal)."},"is_project":0},{"component_id":"144519","previous_id":"144518","original_id":"0","guid":"300186D5AC8749ADBBB1E612D67595ED","previous_guid":"02A3530D74E7449D8279883D50CEBF9D","component_type_id":"6","data_id":"0","data":"Decontamination","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Decontamination"},"is_project":0}]},{"id":"139724","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"FF5CC735B86A4BACBEDA0A387B143865","previous_guid":"C20E234BCC9C4FC98A7FB00C70DA91E9","previous_id":"139723","last_modified":"1457560315","components":[{"component_id":"144520","previous_id":0,"original_id":"0","guid":"E2379AFBAEFF411AA47D6DCD30C29062","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Build PhiX database in deconseq-standalone-0.4.3\/db","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Build PhiX database in deconseq-standalone-0.4.3\/db"},"is_project":0},{"component_id":"144521","previous_id":"144520","original_id":"0","guid":"3E18CFC1215A4D02B356C880D311674B","previous_guid":"E2379AFBAEFF411AA47D6DCD30C29062","component_type_id":"6","data_id":"0","data":"Decontamination","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Decontamination"},"is_project":0},{"component_id":"144522","previous_id":"144521","original_id":"0","guid":"023879DB1E164E67B230B4FF0C022282","previous_guid":"3E18CFC1215A4D02B356C880D311674B","component_type_id":"15","data_id":"294","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"bwa-0.5.9\/bwa64 index \u2212p PhiX174 PhiX174.fasta","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139725","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"CBFBC329EC844CDCAFA0618B71FE886C","previous_guid":"FF5CC735B86A4BACBEDA0A387B143865","previous_id":"139724","last_modified":"1457560315","components":[{"component_id":"144523","previous_id":0,"original_id":"0","guid":"679E5ED8B21A43BDB9C54F137A7D0D82","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Make directory for PhiX decontaminated output.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Make directory for PhiX decontaminated output."},"is_project":0},{"component_id":"144524","previous_id":"144523","original_id":"0","guid":"C5635091B98D4AF5808057D2D77AEA65","previous_guid":"679E5ED8B21A43BDB9C54F137A7D0D82","component_type_id":"6","data_id":"0","data":"Decontamination","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Decontamination"},"is_project":0},{"component_id":"144525","previous_id":"144524","original_id":"0","guid":"FACD034D9FA048759FD56BE9A9CA7EF0","previous_guid":"C5635091B98D4AF5808057D2D77AEA65","component_type_id":"15","data_id":"295","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir .\/deconseq_phix_fastq\nls .\/clean_fastq\/* | sed -e 's\/^.*\\\/.*\\\/\/\/g' | xargs -I {} --max-procs=128 perl deconseq-standalone-0.4.3\/deconseq.pl -f .\/clean_fastq\/{} -dbs phix -out_dir .\/deconseq_phix_fastq\/{}\nwait","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139726","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"02C3DAEE5A93441D8C1A5F6337C1BF8A","previous_guid":"CBFBC329EC844CDCAFA0618B71FE886C","previous_id":"139725","last_modified":"1457560315","components":[{"component_id":"144526","previous_id":0,"original_id":"0","guid":"8A983EE341A84DCC97B70159CA1C27D9","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Automatically rename the output files so that they are specific for each sample.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Automatically rename the output files so that they are specific for each sample."},"is_project":0},{"component_id":"144527","previous_id":"144526","original_id":"0","guid":"69248F75DB82410EA8AA6B126526915E","previous_guid":"8A983EE341A84DCC97B70159CA1C27D9","component_type_id":"6","data_id":"0","data":"Decontamination","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Decontamination"},"is_project":0},{"component_id":"144528","previous_id":"144527","original_id":"0","guid":"22AF73E5C577448E9A41D63D704F2911","previous_guid":"69248F75DB82410EA8AA6B126526915E","component_type_id":"15","data_id":"296","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir .\/clean_phix_fastq\nmkdir .\/cont_phix_fastq\n\nls -d .\/deconseq_phix_fastq\/* | sed 's\/^.*\\\/\/\/g' | xargs -I {} --max-procs=1 sh -c 'cp .\/deconseq_phix_fastq\/{}\/*_clean.fq .\/clean_phix_fastq\/{}'\nls -d .\/deconseq_phix_fastq\/* | sed 's\/^.*\\\/\/\/g' | xargs -I {} --max-procs=1 sh -c 'cp .\/deconseq_phix_fastq\/{}\/*_cont.fq .\/cont_phix_fastq\/{}'","description":"Here we only rename the 'clean' files because those are the ones we will continue to work with downstream.","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139727","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"44D9A05AD68B406FBCEE91B34AAC9EC7","previous_guid":"02C3DAEE5A93441D8C1A5F6337C1BF8A","previous_id":"139726","last_modified":"1457560315","components":[{"component_id":"144529","previous_id":0,"original_id":"0","guid":"823590A168364A3EA5E993CF615FC246","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Make a new directory for fasta files to be cleaned of environmental contamination.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Make a new directory for fasta files to be cleaned of environmental contamination."},"is_project":0},{"component_id":"144530","previous_id":"144529","original_id":"0","guid":"15CA2D77F6F14196A9F895A1DDD27105","previous_guid":"823590A168364A3EA5E993CF615FC246","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144537","previous_id":"144530","original_id":"0","guid":"84EA3ED7241C4866BA6164C98A794989","previous_guid":"15CA2D77F6F14196A9F895A1DDD27105","component_type_id":"15","data_id":"297","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir .\/clean_R1_fasta","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139735","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"1F89E899E35C484FAC199409552314A0","previous_guid":"44D9A05AD68B406FBCEE91B34AAC9EC7","previous_id":"139727","last_modified":"1457560315","components":[{"component_id":"144540","previous_id":0,"original_id":"0","guid":"903B029557AC405DB40A35883A7CBBB1","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Convert the deconseq cleaned fastq files to fasta files and deposit the sequence files into the new directory.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Convert the deconseq cleaned fastq files to fasta files and deposit the sequence files into the new directory."},"is_project":0},{"component_id":"144541","previous_id":"144540","original_id":"0","guid":"1AEB0885100B435D945C2201503850A7","previous_guid":"903B029557AC405DB40A35883A7CBBB1","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144542","previous_id":"144541","original_id":"0","guid":"2C47840B8551412CBCE14012F7CD2966","previous_guid":"1AEB0885100B435D945C2201503850A7","component_type_id":"15","data_id":"298","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"for file in $(ls clean_phix_fastq\/); do\n    idba_ud-1.0.9\/bin\/fq2fa .\/clean_phix_fastq\/$file .\/clean_R1_fasta\/${file}\ndone","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139736","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"9DE25965C6A94DD08BF065D9F40673FD","previous_guid":"1F89E899E35C484FAC199409552314A0","previous_id":"139735","last_modified":"1457560315","components":[{"component_id":"144543","previous_id":0,"original_id":"0","guid":"AC0E57CEB9104D938CF1D4C051CAC256","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Change the file extension names.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Change the file extension names."},"is_project":0},{"component_id":"144544","previous_id":"144543","original_id":"0","guid":"0E72A60731024406BCADAC263E1C7A50","previous_guid":"AC0E57CEB9104D938CF1D4C051CAC256","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144545","previous_id":"144544","original_id":"0","guid":"E59483C459EB4D4AB84C847FA6ECD39A","previous_guid":"0E72A60731024406BCADAC263E1C7A50","component_type_id":"15","data_id":"299","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"for file in $(ls clean_R1_fasta\/); do\n        mv .\/clean_R1_fasta\/\"${file}\" .\/clean_R1_fasta\/\"${file\/%.fastq\/.fa}\"\ndone","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139737","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"6237E21A2F584E74ABC27FB0C9D69416","previous_guid":"9DE25965C6A94DD08BF065D9F40673FD","previous_id":"139736","last_modified":"1457560315","components":[{"component_id":"144546","previous_id":0,"original_id":"0","guid":"ED7D123C121A47099CEC55CA6F4E5479","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Remove the R2 (forward) files since this script is only cleaning the R1 direction reads.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Remove the R2 (forward) files since this script is only cleaning the R1 direction reads."},"is_project":0},{"component_id":"144547","previous_id":"144546","original_id":"0","guid":"3447EF7BCDBB4B8BA3F85BC40E03E157","previous_guid":"ED7D123C121A47099CEC55CA6F4E5479","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144548","previous_id":"144547","original_id":"0","guid":"CC28F70831A2419E927D06EE1D9A6B29","previous_guid":"3447EF7BCDBB4B8BA3F85BC40E03E157","component_type_id":"15","data_id":"300","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"rm .\/clean_R1_fasta\/*R2*","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139738","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"DE9172A038574A8B87A74FB98B54C3D8","previous_guid":"6237E21A2F584E74ABC27FB0C9D69416","previous_id":"139737","last_modified":"1457560315","components":[{"component_id":"144549","previous_id":0,"original_id":"0","guid":"A7948EA1D681409383A473C59BFE1745","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Format the fasta files to include the pair numbers information (1 or 2).","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Format the fasta files to include the pair numbers information (1 or 2)."},"is_project":0},{"component_id":"144550","previous_id":"144549","original_id":"0","guid":"CE9CE47EB1414B638462D39615280507","previous_guid":"A7948EA1D681409383A473C59BFE1745","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144551","previous_id":"144550","original_id":"0","guid":"73F246BC84914F83A15F227523A93A9D","previous_guid":"CE9CE47EB1414B638462D39615280507","component_type_id":"15","data_id":"301","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir .\/clean_R1_fasta_neg_clean_format\nfor file in $(ls clean_R1_fasta\/); do\n        sed s'\/ \/\\@\/g' .\/clean_R1_fasta\/$file > .\/clean_R1_fasta_neg_clean_format\/${file}\ndone","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139739","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"8E9E581975164A7AA37A3C1D48DA955B","previous_guid":"DE9172A038574A8B87A74FB98B54C3D8","previous_id":"139738","last_modified":"1457560315","components":[{"component_id":"144552","previous_id":0,"original_id":"0","guid":"9FA7938F08764C96BC5775EDEAA7DFFB","previous_guid":null,"component_type_id":"1","data_id":"0","data":"The formatted fasta files will be blasted against the NCBI non-redundant database with an evalue of 0.001 and only the top hit will. First create a directory for the blast results.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"The formatted fasta files will be blasted against the NCBI non-redundant database with an evalue of 0.001 and only the top hit will. First create a directory for the blast results."},"is_project":0},{"component_id":"144553","previous_id":"144552","original_id":"0","guid":"E30514A8CEF2420E9E69E5140934C137","previous_guid":"9FA7938F08764C96BC5775EDEAA7DFFB","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144554","previous_id":"144553","original_id":"0","guid":"C3A661400E394A5282B83B69B83334FD","previous_guid":"E30514A8CEF2420E9E69E5140934C137","component_type_id":"15","data_id":"302","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir .\/blastn_nt_sequences","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139740","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"F51A9ABDA7C1426581B2984461E2DA96","previous_guid":"8E9E581975164A7AA37A3C1D48DA955B","previous_id":"139739","last_modified":"1457560315","components":[{"component_id":"144555","previous_id":0,"original_id":"0","guid":"A081B20BCA7C44749314FD6B2F23021D","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Blast the sequences to use downstream for negative control removal.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Blast the sequences to use downstream for negative control removal."},"is_project":0},{"component_id":"144556","previous_id":"144555","original_id":"0","guid":"7605806470B9423D87FECE129C29B6F0","previous_guid":"A081B20BCA7C44749314FD6B2F23021D","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144557","previous_id":"144556","original_id":"0","guid":"3B82AC9F9904488F95971D73072EE5BA","previous_guid":"7605806470B9423D87FECE129C29B6F0","component_type_id":"8","data_id":"22","data":null,"order_id":"2","name":"Software package","data_by_id":"1","type_id":"8","source_data":{"id":"22","name":"BLAST Toolkit","developer":"NCBI","repository":"ftp:\/\/ftp.ncbi.nlm.nih.gov\/blast\/executables\/blast+\/LATEST\/","link":"https:\/\/blast.ncbi.nlm.nih.gov\/Blast.cgi?PAGE_TYPE=BlastDocs&DOC_TYPE=Download","os_name":"Unix","os_version":"","version":"2.2.0","can_edit":"0"},"is_project":0},{"component_id":"144558","previous_id":"144557","original_id":"0","guid":"30F6CF42D01F48D9A3C9343FCE99AF76","previous_guid":"3B82AC9F9904488F95971D73072EE5BA","component_type_id":"15","data_id":"303","data":null,"order_id":"3","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"run.blastn.for.neg.cleaning.against.nt () {\n    blastn -query .\/clean_R1_fasta_neg_clean_format\/${1} -out .\/blastn_nt_sequences\/${1} -db \/references\/ncbi\/nt -outfmt 6 -num_threads 2 -max_target_seqs 1 -evalue 1e-3\n}\nexport -f run.blastn.for.neg.cleaning.against.nt\nls clean_R1_fasta_neg_clean_format\/ | xargs -I {} --max-procs=128 sh -c 'run.blastn.for.neg.cleaning.against.nt {}'\nwait","description":"A simple way to parallelize this proccess on our server is to run it as a subroutine.","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139741","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"0E5F3254E942485FBE773401DEFA6000","previous_guid":"F51A9ABDA7C1426581B2984461E2DA96","previous_id":"139740","last_modified":"1457560315","components":[{"component_id":"144559","previous_id":0,"original_id":"0","guid":"B22BA1AFC2EB428C8C57C26761A37748","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Rename the file extensions to be .txt","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Rename the file extensions to be .txt"},"is_project":0},{"component_id":"144560","previous_id":"144559","original_id":"0","guid":"E8C92B63B6E84E9DA55D2B76580FD97F","previous_guid":"B22BA1AFC2EB428C8C57C26761A37748","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144561","previous_id":"144560","original_id":"0","guid":"832079A014774F6DB1065D81EEA09526","previous_guid":"E8C92B63B6E84E9DA55D2B76580FD97F","component_type_id":"15","data_id":"304","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"for file in $(ls blastn_nt_sequences\/); do\n        mv .\/blastn_nt_sequences\/\"${file}\" .\/blastn_nt_sequences\/\"${file\/%.fa\/.txt}\"\ndone","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139742","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"431A252F57ED4008B20860E06D94DF4E","previous_guid":"0E5F3254E942485FBE773401DEFA6000","previous_id":"139741","last_modified":"1457560315","components":[{"component_id":"144562","previous_id":0,"original_id":"0","guid":"48185FEB42CF4EF09BF86182968F8FF7","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Annotate the sequences with their corresponding gi numbers.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Annotate the sequences with their corresponding gi numbers."},"is_project":0},{"component_id":"144563","previous_id":"144562","original_id":"0","guid":"0C548F53FC3D407B9788858065EA6F22","previous_guid":"48185FEB42CF4EF09BF86182968F8FF7","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144564","previous_id":"144563","original_id":"0","guid":"01B664808BCE4FC3842565DB9449B945","previous_guid":"0C548F53FC3D407B9788858065EA6F22","component_type_id":"15","data_id":"305","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir .\/tmp-dir-list1\nmkdir .\/blastn_nt_sequences_only\ncp .\/blastn_nt_sequences\/MG*.txt .\/blastn_nt_sequences_only\nfor file in $(ls .\/blastn_nt_sequences_only); do\n        sed 's\/^.*gi|\/\/' .\/blastn_nt_sequences_only\/$file | sed 's\/|.*\/\/'> .\/tmp-dir-list1\/${file}_list1\ndone","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139743","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"35C0EE458ACD47DAA917EA0A0F04155C","previous_guid":"431A252F57ED4008B20860E06D94DF4E","previous_id":"139742","last_modified":"1457560315","components":[{"component_id":"144565","previous_id":0,"original_id":"0","guid":"F319FC3DB9B84D5DAF3FF4FACA055905","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Make a list of the annotated sequence numbers.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Make a list of the annotated sequence numbers."},"is_project":0},{"component_id":"144566","previous_id":"144565","original_id":"0","guid":"69AAD795FA124568908004598FB37E3F","previous_guid":"F319FC3DB9B84D5DAF3FF4FACA055905","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144567","previous_id":"144566","original_id":"0","guid":"7FCA0E48A3F3419CA3D3742BB546A286","previous_guid":"69AAD795FA124568908004598FB37E3F","component_type_id":"15","data_id":"306","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir .\/tmp-dir-list2\nfor file in $(ls .\/blastn_nt_sequences_only); do\n        cut -f 1 .\/blastn_nt_sequences_only\/$file > .\/tmp-dir-list2\/${file}_list2\ndone","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139744","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"3D40ED939A3145A68853638A819AC7EB","previous_guid":"35C0EE458ACD47DAA917EA0A0F04155C","previous_id":"139743","last_modified":"1457560315","components":[{"component_id":"144568","previous_id":0,"original_id":"0","guid":"C6C8419A8AC54B1F8DA34E74E15F6A59","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Merge the two lists from previous step together.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Merge the two lists from previous step together."},"is_project":0},{"component_id":"144569","previous_id":"144568","original_id":"0","guid":"629FF6B018784F39966206B6A9A23785","previous_guid":"C6C8419A8AC54B1F8DA34E74E15F6A59","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144570","previous_id":"144569","original_id":"0","guid":"0869DF1E9A83486C8600CB8821B80BF5","previous_guid":"629FF6B018784F39966206B6A9A23785","component_type_id":"15","data_id":"307","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir tmp-dir-paired-lists\nfor i in $(ls .\/tmp-dir-list1); do\nfor j in $(ls .\/tmp-dir-list2); do\n        for x in ${i::12}; do\n        for y in ${j::12}; do\n                if [ \"$x\" == \"$y\" ]; then\n                paste .\/tmp-dir-list2\/$j .\/tmp-dir-list1\/$i > .\/tmp-dir-paired-lists\/${i}_gi_reference\n                fi\n        done\n        done\ndone\ndone","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139745","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"833F5EB7BF1E4680BEED05B95945AB8D","previous_guid":"3D40ED939A3145A68853638A819AC7EB","previous_id":"139744","last_modified":"1457560315","components":[{"component_id":"144571","previous_id":0,"original_id":"0","guid":"CFCE527A5890499D87AB6AB30E5A1938","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Add &gt; to the start of sequence names and merge gi number to the end of the sequence.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Add &gt; to the start of sequence names and merge gi number to the end of the sequence."},"is_project":0},{"component_id":"144572","previous_id":"144571","original_id":"0","guid":"0510CD6A58DC45FB8465EAC418F41C03","previous_guid":"CFCE527A5890499D87AB6AB30E5A1938","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144573","previous_id":"144572","original_id":"0","guid":"0D130730F61A4F039B39BD86BB6FBC80","previous_guid":"0510CD6A58DC45FB8465EAC418F41C03","component_type_id":"15","data_id":"308","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir .\/tmp-dir-for-fa\nfor file in $(ls .\/tmp-dir-paired-lists); do\n    sed 's\/^\/>\/' .\/tmp-dir-paired-lists\/$file | sed 's\/\\t\/\\@\\@\/' > .\/tmp-dir-for-fa\/${file}_for_fa\ndone","description":"Use double @ (@@) because the single @ was already used to designate a different separation above.","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139746","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"FB221D6404C840BD953F01332E1D183C","previous_guid":"833F5EB7BF1E4680BEED05B95945AB8D","previous_id":"139745","last_modified":"1457560315","components":[{"component_id":"144574","previous_id":0,"original_id":"0","guid":"27EE56C4655F42B6947420BFD5EF2657","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Merge the list of sequence names and gi numbers to the list of un-merged sequence names.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Merge the list of sequence names and gi numbers to the list of un-merged sequence names."},"is_project":0},{"component_id":"144575","previous_id":"144574","original_id":"0","guid":"31A55735A6824BA392DBD0CF52789029","previous_guid":"27EE56C4655F42B6947420BFD5EF2657","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144576","previous_id":"144575","original_id":"0","guid":"ECDABDFF4B064A978CA99E3E01B4FB15","previous_guid":"31A55735A6824BA392DBD0CF52789029","component_type_id":"15","data_id":"309","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir .\/tmp-dir-paired-ids-with-gi\nfor i in $(ls .\/tmp-dir-list2); do\nfor j in $(ls .\/tmp-dir-for-fa); do\n        for x in ${i::12}; do\n        for y in ${j::12}; do\n                if [ \"$x\" == \"$y\" ]; then\n                paste .\/tmp-dir-list2\/$i .\/tmp-dir-for-fa\/$j > .\/tmp-dir-paired-ids-with-gi\/${i}_gi_reference\n                fi\n        done\n        done\ndone\ndone","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139747","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"40E021DEE9DE405187079DCC610C144A","previous_guid":"FB221D6404C840BD953F01332E1D183C","previous_id":"139746","last_modified":"1457560315","components":[{"component_id":"144577","previous_id":0,"original_id":"0","guid":"E2BADD920B674A3BB3AFDF45C5829BD0","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Add &gt; to the start of sequence ids.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Add &gt; to the start of sequence ids."},"is_project":0},{"component_id":"144578","previous_id":"144577","original_id":"0","guid":"17F122E5409443E9A1439D2F680E508A","previous_guid":"E2BADD920B674A3BB3AFDF45C5829BD0","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144579","previous_id":"144578","original_id":"0","guid":"A15F361613B0456796871E6D34116A92","previous_guid":"17F122E5409443E9A1439D2F680E508A","component_type_id":"15","data_id":"310","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir .\/tmp-dir-paired-ids-with-gi-for-fa\nfor file in $(ls .\/tmp-dir-paired-ids-with-gi); do\n        sed 's\/^\/>\/' .\/tmp-dir-paired-ids-with-gi\/$file > .\/tmp-dir-paired-ids-with-gi-for-fa\/${file}_for_fa\ndone","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139748","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"EFAA3C219CB74379BF0FD1FA53A1160B","previous_guid":"40E021DEE9DE405187079DCC610C144A","previous_id":"139747","last_modified":"1457560315","components":[{"component_id":"144580","previous_id":0,"original_id":"0","guid":"2F1CEC0D338644109867047F814FE817","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Convert sequence numbers to gi ID number annotations.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Convert sequence numbers to gi ID number annotations."},"is_project":0},{"component_id":"144581","previous_id":"144580","original_id":"0","guid":"50E657A0532342C3A175C861F8C818E5","previous_guid":"2F1CEC0D338644109867047F814FE817","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144582","previous_id":"144581","original_id":"0","guid":"C20F8675FAAA44139EC9C343FED933E4","previous_guid":"50E657A0532342C3A175C861F8C818E5","component_type_id":"15","data_id":"311","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir tmp-dir-gi-contigs\nfor i in $(ls .\/tmp-dir-paired-ids-with-gi-for-fa); do\nfor j in $(ls .\/clean_R1_fasta_neg_clean_format); do\n        for x in ${i::12}; do\n        for y in ${j::12}; do\n                if [ \"$x\" == \"$y\" ]; then\n                awk 'FNR==NR { a[$1]=$2; next } $1 in a { $1=a[$1] }1' .\/tmp-dir-paired-ids-with-gi-for-fa\/$i .\/clean_R1_fasta_neg_clean_format\/$j > .\/tmp-dir-gi-contigs\/${i}_gi_contigs\n                fi\n        done\n        done\ndone\ndone","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139749","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"1A723C3767224130BFD685C97088B55A","previous_guid":"EFAA3C219CB74379BF0FD1FA53A1160B","previous_id":"139748","last_modified":"1457560315","components":[{"component_id":"144583","previous_id":0,"original_id":"0","guid":"F83F465DD7A648B28443014FE03B12F4","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Convert fasta files to single instead of double lined (this makes for easier removal of contig sequences using grep).","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Convert fasta files to single instead of double lined (this makes for easier removal of contig sequences using grep)."},"is_project":0},{"component_id":"144584","previous_id":"144583","original_id":"0","guid":"E1F3301000394EA198D6FEF11B44D195","previous_guid":"F83F465DD7A648B28443014FE03B12F4","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144585","previous_id":"144584","original_id":"0","guid":"2BD4EF8AAD9F4DCCBD9E868BCE592E06","previous_guid":"E1F3301000394EA198D6FEF11B44D195","component_type_id":"15","data_id":"312","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir .\/tmp-dir-for-neg-removal\nfor file in $(ls .\/tmp-dir-gi-contigs); do\n        paste -s -d' \\n' .\/tmp-dir-gi-contigs\/$file > .\/tmp-dir-for-neg-removal\/${file}\ndone","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139750","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"1C912B424F434923AA4C3CD52C683FFD","previous_guid":"1A723C3767224130BFD685C97088B55A","previous_id":"139749","last_modified":"1457560315","components":[{"component_id":"144586","previous_id":0,"original_id":"0","guid":"07E8AF0042F7404FA797237FFE4122D3","previous_guid":null,"component_type_id":"1","data_id":"0","data":"In the original study, background control samples were collected from each subject at each sampling time point. The contaminants found in the control samples at a specific time point were removed from all other samples from the same subject at that time point.\u00a0The samples will need to be seperated out by patient number so that the background control sequences for each specific patient can correspond to the other samples.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"In the original study, background control samples were collected from each subject at each sampling time point. The contaminants found in the control samples at a specific time point were removed from all other samples from the same subject at that time point.\u00a0The samples will need to be seperated out by patient number so that the background control sequences for each specific patient can correspond to the other samples."},"is_project":0},{"component_id":"144587","previous_id":"144586","original_id":"0","guid":"D464024B7AD540F5BA8B43BAC9D1BDD7","previous_guid":"07E8AF0042F7404FA797237FFE4122D3","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0}]},{"id":"139751","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"287AE9185F2D4750B88FA3145269BADC","previous_guid":"1C912B424F434923AA4C3CD52C683FFD","previous_id":"139750","last_modified":"1457560315","components":[{"component_id":"144588","previous_id":0,"original_id":"0","guid":"5D09A99786AB4E29A30EFC0F8CDDC9F3","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Make tmp dir for cleaned fasta intermediate files.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Make tmp dir for cleaned fasta intermediate files."},"is_project":0},{"component_id":"144589","previous_id":"144588","original_id":"0","guid":"9B092CDECF6742BEB5E159EFD05BA696","previous_guid":"5D09A99786AB4E29A30EFC0F8CDDC9F3","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144590","previous_id":"144589","original_id":"0","guid":"3EA4800146B04BA48519BE771D38E162","previous_guid":"9B092CDECF6742BEB5E159EFD05BA696","component_type_id":"15","data_id":"313","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir .\/tmp-neg-clean","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139752","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"F26E7E3E6D26410BB7AE4191D28C4B77","previous_guid":"287AE9185F2D4750B88FA3145269BADC","previous_id":"139751","last_modified":"1457560315","components":[{"component_id":"144591","previous_id":0,"original_id":"0","guid":"90E9C7334C064F69B29151FE44D094F0","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Remove singletons from the GI reference list. First generate a list of gi numbers with line counts to detect the duplicates.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Remove singletons from the GI reference list. First generate a list of gi numbers with line counts to detect the duplicates."},"is_project":0},{"component_id":"144592","previous_id":"144591","original_id":"0","guid":"CE020C88497F41E88A3A52CF4C4DE894","previous_guid":"90E9C7334C064F69B29151FE44D094F0","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144911","previous_id":"144592","original_id":"0","guid":"86CB4E099B3348BA8D1FAC4F6B876C92","previous_guid":"CE020C88497F41E88A3A52CF4C4DE894","component_type_id":"26","data_id":"10044","data":"","order_id":"2","name":"Note","data_by_id":"1","type_id":"26","source_data":{"annotation_id":"10044","thread_id":"10044","id":"10044","thread_title":"Annotation on step 30 of Script P1: Pre-Processing Samples","uri":"annotation-on-step-30-of-script-p1-preprocessing","thread_uri":"annotation-on-step-30-of-script-p1-preprocessing","step_id":"139752","protocol_uri":"Script-P1-Pre-Processing-Samples-edrba56","protocol_name":"Script P1: Pre-Processing Samples","protocol_name_html":"Script P1: Pre-Processing Samples","annotation":"Do this singleton removal because sometimes reads can be incorrectly called and this can lead to a samll number of sequences from samples being binned in the negative control samples.","thread_text":"Do this singleton removal because sometimes reads can be incorrectly called and this can lead to a samll number of sequences from samples being binned in the negative control samples.","body":"Do this singleton removal because sometimes reads can be incorrectly called and this can lead to a samll number of sequences from samples being binned in the negative control samples.","is_private":"0","public_protocol":"1","can_edit":0,"can_delete":"0","show_name":"0","created_date":"1452619920","created_on":"1452619920","modified_on":"1457560315","last_updated":"1457560315","profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/cpedy2n.jpg","full_name":"Geoffrey Hannigan","affiliation":"Merck Research Labs","username":"geoffrey-hannigan","email":"hanni035@d.umn.edu","pa_useranme":"geoffrey-hannigan","comments":[]},"is_project":0},{"component_id":"144912","previous_id":"144911","original_id":"0","guid":"8F7F0F07AB254BB1BF841AF2DA3F941E","previous_guid":"86CB4E099B3348BA8D1FAC4F6B876C92","component_type_id":"15","data_id":"314","data":null,"order_id":"3","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir .\/tmp-dir-list1-no-singletons\nfor file in $(ls .\/tmp-dir-list1); do\n    sort .\/tmp-dir-list1\/$file | uniq -c | sed \"s\/^\\s*\/\/\" | sed \"s\/\\s\/\\t\/\" | grep -v -P '^1\\t.*' > .\/tmp-dir-list1-no-singletons\/${file}\ndone\nwc -l .\/tmp-dir-list1\/* | sed \"s\/\\.\\\/.*1\\\/\/\/\" | sed \"s\/\\.txt.*$\/\/\" | sed \"s\/^\\s*\/\/\" | sed \"s\/\\s\/\\t\/\" > neg_clean_with_singleton_counts.txt\nwc -l .\/tmp-dir-list1-no-singletons\/* | sed \"s\/\\.\\\/.*\\\/\/\/\" | sed \"s\/\\.txt.*$\/\/\" | sed \"s\/^\\s*\/\/\" | sed \"s\/\\s\/\\t\/\" > neg_clean_without_singleton_counts.txt","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139896","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"DB0A495C4188480F9D6F27564129EBC4","previous_guid":"F26E7E3E6D26410BB7AE4191D28C4B77","previous_id":"139752","last_modified":"1457560315","components":[{"component_id":"144916","previous_id":0,"original_id":"0","guid":"E4BC2534BB83478CAB3089B7D487D24C","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Get singleton list for reference.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Get singleton list for reference."},"is_project":0},{"component_id":"144917","previous_id":"144916","original_id":"0","guid":"E0112236720B4243B1328C5C96C5D0EA","previous_guid":"E4BC2534BB83478CAB3089B7D487D24C","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144918","previous_id":"144917","original_id":"0","guid":"A2EF9A603D364E9EB1FAC847A0BA0EAF","previous_guid":"E0112236720B4243B1328C5C96C5D0EA","component_type_id":"15","data_id":"315","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir .\/tmp-no-singleton-list\nfor file in $(ls .\/tmp-dir-list1-no-singletons); do\n    cut -f 2 .\/tmp-dir-list1-no-singletons\/$file > .\/tmp-no-singleton-list\/${file}\ndone","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139897","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"9EECCECC44FB402EABF9DC83D1BE3A6F","previous_guid":"DB0A495C4188480F9D6F27564129EBC4","previous_id":"139896","last_modified":"1457560315","components":[{"component_id":"144919","previous_id":0,"original_id":"0","guid":"7147C20BF73F48ACB2BAF583344BA412","previous_guid":null,"component_type_id":"1","data_id":"0","data":"For the purposes of perl filtering, it will be easiest to add @@1 to the end of each sequence ID, using sed.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"For the purposes of perl filtering, it will be easiest to add @@1 to the end of each sequence ID, using sed."},"is_project":0},{"component_id":"144920","previous_id":"144919","original_id":"0","guid":"5410992B291E46D6BF61FD6C1F01014B","previous_guid":"7147C20BF73F48ACB2BAF583344BA412","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144921","previous_id":"144920","original_id":"0","guid":"0D42A27CDA984D02904F428638978250","previous_guid":"5410992B291E46D6BF61FD6C1F01014B","component_type_id":"15","data_id":"316","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir .\/tmp-dir-gi-contigs-perl-filter-format\nfor file in $(ls .\/tmp-dir-gi-contigs); do\n    sed '\/\\@\\@\/!s\/$\/\\@\\@1\/' .\/tmp-dir-gi-contigs\/$file | sed '\/>\/!s\/@@1\/\/' > .\/tmp-dir-gi-contigs-perl-filter-format\/${file}\ndone","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139899","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"59B32AFB199D4499AAE0EE09A35F9BDB","previous_guid":"9EECCECC44FB402EABF9DC83D1BE3A6F","previous_id":"139897","last_modified":"1457560315","components":[{"component_id":"144924","previous_id":0,"original_id":"0","guid":"463DCD3B7A3948A19205DBE2B97031E3","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Use grep to get all of the sequence names that contain.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Use grep to get all of the sequence names that contain."},"is_project":0},{"component_id":"144925","previous_id":"144924","original_id":"0","guid":"B0932553C6B4464A9FAA7833724576B9","previous_guid":"463DCD3B7A3948A19205DBE2B97031E3","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144926","previous_id":"144925","original_id":"0","guid":"FB81A3F28F52485DB7033166F742AEEC","previous_guid":"B0932553C6B4464A9FAA7833724576B9","component_type_id":"15","data_id":"317","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"echo Neg Cleaning - Removing negative sequences from fasta files using perl script...\nneg.contig.clean () {\n    # INPUT1 = Patient number to use (ie \"1\")\n    # $27 = SiteID\n    # $30 = Time Point\n    # $1 = Sample ID\n    export PAT=$(awk --assign num=$1 --assign time=$2 '$27 == num && $30 == time { print $1 }' Healthy_human_virome1_mapping.tsv)","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139900","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"86C987A951CC4BDDAC27591FFC00D27A","previous_guid":"59B32AFB199D4499AAE0EE09A35F9BDB","previous_id":"139899","last_modified":"1457560315","components":[{"component_id":"144927","previous_id":0,"original_id":"0","guid":"657AEAEB65704F4CB79A12F16BE35784","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Also set which file name is the negative control sample.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Also set which file name is the negative control sample."},"is_project":0},{"component_id":"144928","previous_id":"144927","original_id":"0","guid":"75A720EC0DB741478F197177D500B512","previous_guid":"657AEAEB65704F4CB79A12F16BE35784","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144929","previous_id":"144928","original_id":"0","guid":"6DAF6FD7042A44B9A0A64F2A17806853","previous_guid":"75A720EC0DB741478F197177D500B512","component_type_id":"26","data_id":"10045","data":"","order_id":"2","name":"Note","data_by_id":"1","type_id":"26","source_data":{"annotation_id":"10045","thread_id":"10045","id":"10045","thread_title":"Annotation on step 34 of Script P1: Pre-Processing Samples","uri":"annotation-on-step-34-of-script-p1-preprocessing","thread_uri":"annotation-on-step-34-of-script-p1-preprocessing","step_id":"139900","protocol_uri":"Script-P1-Pre-Processing-Samples-edrba56","protocol_name":"Script P1: Pre-Processing Samples","protocol_name_html":"Script P1: Pre-Processing Samples","annotation":"Note that in this case an error will return because there is no negative for patient 1 included.","thread_text":"Note that in this case an error will return because there is no negative for patient 1 included.","body":"Note that in this case an error will return because there is no negative for patient 1 included.","is_private":"0","public_protocol":"1","can_edit":0,"can_delete":"0","show_name":"0","created_date":"1452625619","created_on":"1452625619","modified_on":"1457560315","last_updated":"1457560315","profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/cpedy2n.jpg","full_name":"Geoffrey Hannigan","affiliation":"Merck Research Labs","username":"geoffrey-hannigan","email":"hanni035@d.umn.edu","pa_useranme":"geoffrey-hannigan","comments":[]},"is_project":0},{"component_id":"144930","previous_id":"144929","original_id":"0","guid":"F134AE3AC41442E6B3FFE05B0B5CC34E","previous_guid":"6DAF6FD7042A44B9A0A64F2A17806853","component_type_id":"15","data_id":"318","data":null,"order_id":"3","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"export NEG_PAT=$(awk --assign num=$1 --assign time=$2 '$27 == num && $29 == \"Neg\" && $30 == time { print $1 }' Healthy_human_virome1_mapping.tsv)","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139901","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"65E55D0001C74012B1E0A9C8881D92E7","previous_guid":"86C987A951CC4BDDAC27591FFC00D27A","previous_id":"139900","last_modified":"1457560315","components":[{"component_id":"144931","previous_id":0,"original_id":"0","guid":"E9AFB0B43C374916BECCDC3EFD047F61","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Make a directory for the specific patient info.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Make a directory for the specific patient info."},"is_project":0},{"component_id":"144932","previous_id":"144931","original_id":"0","guid":"DB72CDEFCA7D4244909A16A52FA966DA","previous_guid":"E9AFB0B43C374916BECCDC3EFD047F61","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144933","previous_id":"144932","original_id":"0","guid":"D907DE432BB44F44B44EE8CBEAD5817E","previous_guid":"DB72CDEFCA7D4244909A16A52FA966DA","component_type_id":"15","data_id":"319","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir .\/patients\/patient_${1}_${2}","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139902","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"0280BC156E68418B9515926545B73E37","previous_guid":"65E55D0001C74012B1E0A9C8881D92E7","previous_id":"139901","last_modified":"1457560315","components":[{"component_id":"144934","previous_id":0,"original_id":"0","guid":"883DA9FFAE974F30989A1A90D494F910","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Copy the patient files to the patient${1} directory.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Copy the patient files to the patient${1} directory."},"is_project":0},{"component_id":"144935","previous_id":"144934","original_id":"0","guid":"A55EC2A989344828A4AD79F39ED60B34","previous_guid":"883DA9FFAE974F30989A1A90D494F910","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144936","previous_id":"144935","original_id":"0","guid":"DD4E8F4ABC344AA28E097CBF83B4303A","previous_guid":"A55EC2A989344828A4AD79F39ED60B34","component_type_id":"15","data_id":"320","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"echo $PAT | sed 's\/\\ \/\\n\/g' | xargs -I {} --max-procs=1 sh -c \"cp .\/tmp-dir-gi-contigs-perl-filter-format\/{}* .\/patients\/patient_${1}_${2}\"","description":"The sed command is needed to parse out the words found in $PAT which will be separated by spaces","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139903","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"8AEF25ABBC0545B4996B20CD905BDBBB","previous_guid":"0280BC156E68418B9515926545B73E37","previous_id":"139902","last_modified":"1495033561","components":[{"component_id":"144937","previous_id":0,"original_id":"0","guid":"BB24BD78754448B9B30FADC151FFFD41","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Remove all of the fasta sequences that have GI numbers matching their corresponding negative control list of GI numbers.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Remove all of the fasta sequences that have GI numbers matching their corresponding negative control list of GI numbers."},"is_project":0},{"component_id":"144938","previous_id":"144937","original_id":"0","guid":"60412F29AE724BD49BE0AA611C5D8F85","previous_guid":"BB24BD78754448B9B30FADC151FFFD41","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"145182","previous_id":"144938","original_id":"0","guid":"96FE20F2087643B896859925A29F22B8","previous_guid":"60412F29AE724BD49BE0AA611C5D8F85","component_type_id":"7","data_id":"227","data":"https:\/\/figshare.com\/articles\/The_Human_Skin_dsDNA_Virome_Topographical_and_Temporal_Diversity_Genetic_Enrichment_and_Dynamic_Associations_with_the_Host_Microbiome\/1281248","order_id":"2","name":"External Link","data_by_id":"1","type_id":"7","source_data":{"link":"https:\/\/figshare.com\/articles\/The_Human_Skin_dsDNA_Virome_Topographical_and_Temporal_Diversity_Genetic_Enrichment_and_Dynamic_Associations_with_the_Host_Microbiome\/1281248"},"is_project":0},{"component_id":"144948","previous_id":"145182","original_id":"0","guid":"FD2718ADD65E4F56901BEA4E282A2F08","previous_guid":"96FE20F2087643B896859925A29F22B8","component_type_id":"26","data_id":"10046","data":"","order_id":"3","name":"Note","data_by_id":"1","type_id":"26","source_data":{"annotation_id":"10046","thread_id":"10046","id":"10046","thread_title":"Annotation on step 37 of Script P1: Pre-Processing Samples","uri":"annotation-on-step-37-of-script-p1-preprocessing","thread_uri":"annotation-on-step-37-of-script-p1-preprocessing","step_id":"139903","protocol_uri":"Script-P1-Pre-Processing-Samples-edrba56","protocol_name":"Script P1: Pre-Processing Samples","protocol_name_html":"Script P1: Pre-Processing Samples","annotation":"The perl script filter_fasta_file.pl was used above for filtering fasta sequences based on their sequence ID (in the case above, the gi number ID) and can be found in the supplementary information.","thread_text":"The perl script filter_fasta_file.pl was used above for filtering fasta sequences based on their sequence ID (in the case above, the gi number ID) and can be found in the supplementary information.","body":"The perl script filter_fasta_file.pl was used above for filtering fasta sequences based on their sequence ID (in the case above, the gi number ID) and can be found in the supplementary information.","is_private":"0","public_protocol":"1","can_edit":0,"can_delete":"0","show_name":"0","created_date":"1452626694","created_on":"1452626694","modified_on":"1457560315","last_updated":"1457560315","profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/cpedy2n.jpg","full_name":"Geoffrey Hannigan","affiliation":"Merck Research Labs","username":"geoffrey-hannigan","email":"hanni035@d.umn.edu","pa_useranme":"geoffrey-hannigan","comments":[]},"is_project":0},{"component_id":"144939","previous_id":"144948","original_id":"0","guid":"A608ABA776B94D659F5807314D3F252E","previous_guid":"FD2718ADD65E4F56901BEA4E282A2F08","component_type_id":"15","data_id":"321","data":null,"order_id":"4","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"ls .\/patients\/patient_${1}_${2}\/ | xargs -I {} --max-procs=15 sh -c \"perl \/project\/egricelab\/bin\/filter_fasta_file.pl -v -l .\/tmp-no-singleton-list\/${NEG_PAT}* -i .\/patients\/patient_${1}_${2}\/{} -o .\/tmp-neg-clean\/{} -id_regex '.*@@(\\d+)'\"\n    wait\n}","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139904","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"BC1958492B834F548CE281B79EF4620F","previous_guid":"8AEF25ABBC0545B4996B20CD905BDBBB","previous_id":"139903","last_modified":"1457560315","components":[{"component_id":"144940","previous_id":0,"original_id":"0","guid":"DAF8C928BE564B71A652C28F26E2BB56","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Export the above subroutine so that it can be used in xargs for faster running on our server.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Export the above subroutine so that it can be used in xargs for faster running on our server."},"is_project":0},{"component_id":"144941","previous_id":"144940","original_id":"0","guid":"3D3BDA943D6645C7B94B7CC105DEEE50","previous_guid":"DAF8C928BE564B71A652C28F26E2BB56","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144942","previous_id":"144941","original_id":"0","guid":"6015D8D369D748B298A5059F00BF5F01","previous_guid":"3D3BDA943D6645C7B94B7CC105DEEE50","component_type_id":"15","data_id":"322","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"export -f neg.contig.clean","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139905","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"42EAAC5331B2448FA8577D9FD5ADA966","previous_guid":"BC1958492B834F548CE281B79EF4620F","previous_id":"139904","last_modified":"1457560315","components":[{"component_id":"144943","previous_id":0,"original_id":"0","guid":"86289CCC982A4A07B56E7DD193BA0AB2","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Make patients dif for the above function's output.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Make patients dif for the above function's output."},"is_project":0},{"component_id":"144944","previous_id":"144943","original_id":"0","guid":"599BC23464CF48509E92D8EFAECA5231","previous_guid":"86289CCC982A4A07B56E7DD193BA0AB2","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144945","previous_id":"144944","original_id":"0","guid":"4709A2B0810A4D8D9FF6D276F709CB20","previous_guid":"599BC23464CF48509E92D8EFAECA5231","component_type_id":"15","data_id":"323","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir .\/patients","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139906","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"EA6903C44ADC457D9ABA9117BEAEADBF","previous_guid":"42EAAC5331B2448FA8577D9FD5ADA966","previous_id":"139905","last_modified":"1457560315","components":[{"component_id":"144946","previous_id":0,"original_id":"0","guid":"AF5E194B5A804A41B2E87C2DF964462B","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Use a loop of 20 numbers to cover all of the possible patient numbers in the function neg.contig.clean. Some of these will return ERRORS since not all 20 patients are included in the analyses, but this will push through the errors.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Use a loop of 20 numbers to cover all of the possible patient numbers in the function neg.contig.clean. Some of these will return ERRORS since not all 20 patients are included in the analyses, but this will push through the errors."},"is_project":0},{"component_id":"144947","previous_id":"144946","original_id":"0","guid":"05D26EE9B41642C5A099F8ABB088D87F","previous_guid":"AF5E194B5A804A41B2E87C2DF964462B","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144953","previous_id":"144947","original_id":"0","guid":"A812E1BBBCD44B9893840AC47CD5D0A1","previous_guid":"05D26EE9B41642C5A099F8ABB088D87F","component_type_id":"15","data_id":"324","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"seq 1 20 | xargs -I {} --max-procs=20 sh -c 'bsub -n 16 -K -q max_mem64 neg.contig.clean {} 1' & seq 1 20 | xargs -I {} --max-procs=20 sh -c 'bsub -n 16 -K -q max_mem64 neg.contig.clean {} 2' & seq 1 20 | xargs -I {} --max-procs=20 sh -c 'bsub -n 16 -K -q max_mem64 neg.contig.clean {} 3'\nwait","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139909","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"7EC6E5E914FB4711A9DF054C2BEFE540","previous_guid":"EA6903C44ADC457D9ABA9117BEAEADBF","previous_id":"139906","last_modified":"1457560315","components":[{"component_id":"144956","previous_id":0,"original_id":"0","guid":"342725CC3B164124B1B59F3246866E1D","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Return the fasta files back to their standard \"no-@-symbol\" format.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Return the fasta files back to their standard \"no-@-symbol\" format."},"is_project":0},{"component_id":"144957","previous_id":"144956","original_id":"0","guid":"43BADB7B450B4882A1F87A6D5621F62B","previous_guid":"342725CC3B164124B1B59F3246866E1D","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"144958","previous_id":"144957","original_id":"0","guid":"D87E65FBB5864C8097101ABFD1F78AFE","previous_guid":"43BADB7B450B4882A1F87A6D5621F62B","component_type_id":"15","data_id":"325","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir .\/negative_clean_seqs\nfor file in $(ls .\/tmp-neg-clean); do\n    sed 's\/@@.*$\/\/' .\/tmp-neg-clean\/$file | sed 's\/@\/ \/g' > .\/negative_clean_seqs\/${file}\ndone","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139910","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"2064E4DCF57F4989B38093B066142444","previous_guid":"7EC6E5E914FB4711A9DF054C2BEFE540","previous_id":"139909","last_modified":"1457560315","components":[{"component_id":"144959","previous_id":0,"original_id":"0","guid":"6498464CCCE443CAB3136BFB10DA9C8D","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Clean up the negative control cleaned file names.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Clean up the negative control cleaned file names."},"is_project":0},{"component_id":"144960","previous_id":"144959","original_id":"0","guid":"B82B5ED386834D8185C629C9399B645B","previous_guid":"6498464CCCE443CAB3136BFB10DA9C8D","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"145091","previous_id":"144960","original_id":"0","guid":"A5F4D341A9BD460F9DE7E6686767806B","previous_guid":"B82B5ED386834D8185C629C9399B645B","component_type_id":"15","data_id":"326","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"for file in $(ls .\/negative_clean_seqs); do\n    mv \".\/negative_clean_seqs\/${file}\" \".\/negative_clean_seqs\/${file\/%.txt*\/.fa}\"\ndone","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139954","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"80166CE05B1D4A1BA6591C194A79A3DB","previous_guid":"2064E4DCF57F4989B38093B066142444","previous_id":"139910","last_modified":"1457560315","components":[{"component_id":"145094","previous_id":0,"original_id":"0","guid":"9E2CAEFFEA9644F4AC690B784D2DD100","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Visualize the results to see how many sequences were removed and how the virus\/phage annotation changed. Compare the number of sequences before and after negative control cleaning.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Visualize the results to see how many sequences were removed and how the virus\/phage annotation changed. Compare the number of sequences before and after negative control cleaning."},"is_project":0},{"component_id":"145095","previous_id":"145094","original_id":"0","guid":"C47F44BF73DE439484E3CBD2296C0912","previous_guid":"9E2CAEFFEA9644F4AC690B784D2DD100","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"145096","previous_id":"145095","original_id":"0","guid":"5B257AC4889849DAADDEA7C2C3897A32","previous_guid":"C47F44BF73DE439484E3CBD2296C0912","component_type_id":"15","data_id":"327","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"#Before\nwc -l .\/patients\/*\/* | grep -v total | sed s'\/^\\s*\/\/' | sed s'\/\\s\/\\t\/' | sed s'\/\\.\\\/.*\\\/\/\/g' | sed s'\/_R1.*\/\/' | awk '{printf $2\"\\t\"$1\"\\t\"\"before\"\"\\n\"}' | sort | sed '1 s\/^\/neg-clean-seqs\\tneg-clean-names\\tBefore_or_after\\n\/' > sequence_counts_before_neg_clean.txt\n#After\nwc -l .\/negative_clean_seqs\/* | grep -v total | sed s'\/^\\s*\/\/' | sed s'\/\\s\/\\t\/' | sed s'\/\\.\\\/.*\\\/\/\/g' | sed s'\/_R1.*\/\/' | awk '{printf $2\"\\t\"$1\/2\"\\t\"\"after\"\"\\n\"}' | sort > sequence_counts_after_neg_clean.txt","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139955","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"316E3E7F2B824DAD80EE53DDF23999CA","previous_guid":"80166CE05B1D4A1BA6591C194A79A3DB","previous_id":"139954","last_modified":"1457560315","components":[{"component_id":"145097","previous_id":0,"original_id":"0","guid":"099E8AC3BC6547E0AF72DCE49FEB1FB0","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Merge the files for graphing in R","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Merge the files for graphing in R"},"is_project":0},{"component_id":"145098","previous_id":"145097","original_id":"0","guid":"253DD792E0A348739E91530DA67D2402","previous_guid":"099E8AC3BC6547E0AF72DCE49FEB1FB0","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"145099","previous_id":"145098","original_id":"0","guid":"E5D4AC4CE33749428948052B41145022","previous_guid":"253DD792E0A348739E91530DA67D2402","component_type_id":"15","data_id":"328","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"cat sequence_counts_before_neg_clean.txt sequence_counts_after_neg_clean.txt > sequence_counts_neg_clean_for_R.txt","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139956","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"17CC1C602BB547A18282F944F7A30BE2","previous_guid":"316E3E7F2B824DAD80EE53DDF23999CA","previous_id":"139955","last_modified":"1457560315","components":[{"component_id":"145100","previous_id":0,"original_id":"0","guid":"E8537BE38C254973B05F780CA8878718","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Use R to graph the neg clean summary info and get the summary stats.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Use R to graph the neg clean summary info and get the summary stats."},"is_project":0},{"component_id":"145101","previous_id":"145100","original_id":"0","guid":"FDBF07C8903E4B52987DC8D964EF96B8","previous_guid":"E8537BE38C254973B05F780CA8878718","component_type_id":"6","data_id":"0","data":"Negative Control Removal- Virome","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Negative Control Removal- Virome"},"is_project":0},{"component_id":"145102","previous_id":"145101","original_id":"0","guid":"D18B723981D14EEDA02F9DFED6D548C0","previous_guid":"FDBF07C8903E4B52987DC8D964EF96B8","component_type_id":"15","data_id":"329","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir .\/neg_cntrl_clean_summary_stats\nRscript neg_clean_count_before_after_graphing.R \".\/sequence_counts_neg_clean_for_R.txt\" \".\/neg_cntrl_clean_summary_stats\"","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139957","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"6FCF6C9A91CC486FB5FEE01CB04D4278","previous_guid":"17CC1C602BB547A18282F944F7A30BE2","previous_id":"139956","last_modified":"1457560315","components":[{"component_id":"145103","previous_id":0,"original_id":"0","guid":"09B6876CCA8C42A393722B2889D66653","previous_guid":null,"component_type_id":"1","data_id":"0","data":"We then wanted to see how many low-quality and contaminated sequences we removed from our raw sequences. In order to do so, we had to determine how many sequences were in each file.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"We then wanted to see how many low-quality and contaminated sequences we removed from our raw sequences. In order to do so, we had to determine how many sequences were in each file."},"is_project":0},{"component_id":"145104","previous_id":"145103","original_id":"0","guid":"E7452ABFC5A444C19160A6B50F5FAAA5","previous_guid":"09B6876CCA8C42A393722B2889D66653","component_type_id":"6","data_id":"0","data":"Pre-Processing Results","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Pre-Processing Results"},"is_project":0},{"component_id":"145105","previous_id":"145104","original_id":"0","guid":"6B9F2E99789940BFBACCAAEB6B0202BF","previous_guid":"E7452ABFC5A444C19160A6B50F5FAAA5","component_type_id":"26","data_id":"10050","data":"","order_id":"2","name":"Note","data_by_id":"1","type_id":"26","source_data":{"annotation_id":"10050","thread_id":"10050","id":"10050","thread_title":"Annotation on step 46 of Script P1: Pre-Processing Samples","uri":"annotation-on-step-46-of-script-p1-preprocessing","thread_uri":"annotation-on-step-46-of-script-p1-preprocessing","step_id":"139957","protocol_uri":"Script-P1-Pre-Processing-Samples-edrba56","protocol_name":"Script P1: Pre-Processing Samples","protocol_name_html":"Script P1: Pre-Processing Samples","annotation":"For simplicity, we are only looking at the R1 reads.","thread_text":"For simplicity, we are only looking at the R1 reads.","body":"For simplicity, we are only looking at the R1 reads.","is_private":"0","public_protocol":"1","can_edit":0,"can_delete":"0","show_name":"0","created_date":"1452627660","created_on":"1452627660","modified_on":"1457560315","last_updated":"1457560315","profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/cpedy2n.jpg","full_name":"Geoffrey Hannigan","affiliation":"Merck Research Labs","username":"geoffrey-hannigan","email":"hanni035@d.umn.edu","pa_useranme":"geoffrey-hannigan","comments":[]},"is_project":0},{"component_id":"145106","previous_id":"145105","original_id":"0","guid":"BDED11FC96E64B94BB701DF1C18FB919","previous_guid":"6B9F2E99789940BFBACCAAEB6B0202BF","component_type_id":"15","data_id":"330","data":null,"order_id":"3","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir .\/sequence_count_stats","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139958","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"DA1E0A94BB784B2B8063A43E9AC9CF88","previous_guid":"6FCF6C9A91CC486FB5FEE01CB04D4278","previous_id":"139957","last_modified":"1495033561","components":[{"component_id":"145107","previous_id":0,"original_id":"0","guid":"B354442779E44611975C7FC2C8F8E215","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Count total number of raw sequences (and median sequence lengths).","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Count total number of raw sequences (and median sequence lengths)."},"is_project":0},{"component_id":"145108","previous_id":"145107","original_id":"0","guid":"F47A80E1FF8346C198ECC1E727FBB776","previous_guid":"B354442779E44611975C7FC2C8F8E215","component_type_id":"6","data_id":"0","data":"Pre-Processing Results","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Pre-Processing Results"},"is_project":0},{"component_id":"145188","previous_id":"145108","original_id":"0","guid":"85A92F0AAB4142319936FD548468870A","previous_guid":"F47A80E1FF8346C198ECC1E727FBB776","component_type_id":"7","data_id":"227","data":"https:\/\/figshare.com\/articles\/The_Human_Skin_dsDNA_Virome_Topographical_and_Temporal_Diversity_Genetic_Enrichment_and_Dynamic_Associations_with_the_Host_Microbiome\/1281248","order_id":"2","name":"External Link","data_by_id":"1","type_id":"7","source_data":{"link":"https:\/\/figshare.com\/articles\/The_Human_Skin_dsDNA_Virome_Topographical_and_Temporal_Diversity_Genetic_Enrichment_and_Dynamic_Associations_with_the_Host_Microbiome\/1281248"},"is_project":0},{"component_id":"145187","previous_id":"145188","original_id":"0","guid":"F1D0E61FBC3E4BC7801B94B62EB47EA1","previous_guid":"85A92F0AAB4142319936FD548468870A","component_type_id":"26","data_id":"10052","data":"","order_id":"3","name":"Note","data_by_id":"1","type_id":"26","source_data":{"annotation_id":"10052","thread_id":"10052","id":"10052","thread_title":"Annotation on step 47 of Script P1: Pre-Processing Samples","uri":"annotation-on-step-47-of-script-p1-preprocessing","thread_uri":"annotation-on-step-47-of-script-p1-preprocessing","step_id":"139958","protocol_uri":"Script-P1-Pre-Processing-Samples-edrba56","protocol_name":"Script P1: Pre-Processing Samples","protocol_name_html":"Script P1: Pre-Processing Samples","annotation":"The perl script calculate_fastq_median_length.pl is used in this step and can be obtained from the supplementary information.","thread_text":"The perl script calculate_fastq_median_length.pl is used in this step and can be obtained from the supplementary information.","body":"The perl script calculate_fastq_median_length.pl is used in this step and can be obtained from the supplementary information.","is_private":"0","public_protocol":"1","can_edit":0,"can_delete":"0","show_name":"0","created_date":"1452631719","created_on":"1452631719","modified_on":"1457560315","last_updated":"1457560315","profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/cpedy2n.jpg","full_name":"Geoffrey Hannigan","affiliation":"Merck Research Labs","username":"geoffrey-hannigan","email":"hanni035@d.umn.edu","pa_useranme":"geoffrey-hannigan","comments":[]},"is_project":0},{"component_id":"145109","previous_id":"145187","original_id":"0","guid":"38DA550E78C342108D48AC6EB17AFB5D","previous_guid":"F1D0E61FBC3E4BC7801B94B62EB47EA1","component_type_id":"15","data_id":"331","data":null,"order_id":"4","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"for file in .\/raw_fastq\/*_R1.fastq; do \n    name=`echo \"$file\" | sed 's\/\\.\\\/raw_fastq\\\/\/\/g' | sed 's\/_R1\\.fastq\/\/g'`\n\tcount=`cat $file | wc -l | awk '{print $1\/4}'`\n\techo -e \"$name\\t$count\" >> .\/sequence_count_stats\/raw_sequence_counts.tsv\n\tperl calculate_fastq_median_length.pl $file >> .\/sequence_count_stats\/raw_median_seq_length.tsv\ndone","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139959","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"4101BA06DD164364925E5AE0DC6F4F39","previous_guid":"DA1E0A94BB784B2B8063A43E9AC9CF88","previous_id":"139958","last_modified":"1457560315","components":[{"component_id":"145110","previous_id":0,"original_id":"0","guid":"0E5D19DE358742AAA1609C87B572EE09","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Count adapter trimmed (cutadapt) and quality trimmed (fastx) sequences (and median sequence lengths).","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Count adapter trimmed (cutadapt) and quality trimmed (fastx) sequences (and median sequence lengths)."},"is_project":0},{"component_id":"145111","previous_id":"145110","original_id":"0","guid":"2C2B8468BB5F4FF695C39831F31DA610","previous_guid":"0E5D19DE358742AAA1609C87B572EE09","component_type_id":"6","data_id":"0","data":"Pre-Processing Results","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Pre-Processing Results"},"is_project":0},{"component_id":"145112","previous_id":"145111","original_id":"0","guid":"B4DBD37B9D0549BEA62F642E8735B43F","previous_guid":"2C2B8468BB5F4FF695C39831F31DA610","component_type_id":"15","data_id":"332","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"for file in .\/trimmed_fastq\/*_R1.fastq; do \n    name=`echo \"$file\" | sed 's\/\\.\\\/trimmed_fastq\\\/\/\/g' | sed 's\/_R1\\.fastq\/\/g'`\n\tcount=`cat $file | wc -l | awk '{print $1\/4}'`\n\techo -e \"$name\\t$count\" >> .\/sequence_count_stats\/trimmed_sequence_counts.tsv\n\tperl calculate_fastq_median_length.pl $file >> .\/sequence_count_stats\/trimmed_median_seq_length.tsv\ndone","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139960","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"B68CC82880E849B081F1FA59A2229802","previous_guid":"4101BA06DD164364925E5AE0DC6F4F39","previous_id":"139959","last_modified":"1457560315","components":[{"component_id":"145113","previous_id":0,"original_id":"0","guid":"ED3AE494492140E187914FB94BA51F2C","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Count human decontaminated sequences (and median sequences lengths).","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Count human decontaminated sequences (and median sequences lengths)."},"is_project":0},{"component_id":"145114","previous_id":"145113","original_id":"0","guid":"33A8A44F640B4FB69FB074ED48E55DF6","previous_guid":"ED3AE494492140E187914FB94BA51F2C","component_type_id":"6","data_id":"0","data":"Pre-Processing Results","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Pre-Processing Results"},"is_project":0},{"component_id":"145115","previous_id":"145114","original_id":"0","guid":"F975CE2AFDA1473C992359F2CEC358F9","previous_guid":"33A8A44F640B4FB69FB074ED48E55DF6","component_type_id":"15","data_id":"333","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"for file in .\/clean_fastq\/*_R1.fastq; do \n    name=`echo \"$file\" | sed 's\/\\.\\\/clean_fastq\\\/\/\/g' | sed 's\/_R1\\.fastq\/\/g'`\n\tcount=`cat $file | wc -l | awk '{print $1\/4}'`\n\techo -e \"$name\\t$count\" >> .\/sequence_count_stats\/human_deconseq_sequence_counts.tsv\n\tperl calculate_fastq_median_length.pl $file >> .\/sequence_count_stats\/human_cleaned_median_seq_length.tsv\ndone","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139961","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"39939FE488574B00B381103C0C3E649B","previous_guid":"B68CC82880E849B081F1FA59A2229802","previous_id":"139960","last_modified":"1457560315","components":[{"component_id":"145116","previous_id":0,"original_id":"0","guid":"D965294D3CAE40FB8FC411DEE67FF525","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Count PhiX decontaminated sequences (and median sequence lengths) (whole metagenome only).","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Count PhiX decontaminated sequences (and median sequence lengths) (whole metagenome only)."},"is_project":0},{"component_id":"145117","previous_id":"145116","original_id":"0","guid":"50F487A8834B49F797A37C0AEF8710E4","previous_guid":"D965294D3CAE40FB8FC411DEE67FF525","component_type_id":"6","data_id":"0","data":"Pre-Processing Results","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Pre-Processing Results"},"is_project":0},{"component_id":"145118","previous_id":"145117","original_id":"0","guid":"BD0138E85EF5424C8DF0DB670FA09CA0","previous_guid":"50F487A8834B49F797A37C0AEF8710E4","component_type_id":"15","data_id":"334","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"for file in .\/clean_phix_fastq\/*_R1.fastq; do \n    name=`echo \"$file\" | sed 's\/\\.\\\/clean_phix_fastq\\\/\/\/g' | sed 's\/_R1\\.fastq\/\/g'`\n\tcount=`cat $file | wc -l | awk '{print $1\/4}'`\n\techo -e \"$name\\t$count\" >> .\/sequence_count_stats\/phix_clean_sequence_counts.tsv\n\tperl calculate_fastq_median_length.pl $file >> .\/sequence_count_stats\/clean_phix_median_seq_length.tsv\ndone","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139962","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"A2ECF9DCA3314E5FAF688F3F0CE52A65","previous_guid":"39939FE488574B00B381103C0C3E649B","previous_id":"139961","last_modified":"1495033561","components":[{"component_id":"145119","previous_id":0,"original_id":"0","guid":"E0140A8B10F84FE798F9EE6D5B0C72BA","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Count Negative Control decontaminated sequences (and median sequence lengths) (virome only).","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Count Negative Control decontaminated sequences (and median sequence lengths) (virome only)."},"is_project":0},{"component_id":"145120","previous_id":"145119","original_id":"0","guid":"4C50DB5D06204915B5BB3D689121784B","previous_guid":"E0140A8B10F84FE798F9EE6D5B0C72BA","component_type_id":"6","data_id":"0","data":"Pre-Processing Results","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Pre-Processing Results"},"is_project":0},{"component_id":"145194","previous_id":"145120","original_id":"0","guid":"6139210CF93942358D67737258D59324","previous_guid":"4C50DB5D06204915B5BB3D689121784B","component_type_id":"7","data_id":"227","data":"https:\/\/figshare.com\/articles\/The_Human_Skin_dsDNA_Virome_Topographical_and_Temporal_Diversity_Genetic_Enrichment_and_Dynamic_Associations_with_the_Host_Microbiome\/1281248","order_id":"2","name":"External Link","data_by_id":"1","type_id":"7","source_data":{"link":"https:\/\/figshare.com\/articles\/The_Human_Skin_dsDNA_Virome_Topographical_and_Temporal_Diversity_Genetic_Enrichment_and_Dynamic_Associations_with_the_Host_Microbiome\/1281248"},"is_project":0},{"component_id":"145193","previous_id":"145194","original_id":"0","guid":"9C887EF8CC044FF9B072EB5C4A64934D","previous_guid":"6139210CF93942358D67737258D59324","component_type_id":"26","data_id":"10053","data":"","order_id":"3","name":"Note","data_by_id":"1","type_id":"26","source_data":{"annotation_id":"10053","thread_id":"10053","id":"10053","thread_title":"Annotation on step 51 of Script P1: Pre-Processing Samples","uri":"annotation-on-step-51-of-script-p1-preprocessing","thread_uri":"annotation-on-step-51-of-script-p1-preprocessing","step_id":"139962","protocol_uri":"Script-P1-Pre-Processing-Samples-edrba56","protocol_name":"Script P1: Pre-Processing Samples","protocol_name_html":"Script P1: Pre-Processing Samples","annotation":"The perl script calculate_fasta_median_length.pl is used in this step and is obtainable from the supplementary information.","thread_text":"The perl script calculate_fasta_median_length.pl is used in this step and is obtainable from the supplementary information.","body":"The perl script calculate_fasta_median_length.pl is used in this step and is obtainable from the supplementary information.","is_private":"0","public_protocol":"1","can_edit":0,"can_delete":"0","show_name":"0","created_date":"1452631845","created_on":"1452631845","modified_on":"1457560315","last_updated":"1457560315","profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/cpedy2n.jpg","full_name":"Geoffrey Hannigan","affiliation":"Merck Research Labs","username":"geoffrey-hannigan","email":"hanni035@d.umn.edu","pa_useranme":"geoffrey-hannigan","comments":[]},"is_project":0},{"component_id":"145121","previous_id":"145193","original_id":"0","guid":"17FA0CC17D5C4B41982F8EF274914783","previous_guid":"9C887EF8CC044FF9B072EB5C4A64934D","component_type_id":"15","data_id":"335","data":null,"order_id":"4","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"for file in .\/negative_clean_seqs\/*_R1.fa; do \n    name=`echo \"$file\" | sed 's\/\\.\\\/negative_clean_seqs\\\/\/\/g' | sed 's\/_R1\\.fa\/\/g'`\n\tcount=`cat $file | wc -l | awk '{print $1\/2}'`\n\techo -e \"$name\\t$count\" >> .\/sequence_count_stats\/negative_clean_sequence_counts.tsv\n\tperl calculate_fasta_median_length.pl $file >> .\/sequence_count_stats\/negative_clean_sequence_length_medians.tsv\ndone","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139963","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"E9E08617B69D4298BC9795BA12452A4D","previous_guid":"A2ECF9DCA3314E5FAF688F3F0CE52A65","previous_id":"139962","last_modified":"1457560315","components":[{"component_id":"145122","previous_id":0,"original_id":"0","guid":"72623116A40B48B7806342265192D433","previous_guid":null,"component_type_id":"1","data_id":"0","data":"We further validated our database quality by comparing the levels of 16S rRNA sequences between the virome and whole metagenome, as well as comparing the number of reads matching from the virome to the whole metagenome, and vice versa. First we quantified the levels of 16S rRNA matching sequences.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"We further validated our database quality by comparing the levels of 16S rRNA sequences between the virome and whole metagenome, as well as comparing the number of reads matching from the virome to the whole metagenome, and vice versa. First we quantified the levels of 16S rRNA matching sequences."},"is_project":0},{"component_id":"145123","previous_id":"145122","original_id":"0","guid":"22738988ABD842F2A8DB901E62A13B6D","previous_guid":"72623116A40B48B7806342265192D433","component_type_id":"6","data_id":"0","data":"Pre-Processing Results","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Pre-Processing Results"},"is_project":0},{"component_id":"145124","previous_id":"145123","original_id":"0","guid":"6FC5578D1616467DA8D70C71A96AA798","previous_guid":"22738988ABD842F2A8DB901E62A13B6D","component_type_id":"15","data_id":"336","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir .\/estimated_contamination_ribosome_hits\nmkdir .\/estimated_contamination_ribosome_hits\/whole_metagenome_subsampled_10k\nmkdir .\/estimated_contamination_ribosome_hits\/whole_metagenome_subsampled_10k_fasta\nmkdir .\/estimated_contamination_ribosome_hits\/virome_subsampled_10k","description":"Make dir for output","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139964","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"CE5845DE6E0645F1969C2D8D3D90553B","previous_guid":"E9E08617B69D4298BC9795BA12452A4D","previous_id":"139963","last_modified":"1457560315","components":[{"component_id":"145125","previous_id":0,"original_id":"0","guid":"1401AE5032274BFEAD8ABBCA48B0A557","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Run blastn to attempt to quantify level of contamination using gg16SrRNA database.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Run blastn to attempt to quantify level of contamination using gg16SrRNA database."},"is_project":0},{"component_id":"145126","previous_id":"145125","original_id":"0","guid":"A30DAD1820AC439FB99DAA7BE5FDDBC9","previous_guid":"1401AE5032274BFEAD8ABBCA48B0A557","component_type_id":"6","data_id":"0","data":"Pre-Processing Results","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Pre-Processing Results"},"is_project":0}]},{"id":"139965","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"DE301C138BCF428EB6A350A39E46E5AE","previous_guid":"CE5845DE6E0645F1969C2D8D3D90553B","previous_id":"139964","last_modified":"1457560315","components":[{"component_id":"145127","previous_id":0,"original_id":"0","guid":"39E523819BA14632A2B441C3EF22BB6E","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Subsample files.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Subsample files."},"is_project":0},{"component_id":"145128","previous_id":"145127","original_id":"0","guid":"42F078618133482AB1D0716793C4A4D7","previous_guid":"39E523819BA14632A2B441C3EF22BB6E","component_type_id":"6","data_id":"0","data":"Pre-Processing Results","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Pre-Processing Results"},"is_project":0},{"component_id":"145129","previous_id":"145128","original_id":"0","guid":"36B3F1E6CA5A415883DB372DD33944FA","previous_guid":"42F078618133482AB1D0716793C4A4D7","component_type_id":"15","data_id":"337","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"for file in $(ls \/project\/egricelab\/SkinMetVirome_tmp_files\/clean_phix_fastq\/*_R1* | sed 's\/.*\\\/\/\/g'); do\n    NAME=$(echo ${file} | sed 's\/\\.fastq\/\/')\n    echo Subsampling ${NAME}...\n    \/project\/egricelab\/meiselj_software\/idba_ud-1.0.9\/bin\/fq2fa \/project\/egricelab\/SkinMetVirome_tmp_files\/clean_phix_fastq\/${NAME}.fastq .\/estimated_contamination_ribosome_hits\/whole_metagenome_subsampled_10k_fasta\/${NAME}.fasta\n    \/project\/egricelab\/meiselj_software\/seqtk-master\/seqtk sample .\/estimated_contamination_ribosome_hits\/whole_metagenome_subsampled_10k_fasta\/${NAME}.fasta 10000 > .\/estimated_contamination_ribosome_hits\/whole_metagenome_subsampled_10k\/${NAME}.fasta\ndone\nfor file in $(ls .\/negative_clean_seqs); do\n\techo Subsampling ${file}...\n    \/project\/egricelab\/meiselj_software\/seqtk-master\/seqtk sample .\/negative_clean_seqs\/$file 10000 > .\/estimated_contamination_ribosome_hits\/virome_subsampled_10k\/${file}\ndone","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139966","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"D9497A0695004B3BA806113AC2A83C5B","previous_guid":"DE301C138BCF428EB6A350A39E46E5AE","previous_id":"139965","last_modified":"1457560315","components":[{"component_id":"145130","previous_id":0,"original_id":"0","guid":"BF5DDB9EBDA440CC8CA6759C3E7F7EE1","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Move the blastx output to its own directory.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Move the blastx output to its own directory."},"is_project":0},{"component_id":"145131","previous_id":"145130","original_id":"0","guid":"2E1E2735DA834B27B7DBC55B231F9DF9","previous_guid":"BF5DDB9EBDA440CC8CA6759C3E7F7EE1","component_type_id":"6","data_id":"0","data":"Pre-Processing Results","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Pre-Processing Results"},"is_project":0},{"component_id":"145132","previous_id":"145131","original_id":"0","guid":"D7752383E391488BAC0F86E8B7D3D5B8","previous_guid":"2E1E2735DA834B27B7DBC55B231F9DF9","component_type_id":"15","data_id":"338","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"echo Performing blastx for virome...\nmkdir .\/estimated_contamination_ribosome_hits\/green_genes_blastx_hits\n\nfor file in $(ls .\/estimated_contamination_ribosome_hits\/virome_subsampled_10k); do\n\tblastn -query .\/estimated_contamination_ribosome_hits\/virome_subsampled_10k\/${file} -out .\/estimated_contamination_ribosome_hits\/green_genes_blastx_hits\/${file} -db \/project\/egricelab\/ghanni_software\/ribosome_ref_test\/green_genes_for_virus_db -outfmt 6 -num_threads 2 -max_target_seqs 1 -evalue 1e-5\ndone","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139967","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"A7F65761DE8647FA982F40FAB732DAA8","previous_guid":"D9497A0695004B3BA806113AC2A83C5B","previous_id":"139966","last_modified":"1457560315","components":[{"component_id":"145133","previous_id":0,"original_id":"0","guid":"720A37DACB4B434CA7E35219C50AC7F8","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Get the numbers of hits for the virome samples. First get the blastx hits for the virome against the greengenes database.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Get the numbers of hits for the virome samples. First get the blastx hits for the virome against the greengenes database."},"is_project":0},{"component_id":"145134","previous_id":"145133","original_id":"0","guid":"C15DEB5948194269BF1FAA0ECC6AA980","previous_guid":"720A37DACB4B434CA7E35219C50AC7F8","component_type_id":"6","data_id":"0","data":"Pre-Processing Results","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Pre-Processing Results"},"is_project":0},{"component_id":"145135","previous_id":"145134","original_id":"0","guid":"74475FD884874BF780CE56E7FACB4942","previous_guid":"C15DEB5948194269BF1FAA0ECC6AA980","component_type_id":"15","data_id":"339","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"wc -l .\/estimated_contamination_ribosome_hits\/green_genes_blastx_hits\/* | sed 's\/\\.\\\/estimated_contamination_ribosome_hits\\\/green_genes_blastx_hits\\\/\/\/' | sed 's\/_R1\\.fa\/\/' | grep -v total | sed 's\/^\\s*\/\/' | sed 's\/\\s\/\\t\/g' | sed 's\/$\/\\tVirome_16S_hits\/' > .\/estimated_contamination_ribosome_hits\/virome_blastx_hits.tsv","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139968","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"54094F0A041246CFA05388B4C3A70923","previous_guid":"A7F65761DE8647FA982F40FAB732DAA8","previous_id":"139967","last_modified":"1457560315","components":[{"component_id":"145136","previous_id":0,"original_id":"0","guid":"53334562437B4E4AB0B6778B13444239","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Get the number of sequences in each file as well.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Get the number of sequences in each file as well."},"is_project":0},{"component_id":"145137","previous_id":"145136","original_id":"0","guid":"B86D9A8E965843C58711DACBEC5AE795","previous_guid":"53334562437B4E4AB0B6778B13444239","component_type_id":"6","data_id":"0","data":"Pre-Processing Results","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Pre-Processing Results"},"is_project":0},{"component_id":"145138","previous_id":"145137","original_id":"0","guid":"85E2054D748D485281B2A7733366FE08","previous_guid":"B86D9A8E965843C58711DACBEC5AE795","component_type_id":"15","data_id":"340","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"wc -l .\/estimated_contamination_ribosome_hits\/virome_subsampled_10k\/* | sed 's\/\\.\\\/HUMAnN_output\\\/neg_clean_fasta_subsampled_10k\\\/\/\/' | sed 's\/_R1\\.fa\/\/' | grep -v total | sed 's\/^\\s*\/\/' | sed 's\/\\s\/\\t\/g' | awk '{ print $1\/2\"\\t\"$2 }' > .\/estimated_contamination_ribosome_hits\/virome_subsampled_numbers.tsv","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139969","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"278CC0DD09474D768AA4F38A0CD77CA4","previous_guid":"54094F0A041246CFA05388B4C3A70923","previous_id":"139968","last_modified":"1457560315","components":[{"component_id":"145139","previous_id":0,"original_id":"0","guid":"036BCFF4DBF4463780DE3BE6E75CEDB2","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Paste together the files.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Paste together the files."},"is_project":0},{"component_id":"145140","previous_id":"145139","original_id":"0","guid":"934CD6DCFD174891BAE7C4AE6550ACD9","previous_guid":"036BCFF4DBF4463780DE3BE6E75CEDB2","component_type_id":"6","data_id":"0","data":"Pre-Processing Results","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Pre-Processing Results"},"is_project":0},{"component_id":"145141","previous_id":"145140","original_id":"0","guid":"6EA73F39D4B441608E299034CC0309AB","previous_guid":"934CD6DCFD174891BAE7C4AE6550ACD9","component_type_id":"15","data_id":"341","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"paste .\/estimated_contamination_ribosome_hits\/virome_blastx_hits.tsv .\/estimated_contamination_ribosome_hits\/virome_subsampled_numbers.tsv > .\/estimated_contamination_ribosome_hits\/virome_contamination_info.tsv","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139970","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"002834AB2B194463831DE321402B5640","previous_guid":"278CC0DD09474D768AA4F38A0CD77CA4","previous_id":"139969","last_modified":"1457560315","components":[{"component_id":"145142","previous_id":0,"original_id":"0","guid":"50091C958E3C46D08EAF57F559AF08B6","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Run the same blast on the whole metagenome samples for a comparison.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Run the same blast on the whole metagenome samples for a comparison."},"is_project":0},{"component_id":"145143","previous_id":"145142","original_id":"0","guid":"D05C8153FA7D424F93EC757A0C378A23","previous_guid":"50091C958E3C46D08EAF57F559AF08B6","component_type_id":"6","data_id":"0","data":"Pre-Processing Results","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Pre-Processing Results"},"is_project":0},{"component_id":"145144","previous_id":"145143","original_id":"0","guid":"888C54B19CF24C17ADA98CA2EF5CE797","previous_guid":"D05C8153FA7D424F93EC757A0C378A23","component_type_id":"15","data_id":"342","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"echo Estimating bacterial levels in whole metagenome using blastx against the gg16SrRNA database...\nmkdir .\/estimated_contamination_ribosome_hits\/green_genes_blastx_hits_whole_metagenome\nfor file in $(ls .\/estimated_contamination_ribosome_hits\/whole_metagenome_subsampled_10k); do\n\tblastn -query .\/estimated_contamination_ribosome_hits\/whole_metagenome_subsampled_10k\/${file} -out .\/estimated_contamination_ribosome_hits\/green_genes_blastx_hits_whole_metagenome\/${file} -db \/project\/egricelab\/ghanni_software\/ribosome_ref_test\/green_genes_for_virus_db -outfmt 6 -num_threads 2 -max_target_seqs 1 -evalue 1e-5\ndone","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139971","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"3793153BCD3A4614A79644BCDC24E26A","previous_guid":"002834AB2B194463831DE321402B5640","previous_id":"139970","last_modified":"1457560315","components":[{"component_id":"145145","previous_id":0,"original_id":"0","guid":"D3E155BAEF294BB19D747BBF3D60DFEA","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Format these numbers into a table for R. First get together a list of the blastx hits against green genes.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Format these numbers into a table for R. First get together a list of the blastx hits against green genes."},"is_project":0},{"component_id":"145146","previous_id":"145145","original_id":"0","guid":"DA6C0E5E6AD44BF297CE6A59FBB39F30","previous_guid":"D3E155BAEF294BB19D747BBF3D60DFEA","component_type_id":"6","data_id":"0","data":"Pre-Processing Results","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Pre-Processing Results"},"is_project":0},{"component_id":"145147","previous_id":"145146","original_id":"0","guid":"A87E23EB429B482BBF56B407D5F3857F","previous_guid":"DA6C0E5E6AD44BF297CE6A59FBB39F30","component_type_id":"15","data_id":"343","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"wc -l .\/estimated_contamination_ribosome_hits\/green_genes_blastx_hits_whole_metagenome\/* | sed 's\/\\.\\\/estimated_contamination_ribosome_hits\\\/green_genes_blastx_hits_whole_metagenome\\\/\/\/g' | sed 's\/_R1_subsampled\\.fa\/\/g' | grep -v total | sed 's\/^\\s*\/\/' | sed 's\/\\s\/\\t\/g' | sed 's\/$\/\\tWhole_Metagenome_16S_hits\/' > .\/estimated_contamination_ribosome_hits\/whole_metagenome_blastx_hits.tsv","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139972","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"6C61F98C11A84208B55D94A70A08801E","previous_guid":"3793153BCD3A4614A79644BCDC24E26A","previous_id":"139971","last_modified":"1457560315","components":[{"component_id":"145148","previous_id":0,"original_id":"0","guid":"38C604A05177443385F94AAEB35BFC7C","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Make list of the total number of sequences.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Make list of the total number of sequences."},"is_project":0},{"component_id":"145149","previous_id":"145148","original_id":"0","guid":"FBA6381673044D99B80C4F619826D377","previous_guid":"38C604A05177443385F94AAEB35BFC7C","component_type_id":"6","data_id":"0","data":"Pre-Processing Results","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Pre-Processing Results"},"is_project":0},{"component_id":"145150","previous_id":"145149","original_id":"0","guid":"E42DAC63FBAC49BEB0A762A4839563E4","previous_guid":"FBA6381673044D99B80C4F619826D377","component_type_id":"15","data_id":"344","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"wc -l .\/estimated_contamination_ribosome_hits\/whole_metagenome_subsampled_10k\/* | sed 's\/\\\/project\\\/egricelab\\\/metagenome_subsampled_5000\\\/\/\/' | sed 's\/_R1_subsampled\\.fa\/\/' | grep -v total | sed 's\/^\\s*\/\/' | sed 's\/\\s\/\\t\/g' | awk '{ print $1\/2\"\\t\"$2 }' > .\/estimated_contamination_ribosome_hits\/whole_metagenome_subsampled_numbers.tsv","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139973","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"F0D68A479EE544ED877BFBFCDCE15822","previous_guid":"6C61F98C11A84208B55D94A70A08801E","previous_id":"139972","last_modified":"1457560315","components":[{"component_id":"145151","previous_id":0,"original_id":"0","guid":"6E731119D2004220B79889A8746B02B0","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Paste together these files.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Paste together these files."},"is_project":0},{"component_id":"145152","previous_id":"145151","original_id":"0","guid":"BD34EEE20AE543A98B7D700538A736B1","previous_guid":"6E731119D2004220B79889A8746B02B0","component_type_id":"6","data_id":"0","data":"Pre-Processing Results","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Pre-Processing Results"},"is_project":0},{"component_id":"145153","previous_id":"145152","original_id":"0","guid":"DA24A3974BB4492DBE444CF226F44D92","previous_guid":"BD34EEE20AE543A98B7D700538A736B1","component_type_id":"15","data_id":"345","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"paste .\/estimated_contamination_ribosome_hits\/whole_metagenome_blastx_hits.tsv .\/estimated_contamination_ribosome_hits\/whole_metagenome_subsampled_numbers.tsv > .\/estimated_contamination_ribosome_hits\/whole_metagenome_contamination_info.tsv","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139974","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"8230E6A50FC147898232E102F25692B1","previous_guid":"F0D68A479EE544ED877BFBFCDCE15822","previous_id":"139973","last_modified":"1457560315","components":[{"component_id":"145154","previous_id":0,"original_id":"0","guid":"20882DE2230C4E5DB0C5EE3ECA6350D6","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Cat together the files for input into R.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Cat together the files for input into R."},"is_project":0},{"component_id":"145155","previous_id":"145154","original_id":"0","guid":"B0A874E298A44C4CAAFBC2842033146D","previous_guid":"20882DE2230C4E5DB0C5EE3ECA6350D6","component_type_id":"6","data_id":"0","data":"Pre-Processing Results","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Pre-Processing Results"},"is_project":0},{"component_id":"145156","previous_id":"145155","original_id":"0","guid":"5A97C0CBC81B42E5A2AB8A058BC7BD30","previous_guid":"B0A874E298A44C4CAAFBC2842033146D","component_type_id":"15","data_id":"346","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"cat .\/estimated_contamination_ribosome_hits\/virome_contamination_info.tsv .\/estimated_contamination_ribosome_hits\/whole_metagenome_contamination_info.tsv > .\/estimated_contamination_ribosome_hits\/total_contamination_info_for_R.tsv","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139975","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"724846C88127445B83145A4E61227D85","previous_guid":"8230E6A50FC147898232E102F25692B1","previous_id":"139974","last_modified":"1457560315","components":[{"component_id":"145157","previous_id":0,"original_id":"0","guid":"F69B433E4C764F54954940F72CA69AC5","previous_guid":null,"component_type_id":"1","data_id":"0","data":"We also quantified the number of reads mapping from one overall dataset to the other corresponding dataset (virome to whole metagenome and vice versa).","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"We also quantified the number of reads mapping from one overall dataset to the other corresponding dataset (virome to whole metagenome and vice versa)."},"is_project":0},{"component_id":"145158","previous_id":"145157","original_id":"0","guid":"5BAF111FD9B94ED4AF66B40E94F482B4","previous_guid":"F69B433E4C764F54954940F72CA69AC5","component_type_id":"6","data_id":"0","data":"Pre-Processing Results","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Pre-Processing Results"},"is_project":0},{"component_id":"145159","previous_id":"145158","original_id":"0","guid":"2AB19EA3A1964C2A86178714FA98C801","previous_guid":"5BAF111FD9B94ED4AF66B40E94F482B4","component_type_id":"15","data_id":"347","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"mkdir .\/virome_whole_metagenome_blast\nmkdir .\/virome_whole_metagenome_blast\/blastdb_whole_metagenome\nmkdir .\/virome_whole_metagenome_blast\/blastn_virome_results\nmkdir .\/virome_whole_metagenome_blast\/blastdb_virome\nmkdir .\/virome_whole_metagenome_blast\/blastn_whole_metagenome_results\nmkdir .\/virome_whole_metagenome_blast\/whole_metagenome_subsampled_50k\nmkdir .\/virome_whole_metagenome_blast\/virome_subsampled_50k","description":"Make directories for output.","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139976","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"BC1ADA98858E4828B286500BCB6D2CDF","previous_guid":"724846C88127445B83145A4E61227D85","previous_id":"139975","last_modified":"1457560315","components":[{"component_id":"145160","previous_id":0,"original_id":"0","guid":"373418940C4B4407BA7C620F52DA80F2","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Subsample files.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Subsample files."},"is_project":0},{"component_id":"145161","previous_id":"145160","original_id":"0","guid":"3263427581C346A3BEB908901DCA9F51","previous_guid":"373418940C4B4407BA7C620F52DA80F2","component_type_id":"6","data_id":"0","data":"Pre-Processing Results","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Pre-Processing Results"},"is_project":0},{"component_id":"145162","previous_id":"145161","original_id":"0","guid":"10114A20C3C347609465C0EF7A715E43","previous_guid":"3263427581C346A3BEB908901DCA9F51","component_type_id":"15","data_id":"348","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"for file in $(ls .\/clean_phix_fastq\/*_R1* | sed 's\/.*\\\/\/\/g'); do\n    NAME=$(echo ${file} | sed 's\/\\.fastq\/\/')\n    echo Subsampling ${NAME}...\n    idba_ud-1.0.9\/bin\/fq2fa .\/clean_phix_fastq\/${NAME}.fastq .\/estimated_contamination_ribosome_hits\/whole_metagenome_subsampled_10k_fasta\/${NAME}.fasta\n    seqtk sample .\/estimated_contamination_ribosome_hits\/whole_metagenome_subsampled_10k_fasta\/${NAME}.fasta 50000 > .\/virome_whole_metagenome_blast\/whole_metagenome_subsampled_50k\/${NAME}.fasta\ndone\nfor file in $(ls .\/negative_clean_seqs); do\n    echo Subsampling ${file}...\n    seqtk sample .\/negative_clean_seqs\/${file} 50000 > .\/virome_whole_metagenome_blast\/virome_subsampled_50k\/${file}\ndone","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139977","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"6982B8A7C2034FB0A9ADC3D7CA8AEB77","previous_guid":"BC1ADA98858E4828B286500BCB6D2CDF","previous_id":"139976","last_modified":"1457560315","components":[{"component_id":"145163","previous_id":0,"original_id":"0","guid":"BBE4ABDA7B90420FB37414BA1608385A","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Generate blastn reference from whole metagenome samples and perform blastn of virome reads against database.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Generate blastn reference from whole metagenome samples and perform blastn of virome reads against database."},"is_project":0},{"component_id":"145164","previous_id":"145163","original_id":"0","guid":"88F687D51EC24D9F81255D30B395403E","previous_guid":"BBE4ABDA7B90420FB37414BA1608385A","component_type_id":"6","data_id":"0","data":"Pre-Processing Results","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Pre-Processing Results"},"is_project":0},{"component_id":"145165","previous_id":"145164","original_id":"0","guid":"B5C7280F8BE94B16B34DA3DD0E36F1FF","previous_guid":"88F687D51EC24D9F81255D30B395403E","component_type_id":"15","data_id":"349","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"run_blastn_virome_to_wm_and_back () {\n    if [ -f \/etc\/profile.d\/modules.sh ]; then\n        source \/etc\/profile.d\/modules.sh\n    fi\n    module load ncbi-blast-2.2.0\n\texport NAME=$(echo $1 | sed 's\/_R1\\.fasta\/\/g')\n\techo Sample ID is ${NAME}\n\tmakeblastdb -dbtype nucl -in .\/virome_whole_metagenome_blast\/whole_metagenome_subsampled_50k\/$1 -out .\/virome_whole_metagenome_blast\/blastdb_whole_metagenome\/${NAME}_db","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139978","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"8848A6DB27514D23970031BC912D2F87","previous_guid":"6982B8A7C2034FB0A9ADC3D7CA8AEB77","previous_id":"139977","last_modified":"1457560315","components":[{"component_id":"145166","previous_id":0,"original_id":"0","guid":"294F5DFB79E44A7989166A7B6CC8BB95","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Set the corresponding virus sample name to a new variable.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Set the corresponding virus sample name to a new variable."},"is_project":0},{"component_id":"145167","previous_id":"145166","original_id":"0","guid":"69AA44023E2F42FEAB39072E9D8A5D5E","previous_guid":"294F5DFB79E44A7989166A7B6CC8BB95","component_type_id":"6","data_id":"0","data":"Pre-Processing Results","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Pre-Processing Results"},"is_project":0},{"component_id":"145168","previous_id":"145167","original_id":"0","guid":"5C5FDCDB8B264A6CB07395922E34FC81","previous_guid":"69AA44023E2F42FEAB39072E9D8A5D5E","component_type_id":"15","data_id":"350","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"export VIRUSID=$(awk --assign name=${NAME} '$5 == name { print $7 }' .\/SkinMet_and_Virome_001_metadata.tsv)\n    echo Virus Sample ID for ${NAME} is ${VIRUSID}\n    blastn -query .\/virome_whole_metagenome_blast\/virome_subsampled_50k\/${VIRUSID}_R1.fa -out .\/virome_whole_metagenome_blast\/blastn_virome_results\/${VIRUSID}.txt -db .\/virome_whole_metagenome_blast\/blastdb_whole_metagenome\/${NAME}_db -outfmt 6 -max_target_seqs 1 -evalue 1e-5","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139979","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"B7DFD97DC8304225B1AE89B4E4A0E7BE","previous_guid":"8848A6DB27514D23970031BC912D2F87","previous_id":"139978","last_modified":"1457560315","components":[{"component_id":"145169","previous_id":0,"original_id":"0","guid":"0F61CE84529B41058C2B913EA20C84DA","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Perform the opposite blastn as well, first making a new database.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Perform the opposite blastn as well, first making a new database."},"is_project":0},{"component_id":"145170","previous_id":"145169","original_id":"0","guid":"D1B5F205237848E58A9211F460050FB4","previous_guid":"0F61CE84529B41058C2B913EA20C84DA","component_type_id":"6","data_id":"0","data":"Pre-Processing Results","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Pre-Processing Results"},"is_project":0},{"component_id":"145171","previous_id":"145170","original_id":"0","guid":"D4BDE9C047454197BC7E341AB8666D23","previous_guid":"D1B5F205237848E58A9211F460050FB4","component_type_id":"15","data_id":"351","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"makeblastdb -dbtype nucl -in .\/virome_whole_metagenome_blast\/virome_subsampled_50k\/${VIRUSID}_R1.fa -out .\/virome_whole_metagenome_blast\/blastdb_virome\/${VIRUSID}_db\n    blastn -query .\/virome_whole_metagenome_blast\/whole_metagenome_subsampled_50k\/$1 -out .\/virome_whole_metagenome_blast\/blastn_whole_metagenome_results\/${NAME}.txt -db .\/virome_whole_metagenome_blast\/blastdb_virome\/${VIRUSID}_db -outfmt 6 -max_target_seqs 1 -evalue 1e-5\n}\nexport -f run_blastn_virome_to_wm_and_back\nmkdir .\/virome_whole_metagenome_blast\/error-out\nls .\/virome_whole_metagenome_blast\/whole_metagenome_subsampled_50k | xargs -I {} --max-procs=328 sh -c \"run_blastn_virome_to_wm_and_back {}\"","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139980","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"A869B4D747114CA39D174AC1B9BE1B7E","previous_guid":"B7DFD97DC8304225B1AE89B4E4A0E7BE","previous_id":"139979","last_modified":"1457560315","components":[{"component_id":"145172","previous_id":0,"original_id":"0","guid":"D60E3CD065EF4E029AD1F03988B9488F","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Generate a table of the blastn hit abundances for each sample, split by whether it is virome or whole metagenome.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Generate a table of the blastn hit abundances for each sample, split by whether it is virome or whole metagenome."},"is_project":0},{"component_id":"145173","previous_id":"145172","original_id":"0","guid":"EC9548E99E6B4B43903F709846C84BD9","previous_guid":"D60E3CD065EF4E029AD1F03988B9488F","component_type_id":"6","data_id":"0","data":"Pre-Processing Results","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Pre-Processing Results"},"is_project":0},{"component_id":"145174","previous_id":"145173","original_id":"0","guid":"900EFF90B2E24C30A4DA5B6AC450145E","previous_guid":"EC9548E99E6B4B43903F709846C84BD9","component_type_id":"15","data_id":"352","data":null,"order_id":"2","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"wc -l .\/virome_whole_metagenome_blast\/blastn_virome_results\/* | sed 's\/^ *\/\/' | sed 's\/ \/\\t\/' | sed 's\/\\.\\\/.*\\(MG\\)\/\\1\/' | sed 's\/\\.txt\/\/' | grep -v total > .\/virome_whole_metagenome_blast\/virome_to_metagenome_blastn_results.tsv\nwc -l .\/virome_whole_metagenome_blast\/blastn_whole_metagenome_results\/* | sed 's\/^ *\/\/' | sed 's\/ \/\\t\/' | sed 's\/\\.\\\/.*\\(MG\\)\/\\1\/' | sed 's\/\\.txt\/\/' | grep -v total > .\/virome_whole_metagenome_blast\/metagenome_to_virome_blastn_results.tsv\nwc -l .\/virome_whole_metagenome_blast\/virome_subsampled_50k\/* | sed 's\/^ *\/\/' | sed 's\/ \/\\t\/' | sed 's\/\\.\\\/.*\\(MG\\)\/\\1\/' | sed 's\/_R1\\.fa\/\/' | grep -v total > .\/virome_whole_metagenome_blast\/virome_to_metagenome_sequence_counts.tsv\nwc -l .\/virome_whole_metagenome_blast\/whole_metagenome_subsampled_50k\/* | sed 's\/^ *\/\/' | sed 's\/ \/\\t\/' | sed 's\/\\.\\\/.*\\(MG\\)\/\\1\/' | sed 's\/_R1\\.fasta\/\/' | grep -v total > .\/virome_whole_metagenome_blast\/metagenome_to_virome_sequence_counts.tsv","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]},{"id":"139981","is_changed":"0","original_id":"0","is_skipped":"0","is_checked":"0","guid":"52FD5213833C4A418EC486038DF85C01","previous_guid":"A869B4D747114CA39D174AC1B9BE1B7E","previous_id":"139980","last_modified":"1457560315","components":[{"component_id":"145175","previous_id":0,"original_id":"0","guid":"69E059D71BA2410995EEBF0E09A45A20","previous_guid":null,"component_type_id":"1","data_id":"0","data":"Combine the sequence count and hit tables.","order_id":"0","name":"Description","data_by_id":"0","type_id":"1","source_data":{"description":"Combine the sequence count and hit tables."},"is_project":0},{"component_id":"145176","previous_id":"145175","original_id":"0","guid":"924C0C1DE911474C859CF302AF080BCA","previous_guid":"69E059D71BA2410995EEBF0E09A45A20","component_type_id":"6","data_id":"0","data":"Pre-Processing Results","order_id":"1","name":"Section","data_by_id":"0","type_id":"6","source_data":{"section":"Pre-Processing Results"},"is_project":0},{"component_id":"145177","previous_id":"145176","original_id":"0","guid":"9A9EFE36FBBE4EC1B920097E5CFB0E99","previous_guid":"924C0C1DE911474C859CF302AF080BCA","component_type_id":"26","data_id":"10051","data":"","order_id":"2","name":"Note","data_by_id":"1","type_id":"26","source_data":{"annotation_id":"10051","thread_id":"10051","id":"10051","thread_title":"Annotation on step 70 of Script P1: Pre-Processing Samples","uri":"annotation-on-step-70-of-script-p1-preprocessing","thread_uri":"annotation-on-step-70-of-script-p1-preprocessing","step_id":"139981","protocol_uri":"Script-P1-Pre-Processing-Samples-edrba56","protocol_name":"Script P1: Pre-Processing Samples","protocol_name_html":"Script P1: Pre-Processing Samples","annotation":"Some of the whole metagenome samples did not have corresponding virome samples and so just had zero hits recorded. This will be cleaned up downstream in R.","thread_text":"Some of the whole metagenome samples did not have corresponding virome samples and so just had zero hits recorded. This will be cleaned up downstream in R.","body":"Some of the whole metagenome samples did not have corresponding virome samples and so just had zero hits recorded. This will be cleaned up downstream in R.","is_private":"0","public_protocol":"1","can_edit":0,"can_delete":"0","show_name":"0","created_date":"1452630693","created_on":"1452630693","modified_on":"1457560315","last_updated":"1457560315","profile_image":"https:\/\/s3.amazonaws.com\/pr-journal\/cpedy2n.jpg","full_name":"Geoffrey Hannigan","affiliation":"Merck Research Labs","username":"geoffrey-hannigan","email":"hanni035@d.umn.edu","pa_useranme":"geoffrey-hannigan","comments":[]},"is_project":0},{"component_id":"145178","previous_id":"145177","original_id":"0","guid":"5563759C3CD742A5B00DE6909F6E1410","previous_guid":"9A9EFE36FBBE4EC1B920097E5CFB0E99","component_type_id":"15","data_id":"353","data":null,"order_id":"3","name":"Command","data_by_id":"1","type_id":"15","source_data":{"name":"awk 'FNR==NR { a[$2]=$1; next } $2 in a { print $2\"\\t\"$1\"\\t\"a[$2] }' .\/virome_whole_metagenome_blast\/virome_to_metagenome_blastn_results.tsv .\/virome_whole_metagenome_blast\/virome_to_metagenome_sequence_counts.tsv > .\/virome_whole_metagenome_blast\/virome_to_metagenome_shared_results.tsv\nawk 'FNR==NR { a[$2]=$1; next } $2 in a { print $2\"\\t\"$1\"\\t\"a[$2] }' .\/virome_whole_metagenome_blast\/metagenome_to_virome_blastn_results.tsv .\/virome_whole_metagenome_blast\/metagenome_to_virome_sequence_counts.tsv > .\/virome_whole_metagenome_blast\/metagenome_to_virome_shared_results.tsv","description":"","os_name":"","os_version":"","can_edit":"0"},"is_project":0}]}]}